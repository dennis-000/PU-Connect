{"version":3,"file":"imageOptimization-D09L3Qvw.js","sources":["../../src/lib/imageOptimization.ts"],"sourcesContent":["// Image optimization utilities for faster loading\n\nexport const getOptimizedImageUrl = (url: string | undefined, width?: number, quality: number = 80): string => {\n  if (!url) return '';\n  \n  // If it's a Supabase storage URL, add transformation parameters\n  if (url.includes('supabase')) {\n    const separator = url.includes('?') ? '&' : '?';\n    const params = [];\n    \n    if (width) {\n      params.push(`width=${width}`);\n    }\n    params.push(`quality=${quality}`);\n    \n    return `${url}${separator}${params.join('&')}`;\n  }\n  \n  return url;\n};\n\nexport const preloadImage = (url: string): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => resolve();\n    img.onerror = reject;\n    img.src = url;\n  });\n};\n\nexport const preloadImages = async (urls: string[]): Promise<void> => {\n  await Promise.all(urls.map(url => preloadImage(url)));\n};\n\n// Lazy load images with Intersection Observer\nexport const setupLazyLoading = () => {\n  if ('IntersectionObserver' in window) {\n    const imageObserver = new IntersectionObserver((entries) => {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          const img = entry.target as HTMLImageElement;\n          const src = img.dataset.src;\n          if (src) {\n            img.src = src;\n            img.removeAttribute('data-src');\n            imageObserver.unobserve(img);\n          }\n        }\n      });\n    });\n\n    document.querySelectorAll('img[data-src]').forEach((img) => {\n      imageObserver.observe(img);\n    });\n  }\n};\n"],"names":["getOptimizedImageUrl","url","width","quality","separator","params"],"mappings":"AAEO,MAAMA,EAAuB,CAACC,EAAyBC,EAAgBC,EAAkB,KAAe,CAC7G,GAAI,CAACF,EAAK,MAAO,GAGjB,GAAIA,EAAI,SAAS,UAAU,EAAG,CAC5B,MAAMG,EAAYH,EAAI,SAAS,GAAG,EAAI,IAAM,IACtCI,EAAS,CAAA,EAEf,OAAIH,GACFG,EAAO,KAAK,SAASH,CAAK,EAAE,EAE9BG,EAAO,KAAK,WAAWF,CAAO,EAAE,EAEzB,GAAGF,CAAG,GAAGG,CAAS,GAAGC,EAAO,KAAK,GAAG,CAAC,EAC9C,CAEA,OAAOJ,CACT"}