{"version":3,"file":"AdminDashboard-D4fi26xc.js","sources":["../../src/pages/admin/AdminDashboard.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { supabase, type SellerApplication, type Profile } from '../../lib/supabase';\nimport Navbar from '../../components/feature/Navbar';\n\nexport default function AdminDashboard() {\n  const { profile } = useAuth();\n  const navigate = useNavigate();\n  const [applications, setApplications] = useState<(SellerApplication & { user: Profile })[]>([]);\n  const [stats, setStats] = useState({ \n    users: 0, \n    sellers: 0, \n    products: 0, \n    pending: 0, \n    approved: 0, \n    rejected: 0, \n    total: 0,\n    news: 0,\n    messages: 0 \n  });\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<'overview' | 'applications'>('overview');\n  const [processing, setProcessing] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (profile?.role !== 'admin') {\n      navigate('/marketplace');\n      return;\n    }\n\n    fetchData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [profile]);\n\n  const fetchData = async () => {\n    setLoading(true);\n\n    // Optimize: Use count queries and batch operations\n    const [applicationsRes, usersRes, sellersRes, productsRes, newsRes, messagesRes] = await Promise.all([\n      supabase\n        .from('seller_applications')\n        .select('*, user:profiles!user_id(id, full_name, email, avatar_url)', { count: 'exact' })\n        .order('created_at', { ascending: false })\n        .limit(50), // Limit applications to most recent\n      supabase.from('profiles').select('id', { count: 'exact', head: true }),\n      supabase.from('profiles').select('id', { count: 'exact', head: true }).eq('role', 'seller'),\n      supabase.from('products').select('id', { count: 'exact', head: true }).eq('is_active', true),\n      supabase.from('campus_news').select('id', { count: 'exact', head: true }).eq('status', 'published'),\n      supabase.from('messages').select('id', { count: 'exact', head: true }),\n    ]);\n\n    if (applicationsRes.data) {\n      setApplications(applicationsRes.data as any);\n      \n      // Calculate stats from limited data + counts\n      const pendingCount = applicationsRes.data.filter((a: any) => a.status === 'pending').length;\n      const approvedCount = applicationsRes.data.filter((a: any) => a.status === 'approved').length;\n      const rejectedCount = applicationsRes.data.filter((a: any) => a.status === 'rejected').length;\n      \n      setStats({\n        users: usersRes.count || 0,\n        sellers: sellersRes.count || 0,\n        products: productsRes.count || 0,\n        news: newsRes.count || 0,\n        messages: messagesRes.count || 0,\n        pending: pendingCount,\n        approved: approvedCount,\n        rejected: rejectedCount,\n        total: applicationsRes.count || applicationsRes.data.length,\n      });\n    }\n\n    setLoading(false);\n  };\n\n  const handleApprove = async (applicationId: string, userId: string) => {\n    try {\n      // Update application status\n      const { error: appError } = await supabase\n        .from('seller_applications')\n        .update({\n          status: 'approved',\n          reviewed_by: profile?.id,\n          reviewed_at: new Date().toISOString(),\n        })\n        .eq('id', applicationId);\n\n      if (appError) throw appError;\n\n      // Check if seller profile already exists\n      const { data: existingProfile } = await supabase\n        .from('seller_profiles')\n        .select('*')\n        .eq('user_id', userId)\n        .single();\n\n      if (!existingProfile) {\n        // Create seller profile with pending payment status\n        const { error: profileError } = await supabase\n          .from('seller_profiles')\n          .insert([\n            {\n              user_id: userId,\n              subscription_status: 'inactive',\n              payment_status: 'pending',\n            }\n          ]);\n\n        if (profileError) throw profileError;\n      }\n\n      // Update user role to seller\n      const { error: roleError } = await supabase\n        .from('profiles')\n        .update({ role: 'seller' })\n        .eq('id', userId);\n\n      if (roleError) throw roleError;\n\n      alert('Application approved! User will be notified to complete payment.');\n      fetchData();\n    } catch (error: any) {\n      console.error('Error approving application:', error);\n      alert('Failed to approve application');\n    }\n  };\n\n  const handleReject = async (applicationId: string) => {\n    const reason = prompt('Please provide a reason for rejection:');\n    if (!reason) return;\n\n    setProcessing(applicationId);\n    try {\n      await supabase\n        .from('seller_applications')\n        .update({\n          status: 'rejected',\n          rejection_reason: reason,\n          reviewed_by: profile?.id,\n          reviewed_at: new Date().toISOString(),\n        })\n        .eq('id', applicationId);\n\n      fetchData();\n    } catch (err: any) {\n      alert(err.message || 'Failed to reject application');\n    }\n    setProcessing(null);\n  };\n\n  const pendingApplicationsList = applications.filter((app) => app.status === 'pending');\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Navbar />\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Admin Dashboard</h1>\n            <p className=\"mt-2 text-gray-600\">Welcome back, {profile?.full_name}</p>\n          </div>\n          <button\n            onClick={() => navigate('/seller/add-product')}\n            className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap cursor-pointer\"\n          >\n            <i className=\"ri-add-line\"></i>\n            Add Product\n          </button>\n        </div>\n\n        {/* Admin Navigation */}\n        <div className=\"bg-white rounded-xl border border-gray-200 p-2 mb-8\">\n          <div className=\"flex space-x-2 overflow-x-auto\">\n            <button\n              onClick={() => setActiveTab('overview')}\n              className={`px-4 py-2 text-sm font-medium rounded-lg whitespace-nowrap cursor-pointer transition-colors ${\n                activeTab === 'overview' \n                  ? 'bg-blue-600 text-white' \n                  : 'text-gray-600 hover:bg-gray-100'\n              }`}\n            >\n              <i className=\"ri-dashboard-line mr-2\"></i>\n              Overview\n            </button>\n            <button\n              onClick={() => setActiveTab('applications')}\n              className={`px-4 py-2 text-sm font-medium rounded-lg whitespace-nowrap cursor-pointer transition-colors ${\n                activeTab === 'applications' \n                  ? 'bg-blue-600 text-white' \n                  : 'text-gray-600 hover:bg-gray-100'\n              }`}\n            >\n              <i className=\"ri-file-list-line mr-2\"></i>\n              Applications\n              {pendingApplicationsList.length > 0 && (\n                <span className=\"ml-2 px-2 py-0.5 bg-yellow-400 text-gray-900 text-xs rounded-full\">\n                  {pendingApplicationsList.length}\n                </span>\n              )}\n            </button>\n            <Link\n              to=\"/admin/users\"\n              className=\"px-4 py-2 text-sm font-medium rounded-lg text-gray-600 hover:bg-gray-100 whitespace-nowrap cursor-pointer\"\n            >\n              <i className=\"ri-user-line mr-2\"></i>\n              Users\n            </Link>\n            <Link\n              to=\"/admin/news\"\n              className=\"px-4 py-2 text-sm font-medium rounded-lg text-gray-600 hover:bg-gray-100 whitespace-nowrap cursor-pointer\"\n            >\n              <i className=\"ri-newspaper-line mr-2\"></i>\n              News\n            </Link>\n            <Link\n              to=\"/admin/sms\"\n              className=\"px-4 py-2 text-sm font-medium rounded-lg text-gray-600 hover:bg-gray-100 whitespace-nowrap cursor-pointer\"\n            >\n              <i className=\"ri-message-2-line mr-2\"></i>\n              SMS\n            </Link>\n            <Link\n              to=\"/admin/activity\"\n              className=\"px-4 py-2 text-sm font-medium rounded-lg text-gray-600 hover:bg-gray-100 whitespace-nowrap cursor-pointer\"\n            >\n              <i className=\"ri-history-line mr-2\"></i>\n              Activity\n            </Link>\n            <Link\n              to=\"/admin/roles\"\n              className=\"px-4 py-2 text-sm font-medium rounded-lg text-gray-600 hover:bg-gray-100 whitespace-nowrap cursor-pointer\"\n            >\n              <i className=\"ri-shield-user-line mr-2\"></i>\n              Roles\n            </Link>\n            <Link\n              to=\"/admin/messages\"\n              className=\"px-4 py-2 text-sm font-medium rounded-lg text-gray-600 hover:bg-gray-100 whitespace-nowrap cursor-pointer\"\n            >\n              <i className=\"ri-chat-3-line mr-2\"></i>\n              Messages\n            </Link>\n          </div>\n        </div>\n\n        {/* Overview Tab */}\n        {activeTab === 'overview' && (\n          <>\n            {/* Stats Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n              <div className=\"bg-white rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-shadow\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-user-line text-2xl text-white\"></i>\n                  </div>\n                  <span className=\"text-3xl font-bold text-gray-900\">{stats.users}</span>\n                </div>\n                <p className=\"text-sm text-gray-600 font-medium\">Total Users</p>\n                <Link to=\"/admin/users\" className=\"text-xs text-blue-600 hover:text-blue-700 mt-2 inline-block cursor-pointer\">\n                  Manage users →\n                </Link>\n              </div>\n\n              <div className=\"bg-white rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-shadow\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-store-line text-2xl text-white\"></i>\n                  </div>\n                  <span className=\"text-3xl font-bold text-gray-900\">{stats.sellers}</span>\n                </div>\n                <p className=\"text-sm text-gray-600 font-medium\">Active Sellers</p>\n                <button \n                  onClick={() => setActiveTab('applications')}\n                  className=\"text-xs text-blue-600 hover:text-blue-700 mt-2 inline-block cursor-pointer\"\n                >\n                  View applications →\n                </button>\n              </div>\n\n              <div className=\"bg-white rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-shadow\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-yellow-400 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-shopping-bag-line text-2xl text-white\"></i>\n                  </div>\n                  <span className=\"text-3xl font-bold text-gray-900\">{stats.products}</span>\n                </div>\n                <p className=\"text-sm text-gray-600 font-medium\">Total Products</p>\n                <Link to=\"/marketplace\" className=\"text-xs text-blue-600 hover:text-blue-700 mt-2 inline-block cursor-pointer\">\n                  View marketplace →\n                </Link>\n              </div>\n\n              <div className=\"bg-white rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-shadow\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-yellow-400 to-blue-500 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-newspaper-line text-2xl text-white\"></i>\n                  </div>\n                  <span className=\"text-3xl font-bold text-gray-900\">{stats.news}</span>\n                </div>\n                <p className=\"text-sm text-gray-600 font-medium\">News Articles</p>\n                <Link to=\"/admin/news\" className=\"text-xs text-blue-600 hover:text-blue-700 mt-2 inline-block cursor-pointer\">\n                  Manage news →\n                </Link>\n              </div>\n            </div>\n\n            {/* Quick Actions */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\">\n              <Link\n                to=\"/admin/news\"\n                className=\"bg-white rounded-xl p-6 border border-gray-200 hover:border-blue-500 hover:shadow-lg transition-all cursor-pointer group\"\n              >\n                <div className=\"w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-blue-600 transition-colors\">\n                  <i className=\"ri-newspaper-line text-2xl text-blue-600 group-hover:text-white\"></i>\n                </div>\n                <h3 className=\"text-lg font-bold text-gray-900 mb-2\">Publish News</h3>\n                <p className=\"text-sm text-gray-600\">Create and manage campus news articles</p>\n              </Link>\n\n              <Link\n                to=\"/admin/sms\"\n                className=\"bg-white rounded-xl p-6 border border-gray-200 hover:border-yellow-400 hover:shadow-lg transition-all cursor-pointer group\"\n              >\n                <div className=\"w-14 h-14 bg-yellow-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-yellow-400 transition-colors\">\n                  <i className=\"ri-message-2-line text-2xl text-yellow-600 group-hover:text-white\"></i>\n                </div>\n                <h3 className=\"text-lg font-bold text-gray-900 mb-2\">Send SMS</h3>\n                <p className=\"text-sm text-gray-600\">Send notifications to users via SMS</p>\n              </Link>\n\n              <Link\n                to=\"/admin/users\"\n                className=\"bg-white rounded-xl p-6 border border-gray-200 hover:border-blue-500 hover:shadow-lg transition-all cursor-pointer group\"\n              >\n                <div className=\"w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center mb-4 group-hover:bg-blue-600 transition-colors\">\n                  <i className=\"ri-user-settings-line text-2xl text-blue-600 group-hover:text-white\"></i>\n                </div>\n                <h3 className=\"text-lg font-bold text-gray-900 mb-2\">Manage Users</h3>\n                <p className=\"text-sm text-gray-600\">View and manage all platform users</p>\n              </Link>\n            </div>\n\n            {/* Recent Activity */}\n            <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Recent Activity</h2>\n                <Link \n                  to=\"/admin/activity\" \n                  className=\"text-sm text-blue-600 hover:text-blue-700 font-medium cursor-pointer\"\n                >\n                  View all →\n                </Link>\n              </div>\n              <div className=\"space-y-4\">\n                {pendingApplicationsList.slice(0, 3).map((app) => (\n                  <div key={app.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-yellow-400 rounded-full flex items-center justify-center\">\n                        <span className=\"text-white font-bold text-sm\">\n                          {app.user?.full_name?.charAt(0).toUpperCase()}\n                        </span>\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-900\">\n                          {app.user?.full_name} applied to become a seller\n                        </p>\n                        <p className=\"text-xs text-gray-500\">\n                          {new Date(app.created_at).toLocaleDateString()}\n                        </p>\n                      </div>\n                    </div>\n                    <button\n                      onClick={() => setActiveTab('applications')}\n                      className=\"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap cursor-pointer\"\n                    >\n                      Review\n                    </button>\n                  </div>\n                ))}\n                {pendingApplicationsList.length === 0 && (\n                  <div className=\"text-center py-8\">\n                    <i className=\"ri-checkbox-circle-line text-4xl text-green-500 mb-2\"></i>\n                    <p className=\"text-gray-600\">No pending applications</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </>\n        )}\n\n        {/* Applications Tab */}\n        {activeTab === 'applications' && (\n          <div className=\"bg-white rounded-xl border border-gray-200\">\n            <div className=\"p-6 border-b border-gray-200\">\n              <h2 className=\"text-xl font-bold text-gray-900\">Seller Applications</h2>\n              <p className=\"text-sm text-gray-600 mt-1\">Review and manage seller applications</p>\n            </div>\n\n            <div className=\"p-6\">\n              {loading ? (\n                <div className=\"text-center py-12\">\n                  <div className=\"inline-block w-10 h-10 border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin\"></div>\n                  <p className=\"mt-4 text-gray-600\">Loading applications...</p>\n                </div>\n              ) : pendingApplicationsList.length === 0 ? (\n                <div className=\"text-center py-12\">\n                  <i className=\"ri-inbox-line text-5xl text-gray-300 mb-4\"></i>\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No pending applications</h3>\n                  <p className=\"text-gray-600\">All applications have been reviewed</p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {pendingApplicationsList.map((application) => (\n                    <div\n                      key={application.id}\n                      className=\"border border-gray-200 rounded-xl p-6 hover:border-sky-500 transition-all\"\n                    >\n                      <div className=\"flex items-start justify-between mb-4\">\n                        <div className=\"flex items-start space-x-4\">\n                          <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-yellow-400 rounded-full flex items-center justify-center flex-shrink-0\">\n                            <span className=\"text-white font-bold text-lg\">\n                              {application.user?.full_name?.charAt(0).toUpperCase()}\n                            </span>\n                          </div>\n                          <div>\n                            <h3 className=\"text-lg font-bold text-gray-900\">\n                              {application.user?.full_name}\n                            </h3>\n                            <p className=\"text-sm text-gray-600\">{application.contact_email}</p>\n                            <p className=\"text-sm text-gray-600\">{application.contact_phone}</p>\n                          </div>\n                        </div>\n                        <span className=\"px-3 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-700 whitespace-nowrap\">\n                          Pending Review\n                        </span>\n                      </div>\n\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                        <div>\n                          <p className=\"text-xs text-gray-500 mb-1\">Business Name</p>\n                          <p className=\"text-sm font-medium text-gray-900\">{application.business_name}</p>\n                        </div>\n                        <div>\n                          <p className=\"text-xs text-gray-500 mb-1\">Business Type</p>\n                          <p className=\"text-sm font-medium text-gray-900\">{application.business_type}</p>\n                        </div>\n                      </div>\n\n                      <div className=\"mb-4\">\n                        <p className=\"text-xs text-gray-500 mb-1\">Business Description</p>\n                        <p className=\"text-sm text-gray-700\">{application.business_description}</p>\n                      </div>\n\n                      <div className=\"mb-4\">\n                        <p className=\"text-xs text-gray-500 mb-1\">Applied</p>\n                        <p className=\"text-sm text-gray-700\">\n                          {new Date(application.created_at).toLocaleDateString('en-US', {\n                            year: 'numeric',\n                            month: 'long',\n                            day: 'numeric',\n                            hour: '2-digit',\n                            minute: '2-digit',\n                          })}\n                        </p>\n                      </div>\n\n                      <div className=\"flex space-x-3 pt-4 border-t border-gray-200\">\n                        <button\n                          onClick={() => handleApprove(application.id, application.user_id)}\n                          disabled={processing === application.id}\n                          className=\"flex-1 px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer\"\n                        >\n                          {processing === application.id ? (\n                            <span className=\"flex items-center justify-center\">\n                              <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                              Processing...\n                            </span>\n                          ) : (\n                            <>\n                              <i className=\"ri-check-line mr-2\"></i>\n                              Approve\n                            </>\n                          )}\n                        </button>\n                        <button\n                          onClick={() => handleReject(application.id)}\n                          disabled={processing === application.id}\n                          className=\"flex-1 px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer\"\n                        >\n                          {processing === application.id ? (\n                            <span className=\"flex items-center justify-center\">\n                              <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                              Processing...\n                            </span>\n                          ) : (\n                            <>\n                              <i className=\"ri-close-line mr-2\"></i>\n                              Reject\n                            </>\n                          )}\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["AdminDashboard","profile","useAuth","navigate","useNavigate","applications","setApplications","useState","stats","setStats","loading","setLoading","activeTab","setActiveTab","processing","setProcessing","useEffect","fetchData","applicationsRes","usersRes","sellersRes","productsRes","newsRes","messagesRes","supabase","pendingCount","a","approvedCount","rejectedCount","handleApprove","applicationId","userId","appError","existingProfile","profileError","roleError","error","handleReject","reason","err","pendingApplicationsList","app","jsxs","jsx","Navbar","Link","Fragment","application"],"mappings":"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"}