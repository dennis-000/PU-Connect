import{j as e}from"./query-vendor-C4XoQ8tj.js";import{h as u,u as f,r as l}from"./react-vendor-BpnWQj_L.js";import{u as y,s as h,N as g}from"./index-BvprY0-k.js";import"./i18n-vendor-BT3zpxCT.js";import"./supabase-vendor-NSJvwn9b.js";function w(){const[o]=u(),x=f(),{user:r}=y(),[i,s]=l.useState("verifying"),[n,t]=l.useState("Verifying your payment...");l.useEffect(()=>{const a=o.get("reference");if(!a||!r){s("failed"),t("Invalid payment reference");return}d(a)},[o,r]);const d=async a=>{try{const{data:c,error:m}=await h.functions.invoke("verify-paystack-payment",{body:{reference:a,seller_id:r?.id}});if(m)throw m;c.success?(s("success"),t("Payment successful! Your seller account is now active."),setTimeout(()=>{window.location.href="/seller/dashboard"},3e3)):(s("failed"),t("Payment verification failed. Please contact support."))}catch(c){console.error("Verification error:",c),s("failed"),t("Failed to verify payment. Please contact support with your payment reference.")}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(g,{}),e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-16",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center",children:[i==="verifying"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-loader-4-line text-4xl text-sky-600 animate-spin"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Verifying Payment"}),e.jsx("p",{className:"text-gray-600",children:n})]}),i==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-check-line text-4xl text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:n}),e.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("i",{className:"ri-time-line"}),e.jsx("span",{children:"Redirecting to your dashboard..."})]})]}),i==="failed"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-close-line text-4xl text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Payment Failed"}),e.jsx("p",{className:"text-gray-600 mb-6",children:n}),e.jsx("button",{onClick:()=>x("/seller/become"),className:"px-6 py-3 bg-sky-600 text-white font-medium rounded-lg hover:bg-sky-700 transition-colors whitespace-nowrap cursor-pointer",children:"Try Again"})]})]})})]})}export{w as default};
//# sourceMappingURL=PaymentCallback-CyMCEGC6.js.map
