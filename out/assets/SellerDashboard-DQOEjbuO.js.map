{"version":3,"file":"SellerDashboard-DQOEjbuO.js","sources":["../../src/pages/seller/SellerDashboard.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { supabase, type Product } from '../../lib/supabase';\nimport Navbar from '../../components/feature/Navbar';\n\nexport default function SellerDashboard() {\n  const { user, profile } = useAuth();\n  const navigate = useNavigate();\n  const [products, setProducts] = useState<Product[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [stats, setStats] = useState({ total: 0, active: 0, views: 0 });\n\n  useEffect(() => {\n    if (!user || profile?.role !== 'seller') {\n      navigate('/marketplace');\n      return;\n    }\n\n    fetchProducts();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user, profile]);\n\n  const fetchProducts = async () => {\n    if (!user) return;\n\n    setLoading(true);\n    const { data, error } = await supabase\n      .from('products')\n      .select('*')\n      .eq('seller_id', user.id)\n      .order('created_at', { ascending: false });\n\n    if (!error && data) {\n      setProducts(data);\n      setStats({\n        total: data.length,\n        active: data.filter((p) => p.is_active).length,\n        views: data.reduce((sum, p) => sum + p.views_count, 0),\n      });\n    }\n    setLoading(false);\n  };\n\n  const toggleProductStatus = async (productId: string, currentStatus: boolean) => {\n    await supabase\n      .from('products')\n      .update({ is_active: !currentStatus })\n      .eq('id', productId);\n\n    fetchProducts();\n  };\n\n  const deleteProduct = async (productId: string) => {\n    if (window.confirm('Are you sure you want to delete this product? This action cannot be undone.')) {\n      try {\n        const { error } = await supabase.from('products').delete().eq('id', productId);\n        if (error) throw error;\n        fetchProducts();\n      } catch (error: any) {\n        alert('Failed to delete product: ' + (error.message || 'Unknown error'));\n      }\n    }\n  };\n\n  const editProduct = (productId: string) => {\n    navigate(`/seller/edit-product/${productId}`);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Navbar />\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Seller Dashboard</h1>\n            <p className=\"text-gray-600\">Manage your products and business</p>\n          </div>\n          <Link\n            to=\"/seller/add-product\"\n            className=\"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap cursor-pointer\"\n          >\n            <i className=\"ri-add-line mr-2\"></i>\n            Add Product\n          </Link>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-shopping-bag-line text-2xl text-blue-600\"></i>\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-600 mb-1\">Total Products</p>\n            <p className=\"text-3xl font-bold text-gray-900\">{stats.total}</p>\n          </div>\n\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-check-line text-2xl text-yellow-600\"></i>\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-600 mb-1\">Active Listings</p>\n            <p className=\"text-3xl font-bold text-gray-900\">{stats.active}</p>\n          </div>\n\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-eye-line text-2xl text-blue-600\"></i>\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-600 mb-1\">Total Views</p>\n            <p className=\"text-3xl font-bold text-gray-900\">{stats.views}</p>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-xl shadow-sm\">\n          <div className=\"border-b border-gray-200 px-6 py-4\">\n            <h2 className=\"text-xl font-bold text-gray-900\">Your Products</h2>\n          </div>\n\n          <div className=\"p-6\">\n            {loading ? (\n              <div className=\"text-center py-12\">\n                <div className=\"inline-block w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin\"></div>\n              </div>\n            ) : products.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <i className=\"ri-shopping-bag-line text-6xl text-gray-300 mb-4\"></i>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No products yet</h3>\n                <p className=\"text-gray-600 mb-6\">Start by adding your first product</p>\n                <Link\n                  to=\"/seller/add-product\"\n                  className=\"inline-block px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap cursor-pointer\"\n                >\n                  Add Product\n                </Link>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {products.map((product) => (\n                  <div key={product.id} className=\"border border-gray-200 rounded-lg p-6 flex items-start space-x-6\">\n                    <div className=\"w-24 h-24 bg-gradient-to-br from-blue-100 to-yellow-100 rounded-lg flex-shrink-0 overflow-hidden\">\n                      {product.images && product.images.length > 0 ? (\n                        <img \n                          src={product.images[0]} \n                          alt={product.name} \n                          className=\"w-full h-full object-cover\"\n                          loading=\"lazy\"\n                          decoding=\"async\"\n                        />\n                      ) : (\n                        <div className=\"w-full h-full flex items-center justify-center\">\n                          <i className=\"ri-image-line text-3xl text-blue-300\"></i>\n                        </div>\n                      )}\n                    </div>\n\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div>\n                          <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">{product.name}</h3>\n                          <span className=\"inline-block px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full\">\n                            {product.category}\n                          </span>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <span\n                            className={`px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap ${\n                              product.is_active ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'\n                            }`}\n                          >\n                            {product.is_active ? 'Active' : 'Inactive'}\n                          </span>\n                        </div>\n                      </div>\n\n                      <p className=\"text-sm text-gray-600 mb-4 line-clamp-2\">{product.description}</p>\n\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\n                          <span>\n                            <i className=\"ri-eye-line mr-1\"></i>\n                            {product.views_count} views\n                          </span>\n                          {product.price_type === 'fixed' && (\n                            <span className=\"font-semibold text-blue-600\">GHâ‚µ {product.price?.toFixed(2)}</span>\n                          )}\n                        </div>\n\n                        <div className=\"flex items-center space-x-2\">\n                          <button\n                            onClick={() => editProduct(product.id)}\n                            className=\"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors whitespace-nowrap cursor-pointer\"\n                            title=\"Edit Product\"\n                          >\n                            <i className=\"ri-edit-line\"></i>\n                          </button>\n                          <button\n                            onClick={() => toggleProductStatus(product.id, product.is_active)}\n                            className=\"px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap cursor-pointer\"\n                          >\n                            {product.is_active ? 'Deactivate' : 'Activate'}\n                          </button>\n                          <button\n                            onClick={() => deleteProduct(product.id)}\n                            className=\"px-3 py-2 text-sm font-medium text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors whitespace-nowrap cursor-pointer\"\n                            title=\"Delete Product\"\n                          >\n                            <i className=\"ri-delete-bin-line\"></i>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["SellerDashboard","user","profile","useAuth","navigate","useNavigate","products","setProducts","useState","loading","setLoading","stats","setStats","useEffect","fetchProducts","data","error","supabase","p","sum","toggleProductStatus","productId","currentStatus","deleteProduct","editProduct","jsxs","jsx","Navbar","Link","product"],"mappings":"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"}