import{j as e}from"./query-vendor-C4XoQ8tj.js";import{u as N,r as m,L as f}from"./react-vendor-BpnWQj_L.js";function X(){const g=N(),[u,x]=m.useState(!1),[p,o]=m.useState(""),[s,i]=m.useState({email:"",password:"",confirmPassword:"",fullName:"",studentId:"",department:"",faculty:"",phone:""}),[a,n]=m.useState({email:"",phone:""}),b=t=>{const d=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!t)return n(l=>({...l,email:""})),!0;if(!d.test(t))return n(l=>({...l,email:"Please enter a valid email address"})),!1;const c=["pentu.edu.gh","pentvars.edu.gh"],r=t.split("@")[1]?.toLowerCase();return r&&!c.includes(r)?(n(l=>({...l,email:"Please use your university email address (@pentu.edu.gh or @pentvars.edu.gh)"})),!1):(n(l=>({...l,email:""})),!0)},j=t=>{if(!t)return n(r=>({...r,phone:""})),!0;const d=t.replace(/[\s\-()]/g,"");return/^(\+233|233|0)(2[0-9]|5[0-9]|3[0-9])[0-9]{7}$/.test(d)?(n(r=>({...r,phone:""})),!0):(n(r=>({...r,phone:"Please enter a valid Ghana phone number (e.g., +233 XX XXX XXXX or 0XX XXX XXXX)"})),!1)},w=async t=>{t.preventDefault(),o("");const d=b(s.email),c=j(s.phone);if(!d||!c){o("Please fix the validation errors before submitting");return}if(s.password!==s.confirmPassword){o("Passwords do not match");return}if(s.password.length<6){o("Password must be at least 6 characters");return}if(s.fullName.trim().length<3){o("Please enter your full name (at least 3 characters)");return}x(!0);try{const h=await(await fetch("https://vfarpknicgxlrherrqnb.supabase.co/functions/v1/register-user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer sb_publishable_mXKO6j3q4rMcHxjXfFY3fA_XOCNH8GU"},body:JSON.stringify({email:s.email,password:s.password,fullName:s.fullName,studentId:s.studentId,department:s.department,faculty:s.faculty,phone:s.phone})})).json();if(!h.success)throw new Error(h.error||"Failed to create account");alert("Account created successfully! Please log in with your credentials."),g("/login")}catch(r){console.error("Registration error:",r),o(r.message||"Failed to create account. Please try again.")}finally{x(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-slate-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs(f,{to:"/",className:"inline-flex items-center space-x-2 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-700 to-slate-900 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-store-3-line text-white text-2xl"})}),e.jsx("span",{className:"text-2xl font-bold text-slate-900",children:"PentU Market"})]}),e.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Create Account"}),e.jsx("p",{className:"mt-2 text-slate-600",children:"Join the campus marketplace"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8",children:[p&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[e.jsx("i",{className:"ri-error-warning-line text-red-600 text-xl mr-3 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-600",children:p})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-slate-700 mb-2",children:"Full Name"}),e.jsx("input",{id:"fullName",type:"text",required:!0,value:s.fullName,onChange:t=>i({...s,fullName:t.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all",placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:"University Email"}),e.jsx("input",{id:"email",type:"email",required:!0,value:s.email,onChange:t=>i({...s,email:t.target.value}),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all ${a.email?"border-red-500":"border-slate-300"}`,placeholder:"your.email@pentu.edu"}),a.email&&e.jsxs("div",{className:"mt-1 flex items-start space-x-1",children:[e.jsx("i",{className:"ri-error-warning-line text-red-500 text-sm mt-0.5"}),e.jsx("p",{className:"text-xs text-red-500",children:a.email})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-slate-700 mb-2",children:"Phone Number"}),e.jsx("input",{id:"phone",type:"tel",required:!0,value:s.phone,onChange:t=>i({...s,phone:t.target.value}),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all ${a.phone?"border-red-500":"border-slate-300"}`,placeholder:"+233 XX XXX XXXX"}),a.phone&&e.jsxs("div",{className:"mt-1 flex items-start space-x-1",children:[e.jsx("i",{className:"ri-error-warning-line text-red-500 text-sm mt-0.5"}),e.jsx("p",{className:"text-xs text-red-500",children:a.phone})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-2",children:"Password"}),e.jsx("input",{id:"password",type:"password",required:!0,value:s.password,onChange:t=>i({...s,password:t.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all",placeholder:"Create a strong password"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 mb-2",children:"Confirm Password"}),e.jsx("input",{id:"confirmPassword",type:"password",required:!0,value:s.confirmPassword,onChange:t=>i({...s,confirmPassword:t.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent transition-all",placeholder:"Confirm your password"})]}),e.jsx("button",{type:"submit",disabled:u||!!a.email||!!a.phone,className:"w-full py-3 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center whitespace-nowrap",children:u?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Creating account..."]}):"Create Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-slate-600",children:["Already have an account?"," ",e.jsx(f,{to:"/login",className:"text-slate-900 hover:text-slate-700 font-semibold cursor-pointer",children:"Sign in"})]})})]})]})})}export{X as default};
//# sourceMappingURL=Register-PYMWyn6a.js.map
