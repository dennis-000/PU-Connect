import{j as e}from"./query-vendor-C4XoQ8tj.js";import{u as h,r as a}from"./react-vendor-BpnWQj_L.js";import{u as b,s as y,N as f}from"./index-BvprY0-k.js";import"./i18n-vendor-BT3zpxCT.js";import"./supabase-vendor-NSJvwn9b.js";function A(){const{profile:n}=b(),x=h(),[l,g]=a.useState([]),[m,o]=a.useState(!0),[r,s]=a.useState("all");a.useEffect(()=>{if(n?.role!=="admin"){x("/marketplace");return}c();const t=setInterval(c,3e4);return()=>clearInterval(t)},[n]);const c=async()=>{o(!0);const{data:t,error:i}=await y.from("activity_logs").select(`
        *,
        user:profiles!user_id(full_name, email)
      `).order("created_at",{ascending:!1}).limit(100);!i&&t&&g(t),o(!1)},d=r==="all"?l:l.filter(t=>t.action_type===r),u=t=>{switch(t){case"login":return"ri-login-box-line";case"logout":return"ri-logout-box-line";case"product_created":return"ri-add-box-line";case"product_updated":return"ri-edit-box-line";case"product_deleted":return"ri-delete-bin-line";case"message_sent":return"ri-message-line";case"application_submitted":return"ri-file-list-line";default:return"ri-information-line"}},p=t=>{switch(t){case"login":return"bg-green-100 text-green-700";case"logout":return"bg-gray-100 text-gray-700";case"product_created":return"bg-blue-100 text-blue-700";case"product_updated":return"bg-yellow-100 text-yellow-700";case"product_deleted":return"bg-red-100 text-red-700";case"message_sent":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(f,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Activity Monitor"}),e.jsx("p",{className:"text-gray-600",children:"Real-time monitoring of platform activities"})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4 overflow-x-auto",children:[e.jsx("button",{onClick:()=>s("all"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors whitespace-nowrap cursor-pointer ${r==="all"?"bg-gray-900 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"All Activities"}),e.jsx("button",{onClick:()=>s("login"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors whitespace-nowrap cursor-pointer ${r==="login"?"bg-gray-900 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Logins"}),e.jsx("button",{onClick:()=>s("product_created"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors whitespace-nowrap cursor-pointer ${r==="product_created"?"bg-gray-900 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Products"}),e.jsx("button",{onClick:()=>s("message_sent"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors whitespace-nowrap cursor-pointer ${r==="message_sent"?"bg-gray-900 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Messages"})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:m?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-10 h-10 border-4 border-gray-200 border-t-gray-900 rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading activities..."})]}):d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-history-line text-5xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No activities found"}),e.jsx("p",{className:"text-gray-600",children:"Activities will appear here as users interact with the platform"})]}):e.jsx("div",{className:"space-y-4",children:d.map(t=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 border border-gray-200 rounded-lg hover:border-gray-300 transition-all",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${p(t.action_type)}`,children:e.jsx("i",{className:`${u(t.action_type)} text-lg`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:t.user?.full_name||"Unknown User"}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(t.created_at).toLocaleString()})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:t.action_type.replace(/_/g," ").replace(/\b\w/g,i=>i.toUpperCase())}),t.action_details&&e.jsx("p",{className:"text-xs text-gray-500",children:JSON.stringify(t.action_details)})]})]},t.id))})})]})]})}export{A as default};
//# sourceMappingURL=ActivityMonitor-cVxXayhJ.js.map
