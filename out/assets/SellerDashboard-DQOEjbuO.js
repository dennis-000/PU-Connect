import{j as e}from"./query-vendor-C4XoQ8tj.js";import{u as N,r as a,L as u}from"./react-vendor-BpnWQj_L.js";import{u as v,s as n,N as w}from"./index-BvprY0-k.js";import"./i18n-vendor-BT3zpxCT.js";import"./supabase-vendor-NSJvwn9b.js";function D(){const{user:i,profile:d}=v(),o=N(),[x,h]=a.useState([]),[b,m]=a.useState(!0),[l,g]=a.useState({total:0,active:0,views:0});a.useEffect(()=>{if(!i||d?.role!=="seller"){o("/marketplace");return}r()},[i,d]);const r=async()=>{if(!i)return;m(!0);const{data:s,error:t}=await n.from("products").select("*").eq("seller_id",i.id).order("created_at",{ascending:!1});!t&&s&&(h(s),g({total:s.length,active:s.filter(c=>c.is_active).length,views:s.reduce((c,y)=>c+y.views_count,0)})),m(!1)},p=async(s,t)=>{await n.from("products").update({is_active:!t}).eq("id",s),r()},j=async s=>{if(window.confirm("Are you sure you want to delete this product? This action cannot be undone."))try{const{error:t}=await n.from("products").delete().eq("id",s);if(t)throw t;r()}catch(t){alert("Failed to delete product: "+(t.message||"Unknown error"))}},f=s=>{o(`/seller/edit-product/${s}`)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(w,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Seller Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Manage your products and business"})]}),e.jsxs(u,{to:"/seller/add-product",className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Add Product"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-shopping-bag-line text-2xl text-blue-600"})})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Products"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:l.total})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-check-line text-2xl text-yellow-600"})})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Active Listings"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:l.active})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-eye-line text-2xl text-blue-600"})})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Views"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:l.views})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Your Products"})}),e.jsx("div",{className:"p-6",children:b?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}):x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-shopping-bag-line text-6xl text-gray-300 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No products yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Start by adding your first product"}),e.jsx(u,{to:"/seller/add-product",className:"inline-block px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap cursor-pointer",children:"Add Product"})]}):e.jsx("div",{className:"space-y-4",children:x.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 flex items-start space-x-6",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-100 to-yellow-100 rounded-lg flex-shrink-0 overflow-hidden",children:s.images&&s.images.length>0?e.jsx("img",{src:s.images[0],alt:s.name,className:"w-full h-full object-cover",loading:"lazy",decoding:"async"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("i",{className:"ri-image-line text-3xl text-blue-300"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:s.name}),e.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:s.category})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap ${s.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.is_active?"Active":"Inactive"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[e.jsx("i",{className:"ri-eye-line mr-1"}),s.views_count," views"]}),s.price_type==="fixed"&&e.jsxs("span",{className:"font-semibold text-blue-600",children:["GHâ‚µ ",s.price?.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>f(s.id),className:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors whitespace-nowrap cursor-pointer",title:"Edit Product",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{onClick:()=>p(s.id,s.is_active),className:"px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap cursor-pointer",children:s.is_active?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>j(s.id),className:"px-3 py-2 text-sm font-medium text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors whitespace-nowrap cursor-pointer",title:"Delete Product",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]})]})]},s.id))})})]})]})]})}export{D as default};
//# sourceMappingURL=SellerDashboard-DQOEjbuO.js.map
