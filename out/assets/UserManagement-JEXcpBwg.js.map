{"version":3,"file":"UserManagement-JEXcpBwg.js","sources":["../../src/pages/admin/UserManagement.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { supabase } from '../../lib/supabase';\nimport Navbar from '../../components/feature/Navbar';\n\ntype User = {\n  id: string;\n  email: string;\n  full_name: string;\n  student_id: string | null;\n  department: string | null;\n  faculty: string | null;\n  role: string;\n  is_active: boolean;\n  created_at: string;\n};\n\nexport default function UserManagement() {\n  const navigate = useNavigate();\n  const { profile, loading: authLoading } = useAuth();\n  const [users, setUsers] = useState<User[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [roleFilter, setRoleFilter] = useState('all');\n  const [openDropdown, setOpenDropdown] = useState<string | null>(null);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editRole, setEditRole] = useState('');\n  const [saving, setSaving] = useState(false);\n  const [showSuccessToast, setShowSuccessToast] = useState(false);\n\n  useEffect(() => {\n    if (!authLoading && profile?.role !== 'admin') {\n      navigate('/');\n    }\n  }, [profile, authLoading, navigate]);\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setUsers(data || []);\n    } catch (error) {\n      console.error('Error fetching users:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleToggleActive = async (userId: string, currentStatus: boolean) => {\n    try {\n      const { error } = await supabase\n        .from('profiles')\n        .update({ is_active: !currentStatus })\n        .eq('id', userId);\n\n      if (error) throw error;\n      \n      await fetchUsers();\n      setOpenDropdown(null);\n      alert(`User ${!currentStatus ? 'activated' : 'suspended'} successfully`);\n    } catch (error) {\n      console.error('Error updating user status:', error);\n      alert('Failed to update user status');\n    }\n  };\n\n  const handleDeleteUser = async (userId: string) => {\n    if (!confirm('Are you sure you want to delete this user? This action cannot be undone.')) {\n      return;\n    }\n\n    try {\n      const { error } = await supabase\n        .from('profiles')\n        .delete()\n        .eq('id', userId);\n\n      if (error) throw error;\n      \n      await fetchUsers();\n      setOpenDropdown(null);\n      alert('User deleted successfully');\n    } catch (error) {\n      console.error('Error deleting user:', error);\n      alert('Failed to delete user');\n    }\n  };\n\n  const handleEditRole = (user: User) => {\n    setSelectedUser(user);\n    setEditRole(user.role);\n    setShowEditModal(true);\n    setOpenDropdown(null);\n  };\n\n  const handleSaveRole = async () => {\n    if (!selectedUser) return;\n\n    setSaving(true);\n    try {\n      const { error } = await supabase\n        .from('profiles')\n        .update({ role: editRole })\n        .eq('id', selectedUser.id);\n\n      if (error) throw error;\n      \n      await fetchUsers();\n      setShowEditModal(false);\n      setSelectedUser(null);\n      setShowSuccessToast(true);\n      setTimeout(() => setShowSuccessToast(false), 3000);\n    } catch (error) {\n      console.error('Error updating role:', error);\n      alert('Failed to update user role');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleExportData = () => {\n    const csvContent = [\n      ['Email', 'Full Name', 'Student ID', 'Department', 'Faculty', 'Role', 'Status', 'Created At'],\n      ...filteredUsers.map(user => [\n        user.email,\n        user.full_name,\n        user.student_id || '',\n        user.department || '',\n        user.faculty || '',\n        user.role,\n        user.is_active ? 'Active' : 'Suspended',\n        new Date(user.created_at).toLocaleDateString()\n      ])\n    ].map(row => row.join(',')).join('\\n');\n\n    const blob = new Blob([csvContent], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `users-${new Date().toISOString().split('T')[0]}.csv`;\n    a.click();\n  };\n\n  const filteredUsers = users.filter(user => {\n    const matchesSearch = \n      user.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      user.full_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      (user.student_id && user.student_id.toLowerCase().includes(searchTerm.toLowerCase()));\n    \n    const matchesRole = roleFilter === 'all' || user.role === roleFilter;\n    \n    return matchesSearch && matchesRole;\n  });\n\n  if (authLoading || loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <i className=\"ri-loader-4-line text-4xl text-teal-600 animate-spin\"></i>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Navbar />\n      \n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">User Management</h1>\n            <p className=\"mt-2 text-gray-600\">Manage all platform users and their roles</p>\n          </div>\n          <button\n            onClick={handleExportData}\n            className=\"flex items-center gap-2 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors whitespace-nowrap cursor-pointer\"\n          >\n            <i className=\"ri-download-line\"></i>\n            Export Data\n          </button>\n        </div>\n\n        {/* Filters */}\n        <div className=\"bg-white rounded-xl shadow-sm p-6 mb-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Search Users\n              </label>\n              <div className=\"relative\">\n                <i className=\"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"></i>\n                <input\n                  type=\"text\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  placeholder=\"Search by name, email, or student ID...\"\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Filter by Role\n              </label>\n              <select\n                value={roleFilter}\n                onChange={(e) => setRoleFilter(e.target.value)}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm cursor-pointer\"\n              >\n                <option value=\"all\">All Roles</option>\n                <option value=\"buyer\">Buyers</option>\n                <option value=\"seller\">Sellers</option>\n                <option value=\"admin\">Admins</option>\n                <option value=\"news_publisher\">News Publishers</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6\">\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Total Users</p>\n                <p className=\"text-2xl font-bold text-gray-900 mt-1\">{users.length}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-user-line text-2xl text-teal-600\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Buyers</p>\n                <p className=\"text-2xl font-bold text-gray-900 mt-1\">\n                  {users.filter(u => u.role === 'buyer').length}\n                </p>\n              </div>\n              <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-shopping-bag-line text-2xl text-blue-600\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Sellers</p>\n                <p className=\"text-2xl font-bold text-gray-900 mt-1\">\n                  {users.filter(u => u.role === 'seller').length}\n                </p>\n              </div>\n              <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-store-line text-2xl text-green-600\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Admins</p>\n                <p className=\"text-2xl font-bold text-gray-900 mt-1\">\n                  {users.filter(u => u.role === 'admin').length}\n                </p>\n              </div>\n              <div className=\"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-shield-user-line text-2xl text-orange-600\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">News Publishers</p>\n                <p className=\"text-2xl font-bold text-gray-900 mt-1\">\n                  {users.filter(u => u.role === 'news_publisher').length}\n                </p>\n              </div>\n              <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-newspaper-line text-2xl text-purple-600\"></i>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Users Table */}\n        <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-gray-50 border-b border-gray-200\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    User\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Student ID\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Department\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Role\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Status\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Joined\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {filteredUsers.map((user) => (\n                  <tr key={user.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"flex items-center\">\n                        <div className=\"w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center\">\n                          <span className=\"text-teal-600 font-medium text-sm\">\n                            {user.full_name.charAt(0).toUpperCase()}\n                          </span>\n                        </div>\n                        <div className=\"ml-4\">\n                          <div className=\"text-sm font-medium text-gray-900\">{user.full_name}</div>\n                          <div className=\"text-sm text-gray-500\">{user.email}</div>\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm text-gray-900\">{user.student_id || '-'}</div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm text-gray-900\">{user.department || '-'}</div>\n                      {user.faculty && (\n                        <div className=\"text-sm text-gray-500\">{user.faculty}</div>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${\n                        user.role === 'admin' \n                          ? 'bg-orange-100 text-orange-800'\n                          : user.role === 'seller'\n                          ? 'bg-green-100 text-green-800'\n                          : user.role === 'news_publisher'\n                          ? 'bg-purple-100 text-purple-800'\n                          : 'bg-blue-100 text-blue-800'\n                      }`}>\n                        {user.role === 'news_publisher' ? 'News Publisher' : user.role}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${\n                        user.is_active\n                          ? 'bg-green-100 text-green-800'\n                          : 'bg-red-100 text-red-800'\n                      }`}>\n                        {user.is_active ? 'Active' : 'Suspended'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {new Date(user.created_at).toLocaleDateString()}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 relative\">\n                      <button\n                        onClick={() => setOpenDropdown(openDropdown === user.id ? null : user.id)}\n                        className=\"text-sm text-gray-600 hover:text-gray-900 cursor-pointer\"\n                      >\n                        <i className=\"ri-more-2-fill text-lg\"></i>\n                      </button>\n\n                      {/* Dropdown Menu */}\n                      {openDropdown === user.id && (\n                        <>\n                          <div \n                            className=\"fixed inset-0 z-10\" \n                            onClick={() => setOpenDropdown(null)}\n                          ></div>\n                          <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-20\">\n                            <button\n                              onClick={() => handleEditRole(user)}\n                              className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2 cursor-pointer\"\n                            >\n                              <i className=\"ri-edit-line\"></i>\n                              Edit Role\n                            </button>\n                            <button\n                              onClick={() => handleToggleActive(user.id, user.is_active)}\n                              className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2 cursor-pointer\"\n                            >\n                              <i className={user.is_active ? 'ri-forbid-line' : 'ri-check-line'}></i>\n                              {user.is_active ? 'Suspend User' : 'Activate User'}\n                            </button>\n                            <button\n                              onClick={() => handleDeleteUser(user.id)}\n                              className=\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2 cursor-pointer\"\n                            >\n                              <i className=\"ri-delete-bin-line\"></i>\n                              Delete User\n                            </button>\n                          </div>\n                        </>\n                      )}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          {filteredUsers.length === 0 && (\n            <div className=\"text-center py-12\">\n              <i className=\"ri-user-search-line text-5xl text-gray-300\"></i>\n              <p className=\"mt-4 text-gray-500\">No users found</p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Edit Role Modal */}\n      {showEditModal && selectedUser && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl shadow-xl max-w-md w-full p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-900\">Edit User Role</h3>\n              <button\n                onClick={() => setShowEditModal(false)}\n                className=\"text-gray-400 hover:text-gray-600 cursor-pointer\"\n              >\n                <i className=\"ri-close-line text-2xl\"></i>\n              </button>\n            </div>\n\n            <div className=\"mb-6\">\n              <p className=\"text-sm text-gray-600 mb-4\">\n                Change role for <span className=\"font-medium text-gray-900\">{selectedUser.full_name}</span>\n              </p>\n              \n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Select Role\n              </label>\n              <select\n                value={editRole}\n                onChange={(e) => setEditRole(e.target.value)}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent cursor-pointer\"\n              >\n                <option value=\"buyer\">Buyer</option>\n                <option value=\"seller\">Seller</option>\n                <option value=\"admin\">Admin</option>\n                <option value=\"news_publisher\">News Publisher</option>\n              </select>\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => setShowEditModal(false)}\n                className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap cursor-pointer\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSaveRole}\n                disabled={saving || editRole === selectedUser.role}\n                className=\"flex-1 px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors whitespace-nowrap cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n              >\n                {saving ? (\n                  <>\n                    <i className=\"ri-loader-4-line animate-spin\"></i>\n                    Saving...\n                  </>\n                ) : (\n                  'Save Changes'\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Success Toast */}\n      {showSuccessToast && (\n        <div className=\"fixed bottom-6 right-6 bg-green-600 text-white px-6 py-4 rounded-lg shadow-lg flex items-center gap-3 z-50 animate-slide-up\">\n          <div className=\"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center\">\n            <i className=\"ri-check-line text-xl\"></i>\n          </div>\n          <div>\n            <p className=\"font-medium\">Success!</p>\n            <p className=\"text-sm text-green-100\">User role updated successfully</p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":["UserManagement","navigate","useNavigate","profile","authLoading","useAuth","users","setUsers","useState","loading","setLoading","searchTerm","setSearchTerm","roleFilter","setRoleFilter","openDropdown","setOpenDropdown","selectedUser","setSelectedUser","showEditModal","setShowEditModal","editRole","setEditRole","saving","setSaving","showSuccessToast","setShowSuccessToast","useEffect","fetchUsers","data","error","supabase","handleToggleActive","userId","currentStatus","handleDeleteUser","handleEditRole","user","handleSaveRole","handleExportData","csvContent","filteredUsers","row","blob","url","a","matchesSearch","matchesRole","jsxs","jsx","Navbar","e","u","Fragment"],"mappings":"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"}