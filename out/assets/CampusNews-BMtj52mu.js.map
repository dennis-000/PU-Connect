{"version":3,"file":"CampusNews-BMtj52mu.js","sources":["../../src/pages/news/CampusNews.tsx"],"sourcesContent":["import { useState, useEffect, useMemo } from 'react';\nimport { Link } from 'react-router-dom';\nimport { supabase } from '../../lib/supabase';\nimport Navbar from '../../components/feature/Navbar';\n\ntype NewsArticle = {\n  id: string;\n  title: string;\n  content: string;\n  category: string;\n  image_url?: string;\n  views_count: number;\n  created_at: string;\n};\n\nexport default function CampusNews() {\n  const [news, setNews] = useState<NewsArticle[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const categories = [\n    'Campus Events',\n    'Facilities',\n    'Technology',\n    'Career',\n    'Campus Life',\n    'Health & Wellness',\n    'Academics',\n    'Sports',\n  ];\n\n  useEffect(() => {\n    fetchNews();\n  }, []);\n\n  const fetchNews = async () => {\n    setLoading(true);\n    try {\n      const { data, error } = await supabase\n        .from('campus_news')\n        .select('*')\n        .eq('status', 'published')\n        .order('created_at', { ascending: false });\n\n      if (error) {\n        console.error('Error fetching news:', error);\n        return;\n      }\n      \n      if (data) {\n        setNews(data);\n      }\n    } catch (error) {\n      console.error('Unexpected error fetching news:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredNews = useMemo(() => {\n    return news.filter((article) => {\n      const matchesSearch = article.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        article.content.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesCategory = selectedCategory === 'all' || article.category === selectedCategory;\n      return matchesSearch && matchesCategory;\n    });\n  }, [news, searchQuery, selectedCategory]);\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', { \n      year: 'numeric', \n      month: 'long', \n      day: 'numeric' \n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 pt-20\">\n      <Navbar />\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Campus News</h1>\n          <p className=\"text-lg text-gray-600\">Stay updated with the latest happenings</p>\n        </div>\n\n        {/* Search Bar */}\n        <div className=\"mb-6\">\n          <div className=\"relative max-w-md\">\n            <input\n              type=\"text\"\n              placeholder=\"Search news...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full px-4 py-3 pl-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\n            />\n            <i className=\"ri-search-line absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-lg\"></i>\n          </div>\n        </div>\n\n        {/* Category Filter */}\n        <div className=\"mb-8 flex flex-wrap gap-3\">\n          <button\n            onClick={() => setSelectedCategory('all')}\n            className={`px-6 py-2 rounded-lg font-medium transition-all cursor-pointer whitespace-nowrap ${\n              selectedCategory === 'all'\n                ? 'bg-blue-600 text-white'\n                : 'bg-white text-gray-700 hover:bg-gray-100'\n            }`}\n          >\n            All News\n          </button>\n          {categories.map((category) => (\n            <button\n              key={category}\n              onClick={() => setSelectedCategory(category)}\n              className={`px-6 py-2 rounded-lg font-medium transition-all cursor-pointer whitespace-nowrap ${\n                selectedCategory === category\n                  ? 'bg-blue-600 text-white'\n                  : 'bg-white text-gray-700 hover:bg-gray-100'\n              }`}\n            >\n              {category}\n            </button>\n          ))}\n        </div>\n\n        {loading ? (\n          <div className=\"text-center py-12\">\n            <div className=\"inline-block w-10 h-10 border-4 border-gray-200 border-t-blue-600 rounded-full animate-spin\"></div>\n            <p className=\"mt-4 text-gray-600\">Loading news...</p>\n          </div>\n        ) : filteredNews.length === 0 ? (\n          <div className=\"text-center py-12 bg-white rounded-xl border border-gray-200\">\n            <i className=\"ri-newspaper-line text-5xl text-gray-300 mb-4\"></i>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No news found</h3>\n            <p className=\"text-gray-600\">\n              {searchQuery || selectedCategory !== 'all' \n                ? 'Try adjusting your search or filters' \n                : 'Check back soon for campus updates'}\n            </p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredNews.map((article) => (\n              <Link\n                key={article.id}\n                to={`/news/${article.id}`}\n                className=\"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer group\"\n              >\n                <div className=\"relative h-48 w-full overflow-hidden bg-gray-100\">\n                  {article.image_url ? (\n                    <img\n                      src={article.image_url}\n                      alt={article.title}\n                      className=\"w-full h-full object-cover object-center group-hover:scale-105 transition-transform duration-300\"\n                      loading=\"lazy\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-100 to-yellow-100\">\n                      <i className=\"ri-newspaper-line text-6xl text-blue-300\"></i>\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"p-6\">\n                  <div className=\"flex items-center space-x-3 mb-3\">\n                    <span className=\"px-3 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full\">\n                      {article.category}\n                    </span>\n                    <span className=\"text-sm text-gray-500\">\n                      {formatDate(article.created_at)}\n                    </span>\n                  </div>\n\n                  <h3 className=\"text-xl font-bold text-gray-900 mb-2 line-clamp-2\">\n                    {article.title}\n                  </h3>\n\n                  <p className=\"text-gray-600 mb-4 line-clamp-3 text-sm\">\n                    {article.content}\n                  </p>\n\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center text-blue-600 font-semibold text-sm\">\n                      Read More\n                      <i className=\"ri-arrow-right-line ml-2\"></i>\n                    </div>\n                    {article.views_count > 0 && (\n                      <div className=\"flex items-center text-gray-500 text-sm\">\n                        <i className=\"ri-eye-line mr-1\"></i>\n                        {article.views_count}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </Link>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["CampusNews","news","setNews","useState","loading","setLoading","selectedCategory","setSelectedCategory","searchQuery","setSearchQuery","categories","useEffect","fetchNews","data","error","supabase","filteredNews","useMemo","article","matchesSearch","matchesCategory","formatDate","dateString","jsxs","jsx","Navbar","e","category","Link"],"mappings":"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"}