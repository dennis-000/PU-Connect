import{j as e}from"./query-vendor-C4XoQ8tj.js";import{u as j,r as l}from"./react-vendor-BpnWQj_L.js";import{u as N,s as o,N as n}from"./index-BvprY0-k.js";import"./i18n-vendor-BT3zpxCT.js";import"./supabase-vendor-NSJvwn9b.js";function A(){const s=j(),{user:a,profile:x,refreshProfile:d}=N(),[t,c]=l.useState(null),[p,u]=l.useState(!0);l.useEffect(()=>{if(!a){s("/login");return}g();const r=o.channel("application-updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"seller_applications",filter:`user_id=eq.${a.id}`},i=>{c(i.new),i.new.status==="approved"&&d()}).subscribe();return()=>{r.unsubscribe()}},[a,s]);const g=async()=>{if(a)try{const{data:r,error:i}=await o.from("seller_applications").select("*").eq("user_id",a.id).single();if(i){if(i.code==="PGRST116"){s("/seller/apply");return}throw i}c(r),r.status==="approved"&&x?.role==="buyer"&&await h()}catch(r){console.error("Error fetching application:",r)}finally{u(!1)}},h=async()=>{if(a)try{const{error:r}=await o.from("profiles").update({role:"seller"}).eq("id",a.id);if(r)throw r;await d()}catch(r){console.error("Error updating user role:",r)}};if(p)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:[e.jsx(n,{}),e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-teal-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading your application..."})]})})]});if(!t)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:[e.jsx(n,{}),e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-20 text-center",children:e.jsxs("div",{className:"bg-white rounded-2xl p-12 shadow-sm border border-gray-100",children:[e.jsx("i",{className:"ri-file-search-line text-6xl text-gray-400 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Application Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You haven't submitted a seller application yet."}),e.jsx("button",{onClick:()=>s("/seller/apply"),className:"px-8 py-3 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-lg hover:from-teal-600 hover:to-teal-700 transition-all font-medium whitespace-nowrap cursor-pointer shadow-md",children:"Apply Now"})]})})]});const b=r=>{switch(r){case"approved":return"bg-gradient-to-br from-green-50 to-green-100 border-green-200";case"rejected":return"bg-gradient-to-br from-red-50 to-red-100 border-red-200";default:return"bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200"}},f=r=>{switch(r){case"approved":return"ri-checkbox-circle-line";case"rejected":return"ri-close-circle-line";default:return"ri-time-line"}},m=(r=>{switch(r){case"pending":return{title:"Under Review",message:"Your application is being reviewed by our admin team. We'll notify you once a decision is made.",icon:"ri-hourglass-line"};case"approved":return{title:"Congratulations!",message:"Your application has been approved! You can now start selling your products on our platform.",icon:"ri-trophy-line"};case"rejected":return{title:"Application Not Approved",message:"Unfortunately, your application was not approved at this time. Please review the reason below.",icon:"ri-error-warning-line"}}})(t.status);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:[e.jsx(n,{}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-teal-500 to-teal-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx("i",{className:"ri-store-3-line text-4xl text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Seller Application Status"}),e.jsx("p",{className:"text-gray-600",children:"Track your application progress"})]}),e.jsxs("div",{className:`${b(t.status)} border-2 rounded-2xl p-8 mb-8 shadow-sm`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${t.status==="approved"?"bg-green-500":t.status==="rejected"?"bg-red-500":"bg-yellow-500"}`,children:e.jsx("i",{className:`${f(t.status)} text-4xl text-white`})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h2",{className:`text-3xl font-bold ${t.status==="approved"?"text-green-800":t.status==="rejected"?"text-red-800":"text-yellow-800"}`,children:m.title}),e.jsxs("p",{className:`text-sm font-semibold ${t.status==="approved"?"text-green-700":t.status==="rejected"?"text-red-700":"text-yellow-700"}`,children:["Status: ",t.status.toUpperCase()]})]})]}),e.jsx("p",{className:`text-center ${t.status==="approved"?"text-green-800":t.status==="rejected"?"text-red-800":"text-yellow-800"}`,children:m.message})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 border border-blue-200",children:[e.jsxs("h3",{className:"text-sm font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"ri-store-line"}),"Business Name"]}),e.jsx("p",{className:"text-lg text-blue-800 font-medium",children:t.business_name})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 border border-purple-200",children:[e.jsxs("h3",{className:"text-sm font-semibold text-purple-900 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"ri-price-tag-3-line"}),"Category"]}),e.jsx("p",{className:"text-lg text-purple-800 font-medium",children:t.business_category})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-xl p-6 border border-teal-200",children:[e.jsxs("h3",{className:"text-sm font-semibold text-teal-900 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"ri-file-text-line"}),"Description"]}),e.jsx("p",{className:"text-teal-800 leading-relaxed",children:t.business_description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-6 border border-orange-200",children:[e.jsxs("h3",{className:"text-sm font-semibold text-orange-900 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"ri-phone-line"}),"Contact Phone"]}),e.jsx("p",{className:"text-orange-800 font-medium",children:t.contact_phone})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-6 border border-pink-200",children:[e.jsxs("h3",{className:"text-sm font-semibold text-pink-900 mb-2 flex items-center gap-2",children:[e.jsx("i",{className:"ri-mail-line"}),"Contact Email"]}),e.jsx("p",{className:"text-pink-800 font-medium",children:t.contact_email})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-700",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-calendar-line text-gray-600"}),e.jsx("strong",{children:"Submitted:"})," ",new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),t.updated_at!==t.created_at&&e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"ri-refresh-line text-gray-600"}),e.jsx("strong",{children:"Updated:"})," ",new Date(t.updated_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})}),t.rejection_reason&&e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 border-2 border-red-300 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-bold text-red-900 mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"ri-error-warning-line text-xl"}),"Rejection Reason"]}),e.jsx("p",{className:"text-red-800 leading-relaxed",children:t.rejection_reason})]})]}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4",children:[e.jsxs("button",{onClick:()=>s("/"),className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all font-medium whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-home-line mr-2"}),"Back to Home"]}),t.status==="approved"&&e.jsxs("button",{onClick:()=>s("/seller/dashboard"),className:"flex-1 px-6 py-3 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-lg hover:from-teal-600 hover:to-teal-700 transition-all font-medium whitespace-nowrap cursor-pointer shadow-md",children:[e.jsx("i",{className:"ri-dashboard-line mr-2"}),"Go to Dashboard"]}),t.status==="rejected"&&e.jsxs("button",{onClick:()=>s("/seller/apply"),className:"flex-1 px-6 py-3 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-lg hover:from-teal-600 hover:to-teal-700 transition-all font-medium whitespace-nowrap cursor-pointer shadow-md",children:[e.jsx("i",{className:"ri-file-add-line mr-2"}),"Apply Again"]})]})]}),t.status==="pending"&&e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-xl p-6 text-center",children:[e.jsx("i",{className:"ri-information-line text-3xl text-blue-600 mb-2"}),e.jsx("p",{className:"text-blue-800 font-medium",children:"Your application is being reviewed. This usually takes 1-2 business days."}),e.jsx("p",{className:"text-sm text-blue-700 mt-2",children:"You'll receive a notification once your application is processed."})]})]})]})}export{A as default};
//# sourceMappingURL=ApplicationStatus-DqmuKaTD.js.map
