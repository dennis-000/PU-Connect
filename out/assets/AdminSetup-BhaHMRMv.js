import{j as e}from"./query-vendor-C4XoQ8tj.js";import{u as b,r as n}from"./react-vendor-BpnWQj_L.js";import{u as f,N as j,s as x}from"./index-BvprY0-k.js";import"./i18n-vendor-BT3zpxCT.js";import"./supabase-vendor-NSJvwn9b.js";function A(){const{user:r,profile:s,refreshProfile:u}=f(),d=b(),[o,m]=n.useState(!1),[i,a]=n.useState(""),[t,c]=n.useState("admin"),p=async()=>{if(!r){a("You must be logged in");return}m(!0),a("");try{const{error:l}=await x.from("profiles").update({role:t}).eq("id",r.id);if(l)throw l;t==="super_admin"&&await x.from("system_admins").insert({user_id:r.id,granted_by:r.id,is_active:!0}),await u(),a(`Success! You are now ${t==="super_admin"?"a Super Admin":"an Admin"}. Redirecting...`),setTimeout(()=>{d("/admin/dashboard")},2e3)}catch(l){a("Error: "+l.message)}finally{m(!1)}},h=s?.role==="admin"||s?.role==="super_admin";return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:[e.jsx(j,{}),e.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 shadow-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-900 to-slate-700 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-shield-user-line text-white text-3xl"})}),e.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Admin Setup"}),e.jsx("p",{className:"text-slate-600",children:"Grant yourself administrative access to manage the platform"})]}),s&&e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl p-6 mb-6 border border-slate-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Your Current Profile"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Name:"}),e.jsx("span",{className:"font-medium text-slate-900",children:s.full_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Email:"}),e.jsx("span",{className:"font-medium text-slate-900",children:s.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Current Role:"}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${s.role==="super_admin"?"bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700":s.role==="admin"?"bg-purple-100 text-purple-700":s.role==="seller"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:s.role==="super_admin"?"Super Admin":s.role.charAt(0).toUpperCase()+s.role.slice(1)})]})]})]}),h?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-100 to-green-200 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-check-line text-green-600 text-3xl"})}),e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:["You're Already ",s?.role==="super_admin"?"a Super Admin":"an Admin","!"]}),e.jsxs("p",{className:"text-slate-600 mb-6",children:["You have ",s?.role==="super_admin"?"full system access with elevated privileges":"access to admin features"]}),e.jsx("button",{onClick:()=>d("/admin/dashboard"),className:"px-6 py-3 bg-slate-900 text-white text-sm font-medium rounded-xl hover:bg-slate-800 transition-colors whitespace-nowrap cursor-pointer",children:"Go to Admin Dashboard"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-3",children:"Select Admin Role"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>c("admin"),className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${t==="admin"?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300"}`,children:[e.jsx("i",{className:"ri-shield-line text-2xl text-purple-600 mb-2"}),e.jsx("h4",{className:"font-semibold text-slate-900 text-sm",children:"Admin"}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Standard admin access"})]}),e.jsxs("button",{onClick:()=>c("super_admin"),className:`p-4 rounded-xl border-2 transition-all cursor-pointer ${t==="super_admin"?"border-purple-500 bg-gradient-to-br from-purple-50 to-pink-50":"border-slate-200 hover:border-slate-300"}`,children:[e.jsx("i",{className:"ri-shield-star-line text-2xl text-purple-600 mb-2"}),e.jsx("h4",{className:"font-semibold text-slate-900 text-sm",children:"Super Admin"}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Full system control"})]})]})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"ri-information-line text-amber-600 text-xl flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-amber-900 mb-1",children:"Important"}),e.jsx("p",{className:"text-sm text-amber-800",children:t==="super_admin"?"Super Admin has complete system control and can manage other admins. Only grant this to platform owners.":"This will grant you administrator privileges. Only do this if you are authorized."})]})]})}),i&&e.jsx("div",{className:`p-4 rounded-xl mb-6 ${i.includes("Success")?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:e.jsx("p",{className:"text-sm",children:i})}),e.jsx("button",{onClick:p,disabled:o,className:"w-full px-6 py-3 bg-gradient-to-r from-slate-900 to-slate-700 text-white text-sm font-medium rounded-xl hover:from-slate-800 hover:to-slate-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer",children:o?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-shield-check-line mr-2"}),"Grant ",t==="super_admin"?"Super Admin":"Admin"," Access"]})})]})]})})]})}export{A as default};
//# sourceMappingURL=AdminSetup-BhaHMRMv.js.map
