{"version":3,"file":"RoleManagement-B8LWz-H5.js","sources":["../../src/pages/admin/RoleManagement.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { supabase } from '../../lib/supabase';\nimport Navbar from '../../components/feature/Navbar';\n\ntype User = {\n  id: string;\n  email: string;\n  full_name: string;\n  role: string;\n  created_at: string;\n};\n\nexport default function RoleManagement() {\n  const navigate = useNavigate();\n  const { profile, loading: authLoading } = useAuth();\n  const [users, setUsers] = useState<User[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [activeTab, setActiveTab] = useState<'publishers' | 'admins'>('publishers');\n  const [showAddPublisherModal, setShowAddPublisherModal] = useState(false);\n  const [showAddAdminModal, setShowAddAdminModal] = useState(false);\n  const [newPublisherEmail, setNewPublisherEmail] = useState('');\n  const [newAdminEmail, setNewAdminEmail] = useState('');\n\n  useEffect(() => {\n    if (!authLoading && profile?.role !== 'admin') {\n      navigate('/');\n    }\n  }, [profile, authLoading, navigate]);\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('id, email, full_name, role, created_at')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n      setUsers(data || []);\n    } catch (error) {\n      console.error('Error fetching users:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddNewsPublisher = async () => {\n    if (!newPublisherEmail.trim()) {\n      alert('Please enter an email address');\n      return;\n    }\n\n    try {\n      const { data: user, error: findError } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('email', newPublisherEmail.trim())\n        .single();\n\n      if (findError || !user) {\n        alert('User not found with this email address');\n        return;\n      }\n\n      if (user.role === 'news_publisher') {\n        alert('This user is already a News Publisher');\n        return;\n      }\n\n      const { error: updateError } = await supabase\n        .from('profiles')\n        .update({ role: 'news_publisher' })\n        .eq('id', user.id);\n\n      if (updateError) throw updateError;\n\n      await fetchUsers();\n      setShowAddPublisherModal(false);\n      setNewPublisherEmail('');\n      alert('News Publisher role assigned successfully!');\n    } catch (error) {\n      console.error('Error adding news publisher:', error);\n      alert('Failed to assign News Publisher role');\n    }\n  };\n\n  const handleAddAdmin = async () => {\n    if (!newAdminEmail.trim()) {\n      alert('Please enter an email address');\n      return;\n    }\n\n    try {\n      const { data: user, error: findError } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('email', newAdminEmail.trim())\n        .single();\n\n      if (findError || !user) {\n        alert('User not found with this email address');\n        return;\n      }\n\n      if (user.role === 'admin') {\n        alert('This user is already an Administrator');\n        return;\n      }\n\n      const confirmed = confirm(\n        `Are you sure you want to grant Administrator privileges to ${user.full_name}? This will give them full access to the admin dashboard.`\n      );\n\n      if (!confirmed) return;\n\n      const { error: updateError } = await supabase\n        .from('profiles')\n        .update({ role: 'admin' })\n        .eq('id', user.id);\n\n      if (updateError) throw updateError;\n\n      await fetchUsers();\n      setShowAddAdminModal(false);\n      setNewAdminEmail('');\n      alert('Administrator role assigned successfully!');\n    } catch (error) {\n      console.error('Error adding admin:', error);\n      alert('Failed to assign Administrator role');\n    }\n  };\n\n  const handleRemoveRole = async (userId: string, userName: string, currentRole: string) => {\n    const roleDisplay = currentRole === 'admin' ? 'Administrator' : 'News Publisher';\n    \n    if (!confirm(`Remove ${roleDisplay} role from ${userName}? They will become a regular buyer.`)) {\n      return;\n    }\n\n    try {\n      const { error } = await supabase\n        .from('profiles')\n        .update({ role: 'buyer' })\n        .eq('id', userId);\n\n      if (error) throw error;\n\n      await fetchUsers();\n      alert('Role removed successfully');\n    } catch (error) {\n      console.error('Error removing role:', error);\n      alert('Failed to remove role');\n    }\n  };\n\n  const newsPublishers = users.filter(u => u.role === 'news_publisher');\n  const admins = users.filter(u => u.role === 'admin');\n\n  const filteredPublishers = newsPublishers.filter(user =>\n    user.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    user.full_name.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const filteredAdmins = admins.filter(user =>\n    user.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    user.full_name.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  if (authLoading || loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <i className=\"ri-loader-4-line text-4xl text-sky-600 animate-spin\"></i>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Navbar />\n      \n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Role Management</h1>\n            <p className=\"mt-2 text-gray-600\">Manage administrators and special permissions</p>\n          </div>\n          <div className=\"flex gap-3\">\n            <button\n              onClick={() => setShowAddPublisherModal(true)}\n              className=\"flex items-center gap-2 px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors whitespace-nowrap cursor-pointer\"\n            >\n              <i className=\"ri-newspaper-line\"></i>\n              Add Publisher\n            </button>\n            <button\n              onClick={() => setShowAddAdminModal(true)}\n              className=\"flex items-center gap-2 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors whitespace-nowrap cursor-pointer\"\n            >\n              <i className=\"ri-shield-user-line\"></i>\n              Add Admin\n            </button>\n          </div>\n        </div>\n\n        {/* Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n          <div className=\"bg-white rounded-xl shadow-sm p-6 border-2 border-amber-200\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Administrators</p>\n                <p className=\"text-2xl font-bold text-gray-900 mt-1\">{admins.length}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-shield-user-line text-2xl text-amber-600\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl shadow-sm p-6 border-2 border-sky-200\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">News Publishers</p>\n                <p className=\"text-2xl font-bold text-gray-900 mt-1\">{newsPublishers.length}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-sky-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-newspaper-line text-2xl text-sky-600\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl shadow-sm p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Total Users</p>\n                <p className=\"text-2xl font-bold text-gray-900 mt-1\">{users.length}</p>\n              </div>\n              <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-user-line text-2xl text-green-600\"></i>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Tab Navigation */}\n        <div className=\"bg-white rounded-xl border border-gray-200 p-2 mb-6\">\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => setActiveTab('admins')}\n              className={`flex-1 px-4 py-2 text-sm font-medium rounded-lg whitespace-nowrap cursor-pointer transition-colors ${\n                activeTab === 'admins' \n                  ? 'bg-amber-500 text-white' \n                  : 'text-gray-600 hover:bg-gray-100'\n              }`}\n            >\n              <i className=\"ri-shield-user-line mr-2\"></i>\n              Administrators ({admins.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('publishers')}\n              className={`flex-1 px-4 py-2 text-sm font-medium rounded-lg whitespace-nowrap cursor-pointer transition-colors ${\n                activeTab === 'publishers' \n                  ? 'bg-sky-600 text-white' \n                  : 'text-gray-600 hover:bg-gray-100'\n              }`}\n            >\n              <i className=\"ri-newspaper-line mr-2\"></i>\n              News Publishers ({newsPublishers.length})\n            </button>\n          </div>\n        </div>\n\n        {/* Search */}\n        <div className=\"bg-white rounded-xl shadow-sm p-6 mb-6\">\n          <div className=\"relative\">\n            <i className=\"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"></i>\n            <input\n              type=\"text\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              placeholder={`Search ${activeTab === 'admins' ? 'administrators' : 'news publishers'}...`}\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm\"\n            />\n          </div>\n        </div>\n\n        {/* Administrators Tab */}\n        {activeTab === 'admins' && (\n          <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n            <div className=\"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-amber-50 to-white\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">Administrators</h2>\n              <p className=\"text-sm text-gray-600 mt-1\">Users with full platform management access</p>\n            </div>\n\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-gray-50 border-b border-gray-200\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      User\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Role\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Added On\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {filteredAdmins.map((user) => (\n                    <tr key={user.id} className=\"hover:bg-gray-50\">\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"flex items-center\">\n                          <div className=\"w-10 h-10 bg-gradient-to-br from-amber-400 to-amber-600 rounded-full flex items-center justify-center\">\n                            <span className=\"text-white font-medium text-sm\">\n                              {user.full_name.charAt(0).toUpperCase()}\n                            </span>\n                          </div>\n                          <div className=\"ml-4\">\n                            <div className=\"text-sm font-medium text-gray-900\">{user.full_name}</div>\n                            <div className=\"text-sm text-gray-500\">{user.email}</div>\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <span className=\"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-amber-100 text-amber-800\">\n                          <i className=\"ri-shield-user-line mr-1\"></i>\n                          Administrator\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                        {new Date(user.created_at).toLocaleDateString()}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                        {user.id !== profile?.id ? (\n                          <button\n                            onClick={() => handleRemoveRole(user.id, user.full_name, user.role)}\n                            className=\"text-red-600 hover:text-red-800 font-medium cursor-pointer\"\n                          >\n                            Remove Role\n                          </button>\n                        ) : (\n                          <span className=\"text-gray-400 text-xs\">Current User</span>\n                        )}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n\n            {filteredAdmins.length === 0 && (\n              <div className=\"text-center py-12\">\n                <i className=\"ri-shield-user-line text-5xl text-gray-300\"></i>\n                <p className=\"mt-4 text-gray-500\">No administrators found</p>\n                <button\n                  onClick={() => setShowAddAdminModal(true)}\n                  className=\"mt-4 text-amber-600 hover:text-amber-700 font-medium cursor-pointer\"\n                >\n                  Add your first administrator\n                </button>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* News Publishers Tab */}\n        {activeTab === 'publishers' && (\n          <div className=\"bg-white rounded-xl shadow-sm overflow-hidden\">\n            <div className=\"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-sky-50 to-white\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">News Publishers</h2>\n              <p className=\"text-sm text-gray-600 mt-1\">Users with permission to publish campus news</p>\n            </div>\n\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead className=\"bg-gray-50 border-b border-gray-200\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      User\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Role\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Added On\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {filteredPublishers.map((user) => (\n                    <tr key={user.id} className=\"hover:bg-gray-50\">\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"flex items-center\">\n                          <div className=\"w-10 h-10 bg-gradient-to-br from-sky-500 to-sky-600 rounded-full flex items-center justify-center\">\n                            <span className=\"text-white font-medium text-sm\">\n                              {user.full_name.charAt(0).toUpperCase()}\n                            </span>\n                          </div>\n                          <div className=\"ml-4\">\n                            <div className=\"text-sm font-medium text-gray-900\">{user.full_name}</div>\n                            <div className=\"text-sm text-gray-500\">{user.email}</div>\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <span className=\"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-sky-100 text-sky-800\">\n                          <i className=\"ri-newspaper-line mr-1\"></i>\n                          News Publisher\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                        {new Date(user.created_at).toLocaleDateString()}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                        <button\n                          onClick={() => handleRemoveRole(user.id, user.full_name, user.role)}\n                          className=\"text-red-600 hover:text-red-800 font-medium cursor-pointer\"\n                        >\n                          Remove Role\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n\n            {filteredPublishers.length === 0 && (\n              <div className=\"text-center py-12\">\n                <i className=\"ri-newspaper-line text-5xl text-gray-300\"></i>\n                <p className=\"mt-4 text-gray-500\">No news publishers found</p>\n                <button\n                  onClick={() => setShowAddPublisherModal(true)}\n                  className=\"mt-4 text-sky-600 hover:text-sky-700 font-medium cursor-pointer\"\n                >\n                  Add your first news publisher\n                </button>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Add News Publisher Modal */}\n      {showAddPublisherModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl shadow-xl max-w-md w-full p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-900\">Add News Publisher</h3>\n              <button\n                onClick={() => {\n                  setShowAddPublisherModal(false);\n                  setNewPublisherEmail('');\n                }}\n                className=\"text-gray-400 hover:text-gray-600 cursor-pointer\"\n              >\n                <i className=\"ri-close-line text-2xl\"></i>\n              </button>\n            </div>\n\n            <div className=\"mb-6\">\n              <p className=\"text-sm text-gray-600 mb-4\">\n                Enter the email address of the user you want to assign the News Publisher role to.\n              </p>\n              \n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                User Email\n              </label>\n              <input\n                type=\"email\"\n                value={newPublisherEmail}\n                onChange={(e) => setNewPublisherEmail(e.target.value)}\n                placeholder=\"user@example.com\"\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm\"\n              />\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => {\n                  setShowAddPublisherModal(false);\n                  setNewPublisherEmail('');\n                }}\n                className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap cursor-pointer\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleAddNewsPublisher}\n                className=\"flex-1 px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors whitespace-nowrap cursor-pointer\"\n              >\n                Add Publisher\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Add Admin Modal */}\n      {showAddAdminModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl shadow-xl max-w-md w-full p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h3 className=\"text-xl font-bold text-gray-900\">Add Administrator</h3>\n              <button\n                onClick={() => {\n                  setShowAddAdminModal(false);\n                  setNewAdminEmail('');\n                }}\n                className=\"text-gray-400 hover:text-gray-600 cursor-pointer\"\n              >\n                <i className=\"ri-close-line text-2xl\"></i>\n              </button>\n            </div>\n\n            <div className=\"mb-6\">\n              <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4\">\n                <div className=\"flex items-start gap-3\">\n                  <i className=\"ri-alert-line text-amber-600 text-xl flex-shrink-0 mt-0.5\"></i>\n                  <div>\n                    <p className=\"text-sm font-medium text-amber-900 mb-1\">Important</p>\n                    <p className=\"text-xs text-amber-800\">\n                      Administrators have full access to manage users, products, news, subscriptions, and all platform settings. Only grant this role to trusted users.\n                    </p>\n                  </div>\n                </div>\n              </div>\n              \n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                User Email\n              </label>\n              <input\n                type=\"email\"\n                value={newAdminEmail}\n                onChange={(e) => setNewAdminEmail(e.target.value)}\n                placeholder=\"user@example.com\"\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent text-sm\"\n              />\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => {\n                  setShowAddAdminModal(false);\n                  setNewAdminEmail('');\n                }}\n                className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors whitespace-nowrap cursor-pointer\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleAddAdmin}\n                className=\"flex-1 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors whitespace-nowrap cursor-pointer\"\n              >\n                Add Admin\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["RoleManagement","navigate","useNavigate","profile","authLoading","useAuth","users","setUsers","useState","loading","setLoading","searchTerm","setSearchTerm","activeTab","setActiveTab","showAddPublisherModal","setShowAddPublisherModal","showAddAdminModal","setShowAddAdminModal","newPublisherEmail","setNewPublisherEmail","newAdminEmail","setNewAdminEmail","useEffect","fetchUsers","data","error","supabase","handleAddNewsPublisher","user","findError","updateError","handleAddAdmin","handleRemoveRole","userId","userName","currentRole","newsPublishers","u","admins","filteredPublishers","filteredAdmins","jsxs","jsx","Navbar","e"],"mappings":"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"}