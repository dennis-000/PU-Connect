const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/arkesel-Dq7aY5jr.js","assets/index-4BAF1yr7.js","assets/query-vendor-Cpskl8RO.js","assets/react-vendor-Bsfkyusf.js","assets/i18n-vendor-CQdsz7qV.js","assets/supabase-vendor-C3liu3n-.js","assets/index-D1xfiXYm.css"])))=>i.map(i=>d[i]);
import{_ as W}from"./supabase-vendor-C3liu3n-.js";import{j as e}from"./query-vendor-Cpskl8RO.js";import{u as Z,r as o}from"./react-vendor-Bsfkyusf.js";import{u as ee,s as c,N as te}from"./index-4BAF1yr7.js";import{a as se}from"./useConversations-6cEjvFHm.js";import"./i18n-vendor-CQdsz7qV.js";function ce(){const v=Z(),{mutate:L}=se(),D=t=>{L({otherUserId:t},{onSuccess:s=>{v(`/messages?conversationId=${s}`)},onError:()=>{alert("Failed to start conversation")}})},{profile:k,loading:F}=ee(),[x,m]=o.useState([]),[ae,R]=o.useState(!0),[w,T]=o.useState(""),[S,I]=o.useState("all"),[M,f]=o.useState(null),[r,A]=o.useState(null),[O,g]=o.useState(!1),[q,N]=o.useState(!1),[n,u]=o.useState({email:"",password:"",fullName:"",department:"",faculty:"",phone:"",role:"buyer"}),[l,b]=o.useState({full_name:"",role:"",department:"",faculty:"",student_id:"",phone:"",email:"",created_at:"",last_sign_in_at:""}),[y,p]=o.useState(!1),[X,_]=o.useState(!1);o.useEffect(()=>{!F&&k?.role!=="admin"&&k?.role!=="super_admin"&&v("/marketplace")},[k,F,v]),o.useEffect(()=>{h();const t=c.channel("public:profiles").on("postgres_changes",{event:"*",schema:"public",table:"profiles"},()=>{h()}).subscribe();return()=>{c.removeChannel(t)}},[]);const B=async t=>{const s=localStorage.getItem("sys_admin_bypass")==="true",a=localStorage.getItem("sys_admin_secret");if(s&&a){const{error:i}=await c.rpc("admin_hide_all_products",{target_user_id:t,secret_key:a});return{error:i}}return await c.from("products").update({is_active:!1}).eq("seller_id",t)},h=async()=>{try{const{data:t,error:s}=await c.from("profiles").select("*").order("created_at",{ascending:!1}).limit(100);if(s)throw s;m(t||[])}catch(t){console.error("Error fetching users:",t)}finally{R(!1)}},U=async(t,s)=>{const a=localStorage.getItem("sys_admin_bypass")==="true",i=localStorage.getItem("sys_admin_secret");if(a&&i){console.log("Using System Admin RPC for update");const{data:C,error:j}=await c.rpc("admin_update_profile",{target_id:t,new_data:s,secret_key:i});return{error:j}}else return await c.from("profiles").update(s).eq("id",t)},H=async(t,s)=>{m(x.map(a=>a.id===t?{...a,is_active:!s}:a)),r?.id===t&&A(a=>a?{...a,is_active:!s}:null);try{const{error:a}=await U(t,{is_active:!s});if(a)throw m(x.map(i=>i.id===t?{...i,is_active:s}:i)),a;await h(),f(null),alert(`User ${s?"suspended":"activated"} successfully`)}catch(a){console.error("Error updating user status:",a),alert(`Failed to update user status: ${a.message}`)}},$=async t=>{if(t===k?.id){alert("You cannot delete your own account.");return}if(!confirm("Are you sure you want to PERMANENTLY delete this user? This will remove their profile AND their authentication account, allowing them to sign up again if needed. This action cannot be undone."))return;const s=[...x];m(x.filter(a=>a.id!==t));try{const{data:a,error:i}=await c.functions.invoke("delete-user",{body:{userId:t}});if(i||!a?.success)throw m(s),i||new Error(a?.error||"Failed to delete user");f(null),alert("User account and profile permanently deleted"),h()}catch(a){console.error("Error deleting user:",a),alert(`Failed to delete user: ${a.message}`)}},J=async t=>{t.preventDefault(),p(!0);try{const{data:s,error:a}=await c.functions.invoke("register-user",{body:n});if(a||!s?.success)throw new Error(a?.message||s?.error||"Failed to create account");if(n.role!=="buyer"){const{error:i}=await U(s.userId,{role:n.role});i&&console.error("Failed to update role:",i)}alert("User created successfully and auto-confirmed!"),N(!1),u({email:"",password:"",fullName:"",department:"",faculty:"",phone:"",role:"buyer"}),h()}catch(s){alert(s.message||"Failed to create user")}finally{p(!1)}},z=t=>{A(t),b({full_name:t.full_name,role:t.role,department:t.department||"",faculty:t.faculty||"",student_id:t.student_id||"",phone:t.phone||"",email:t.email,created_at:t.created_at,last_sign_in_at:t.last_sign_in_at||""}),g(!0),f(null)},V=async t=>{if(window.confirm("This will deactivate all products listed by this user. Continue?")){p(!0);try{const{error:s}=await B(t);if(s)throw s;_(!0),setTimeout(()=>_(!1),3e3),alert("All products for this user have been hidden")}catch(s){alert("Failed to hide products: "+s.message)}finally{p(!1)}}},Y=async()=>{if(r){p(!0);try{m(x.map(s=>s.id===r.id?{...s,full_name:l.full_name,role:l.role,department:l.department,faculty:l.faculty,student_id:l.student_id,phone:l.phone}:s));const{error:t}=await U(r.id,{full_name:l.full_name,role:l.role,department:l.department,faculty:l.faculty,student_id:l.student_id,phone:l.phone});if(t)throw t;if(r.role!==l.role&&l.phone)try{const{sendSMS:s}=await W(async()=>{const{sendSMS:C}=await import("./arkesel-Dq7aY5jr.js");return{sendSMS:C}},__vite__mapDeps([0,1,2,3,4,5,6])),i=`Hi ${r.full_name.split(" ")[0]}, your role on Campus Connect has been updated to "${l.role.replace("_"," ")}".`;await s([l.phone],i)}catch(s){console.error("Failed to send role update SMS:",s)}await h(),g(!1),A(null),_(!0),setTimeout(()=>_(!1),3e3)}catch(t){console.error("Error updating profile:",t),alert("Failed to update user profile")}finally{p(!1)}}},[P,E]=o.useState(!1),G=t=>{let s=x;if(t&&(s=x.filter(d=>d.role===t)),s.length===0){alert("No users found for this category");return}const a=[["Email","Full Name","Department","Faculty","Role","Status","Joined"],...s.map(d=>[`"${d.email}"`,`"${d.full_name}"`,`"${d.department||""}"`,`"${d.faculty||""}"`,d.role,d.is_active?"Active":"Suspended",new Date(d.created_at).toLocaleDateString()])].map(d=>d.join(",")).join(`
`),i=new Blob([a],{type:"text/csv"}),C=window.URL.createObjectURL(i),j=document.createElement("a");j.href=C,j.download=`pentvars-users-${t||"all"}.csv`,j.click(),E(!1)},K=x.filter(t=>{const s=t.email.toLowerCase().includes(w.toLowerCase())||t.full_name.toLowerCase().includes(w.toLowerCase())||t.student_id&&t.student_id.toLowerCase().includes(w.toLowerCase()),a=S==="all"||t.role===S;return s&&a}),Q=t=>t.is_active&&t.id.charCodeAt(0)%3===0;return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 transition-colors duration-300 pb-20 font-sans",children:[e.jsx(te,{}),e.jsxs("div",{className:"pt-28 pb-12 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-[10px] font-bold uppercase tracking-widest border border-blue-200 dark:border-blue-800",children:"System Admin"})}),e.jsx("h1",{className:"text-3xl md:text-5xl font-black text-slate-900 dark:text-white tracking-tight mb-2",children:"Users"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Manage platform accounts, permissions, and view user details."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>v("/admin/dashboard"),className:"px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700 rounded-xl text-xs font-bold uppercase tracking-wide hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors shadow-sm cursor-pointer",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Dashboard"]}),e.jsxs("button",{onClick:()=>N(!0),className:"px-5 py-2.5 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl text-xs font-bold uppercase tracking-wide hover:shadow-xl transition-all cursor-pointer flex items-center gap-2",children:[e.jsx("i",{className:"ri-user-add-line text-lg"}),"Add User"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>E(!P),className:"px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700 rounded-xl text-xs font-bold uppercase tracking-wide hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors shadow-sm cursor-pointer flex items-center gap-2",children:[e.jsx("i",{className:"ri-download-line text-lg"}),"Export"]}),P&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>E(!1)}),e.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 py-1 z-20 overflow-hidden",children:["all","buyer","seller","news_publisher","publisher_seller","admin"].map(t=>e.jsxs("button",{onClick:()=>G(t==="all"?void 0:t),className:"w-full text-left px-4 py-3 text-xs font-bold text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 capitalize",children:[t.replace("_"," ")," Users"]},t))})]})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 mb-8 border border-slate-100 dark:border-slate-700 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-search-line absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",value:w,onChange:t=>T(t.target.value),placeholder:"Search users by name, email, or ID...",className:"w-full pl-11 pr-4 py-3 bg-slate-50 dark:bg-slate-900 border-none rounded-xl focus:ring-2 focus:ring-blue-500/20 font-medium text-sm text-slate-900 dark:text-white outline-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:S,onChange:t=>I(t.target.value),className:"w-full pl-4 pr-10 py-3 bg-slate-50 dark:bg-slate-900 border-none rounded-xl focus:ring-2 focus:ring-blue-500/20 font-medium text-sm text-slate-900 dark:text-white outline-none appearance-none cursor-pointer",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"buyer",children:"Buyers"}),e.jsx("option",{value:"seller",children:"Sellers"}),e.jsx("option",{value:"news_publisher",children:"News Publishers"}),e.jsx("option",{value:"publisher_seller",children:"Publisher & Seller"}),e.jsx("option",{value:"admin",children:"Admins"})]}),e.jsx("i",{className:"ri-filter-3-line absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-[2rem] border border-slate-100 dark:border-slate-700 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50/50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-8 py-5 text-left text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-relaxed",children:"User Profile"}),e.jsx("th",{className:"px-8 py-5 text-left text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-relaxed",children:"Status"}),e.jsx("th",{className:"px-8 py-5 text-left text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-relaxed",children:"Role"}),e.jsx("th",{className:"px-8 py-5 text-right text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-relaxed",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:K.map(t=>{const s=Q(t);return e.jsxs("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-slate-700/30 transition-colors",children:[e.jsx("td",{className:"px-8 py-4",children:e.jsxs("div",{className:"flex items-center gap-4 cursor-pointer",onClick:()=>z(t),children:[e.jsxs("div",{className:"relative",children:[t.avatar_url?e.jsx("img",{src:getOptimizedImageUrl(t.avatar_url,80,80),alt:"",className:"w-10 h-10 rounded-xl object-cover border border-slate-100 dark:border-slate-700"}):e.jsxs("div",{className:"w-10 h-10 bg-slate-100 dark:bg-slate-700 rounded-xl flex items-center justify-center font-bold text-slate-500 dark:text-slate-400 relative overflow-hidden",children:[e.jsx("i",{className:"ri-user-3-fill absolute text-3xl opacity-10 translate-y-1"}),e.jsx("span",{className:"relative z-10",children:t.full_name.charAt(0).toUpperCase()})]}),s&&e.jsx("span",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-emerald-500 border-2 border-white dark:border-slate-800 rounded-full"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm text-slate-900 dark:text-white",children:t.full_name}),e.jsx("div",{className:"text-xs text-slate-500",children:t.email})]})]})}),e.jsx("td",{className:"px-8 py-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide w-fit ${t.is_active?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t.is_active?"bg-emerald-500":"bg-rose-500"}`}),t.is_active?"Active":"Suspended"]}),e.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:s?"Online Now":"Offline"})]})}),e.jsx("td",{className:"px-8 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded text-[10px] font-bold uppercase tracking-wider border border-slate-200 dark:border-slate-600",children:t.role})}),e.jsxs("td",{className:"px-8 py-4 text-right",children:[e.jsx("button",{onClick:()=>f(M===t.id?null:t.id),className:"p-2 text-slate-400 hover:text-blue-600 transition-colors",children:e.jsx("i",{className:"ri-more-2-fill text-xl"})}),M===t.id&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>f(null)}),e.jsxs("div",{className:"absolute right-8 mt-2 w-48 bg-white dark:bg-slate-800 shadow-xl rounded-xl z-20 border border-slate-100 dark:border-slate-700 py-1 text-left",children:[e.jsx("button",{onClick:()=>D(t.id),className:"block w-full text-left px-4 py-2 text-xs font-bold text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20",children:"Message User"}),e.jsx("button",{onClick:()=>z(t),className:"block w-full text-left px-4 py-2 text-xs font-bold text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700",children:"View Details / Edit"}),e.jsx("button",{onClick:()=>$(t.id),className:"block w-full text-left px-4 py-2 text-xs font-bold text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/20",children:"Delete User"})]})]})]})]},t.id)})})]})})})]}),O&&r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-2xl rounded-3xl shadow-2xl max-h-[90vh] overflow-y-auto outline-none border border-slate-100 dark:border-slate-800 flex flex-col",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-slate-100 dark:border-slate-800 flex items-center justify-between sticky top-0 bg-white/95 dark:bg-slate-900/95 backdrop-blur z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:"User Details"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"View and manage user profile information"})]}),e.jsx("button",{onClick:()=>g(!1),className:"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500 hover:bg-slate-200 transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-950 rounded-2xl p-6 border border-slate-100 dark:border-slate-800 flex flex-col sm:flex-row gap-6 items-center sm:items-start",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-white dark:bg-slate-800 shadow-sm flex items-center justify-center text-3xl font-bold text-slate-300 uppercase shrink-0 relative overflow-hidden",children:r.avatar_url?e.jsx("img",{src:getOptimizedImageUrl(r.avatar_url,160,160),alt:"",className:"w-full h-full object-cover"}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-user-3-fill absolute text-[8rem] opacity-5 translate-y-4"}),e.jsx("span",{className:"relative z-10 text-slate-400",children:l.full_name.charAt(0)})]})}),e.jsx("div",{className:"flex-1 text-center sm:text-left space-y-2 w-full",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400",children:"User ID"}),e.jsx("p",{className:"text-xs font-mono text-slate-600 dark:text-slate-300 truncate w-full",title:r.id,children:r.id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Email Address"}),e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white truncate",children:l.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Joined On"}),e.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:new Date(l.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide ${r.is_active?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}`,children:r.is_active?"Active":"Suspended"})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h4",{className:"text-sm font-black text-slate-900 dark:text-white uppercase tracking-widest border-b border-slate-100 dark:border-slate-800 pb-2",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wide text-slate-500 mb-2 block",children:"Full Name"}),e.jsx("input",{type:"text",value:l.full_name,onChange:t=>b({...l,full_name:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-blue-500/50 outline-none font-medium"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wide text-slate-500 mb-2 block",children:"Phone Number"}),e.jsx("input",{type:"tel",value:l.phone,onChange:t=>b({...l,phone:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-blue-500/50 outline-none font-medium"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wide text-slate-500 mb-2 block",children:"Student ID"}),e.jsx("input",{type:"text",value:l.student_id,onChange:t=>b({...l,student_id:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-blue-500/50 outline-none font-medium"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wide text-slate-500 mb-2 block",children:"Department"}),e.jsx("input",{type:"text",value:l.department,onChange:t=>b({...l,department:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-blue-500/50 outline-none font-medium"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-black text-slate-900 dark:text-white uppercase tracking-widest border-b border-slate-100 dark:border-slate-800 pb-2 mb-4",children:"Role Assignment"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:["buyer","seller","admin","news_publisher"].map(t=>e.jsxs("div",{onClick:()=>b({...l,role:t}),className:`cursor-pointer px-4 py-3 rounded-xl border-2 transition-all flex flex-col items-center justify-center gap-2 text-center ${l.role===t?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-slate-100 dark:border-slate-800 hover:border-slate-300"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${l.role===t?"border-blue-500":"border-slate-300"}`,children:l.role===t&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"})}),e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-200 capitalize",children:t.replace("_"," ")})]},t))})]}),e.jsxs("div",{className:"space-y-6 pt-6 border-t border-slate-100 dark:border-slate-800",children:[e.jsxs("h4",{className:"text-sm font-black text-slate-900 dark:text-white uppercase tracking-widest flex items-center gap-2",children:[e.jsx("i",{className:"ri-shield-flash-line text-rose-500"}),"Account Management"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>D(r.id),className:"flex items-center justify-center gap-3 p-5 rounded-2xl border-2 border-blue-100 bg-blue-50 text-blue-700 hover:bg-blue-100 dark:bg-blue-900/10 dark:border-blue-900/20 transition-all font-bold text-xs uppercase tracking-widest active:scale-95",children:[e.jsx("i",{className:"ri-chat-3-line text-lg"}),"Send Message"]}),e.jsxs("button",{onClick:()=>H(r.id,r.is_active),className:`flex items-center justify-center gap-3 p-5 rounded-2xl border-2 transition-all font-bold text-xs uppercase tracking-widest active:scale-95 ${r.is_active?"border-amber-100 bg-amber-50 text-amber-700 hover:bg-amber-100 dark:bg-amber-900/10 dark:border-amber-900/20":"border-emerald-100 bg-emerald-50 text-emerald-700 hover:bg-emerald-100 dark:bg-emerald-900/10 dark:border-emerald-900/20"}`,children:[e.jsx("i",{className:r.is_active?"ri-user-forbid-line text-lg":"ri-user-follow-line text-lg"}),r.is_active?"Suspend Account":"Activate Account"]}),e.jsxs("button",{onClick:()=>V(r.id),className:"flex items-center justify-center gap-3 p-5 rounded-2xl border-2 border-slate-100 bg-slate-50 text-slate-700 hover:bg-slate-100 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200 transition-all font-bold text-xs uppercase tracking-widest active:scale-95",children:[e.jsx("i",{className:"ri-eye-off-line text-lg"}),"Hide products"]}),e.jsxs("button",{onClick:async()=>{await $(r.id),g(!1)},className:"flex items-center justify-center gap-3 p-5 rounded-2xl border-2 border-rose-100 bg-rose-50 text-rose-700 hover:bg-rose-100 dark:bg-rose-900/10 dark:border-rose-900/20 transition-all font-bold text-xs uppercase tracking-widest active:scale-95",children:[e.jsx("i",{className:"ri-delete-bin-line text-lg"}),"Delete Profile"]})]}),e.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest leading-relaxed px-1",children:[e.jsx("i",{className:"ri-information-line mr-1 text-blue-500"}),"Suspending blocks access while keeping data. Deleting permanently removes the profile."]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-100 dark:border-slate-800 flex gap-4 sticky bottom-0 bg-white dark:bg-slate-900 z-10",children:[e.jsx("button",{onClick:()=>g(!1),className:"flex-1 py-4 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-200 transition-colors uppercase tracking-widest text-xs",children:"Cancel"}),e.jsxs("button",{onClick:Y,disabled:y,className:"flex-[2] py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-bold rounded-xl hover:shadow-lg transition-all flex items-center justify-center gap-2 uppercase tracking-widest text-xs",children:[y?e.jsx("i",{className:"ri-loader-4-line animate-spin"}):e.jsx("i",{className:"ri-save-line"}),"Save Changes"]})]})]})}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-2xl rounded-3xl shadow-2xl max-h-[90vh] overflow-y-auto outline-none border border-slate-100 dark:border-slate-800 flex flex-col",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-slate-100 dark:border-slate-800 flex items-center justify-between sticky top-0 bg-white/95 dark:bg-slate-900/95 backdrop-blur z-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:"Create User"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Add a new user to the platform (Auto-confirm email)"})]}),e.jsx("button",{onClick:()=>N(!1),className:"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500 hover:bg-slate-200 transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:J,className:"p-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wide text-slate-500 mb-2 block",children:"Full Name"}),e.jsx("input",{required:!0,type:"text",value:n.fullName,onChange:t=>u({...n,fullName:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-blue-500/50 outline-none font-medium",placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wide text-slate-500 mb-2 block",children:"Email Address"}),e.jsx("input",{required:!0,type:"email",value:n.email,onChange:t=>u({...n,email:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-blue-500/50 outline-none font-medium",placeholder:"user@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wide text-slate-500 mb-2 block",children:"Password"}),e.jsx("input",{required:!0,type:"password",value:n.password,onChange:t=>u({...n,password:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-blue-500/50 outline-none font-medium",placeholder:"••••••••"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wide text-slate-500 mb-2 block",children:"Phone Number"}),e.jsx("input",{required:!0,type:"tel",value:n.phone,onChange:t=>u({...n,phone:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-blue-500/50 outline-none font-medium",placeholder:"024XXXXXXX"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wide text-slate-500 mb-2 block",children:"Faculty"}),e.jsxs("select",{required:!0,value:n.faculty,onChange:t=>u({...n,faculty:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-blue-500/50 outline-none font-medium",children:[e.jsx("option",{value:"",children:"Select Faculty"}),e.jsx("option",{value:"Faculty of Business",children:"Faculty of Business"}),e.jsx("option",{value:"Faculty of Science & Computing",children:"Faculty of Science & Computing"}),e.jsx("option",{value:"Faculty of Nursing & Midwifery",children:"Faculty of Nursing & Midwifery"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wide text-slate-500 mb-2 block",children:"Department"}),e.jsx("input",{type:"text",value:n.department,onChange:t=>u({...n,department:t.target.value}),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-blue-500/50 outline-none font-medium",placeholder:"e.g. IT"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wide text-slate-500 mb-4 block",children:"Initial Role"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:["buyer","seller","admin","news_publisher"].map(t=>e.jsx("div",{onClick:()=>u({...n,role:t}),className:`cursor-pointer px-4 py-3 rounded-xl border-2 transition-all flex flex-col items-center justify-center gap-2 text-center ${n.role===t?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-slate-100 dark:border-slate-800"}`,children:e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-200 capitalize",children:t.replace("_"," ")})},t))})]}),e.jsxs("div",{className:"pt-6 flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"flex-1 py-4 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-200 transition-colors uppercase tracking-widest text-xs",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:y,className:"flex-[2] py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-bold rounded-xl hover:shadow-lg transition-all flex items-center justify-center gap-2 uppercase tracking-widest text-xs",children:[y?e.jsx("i",{className:"ri-loader-4-line animate-spin text-lg"}):e.jsx("i",{className:"ri-user-add-line text-lg"}),"Create User Account"]})]})]})]})}),X&&e.jsxs("div",{className:"fixed top-24 right-4 z-50 animate-bounce px-6 py-4 rounded-2xl bg-emerald-500 text-white shadow-xl flex items-center gap-3",children:[e.jsx("i",{className:"ri-checkbox-circle-fill text-xl"}),e.jsx("span",{className:"font-bold",children:"Profile Updated!"})]})]})}export{ce as default};
//# sourceMappingURL=UserManagement-WtKNV5DS.js.map
