import{j as e}from"./query-vendor-CC_3ftG1.js";import{u as S,f as C,r as t}from"./react-vendor-Bsfkyusf.js";import{u as P,a as E,b as _,c as A,N as F,g as L}from"./index-CcOhh2SE.js";import{u as M,C as T}from"./useSiteContent-Daxp1dB1.js";import{A as R}from"./AdSenseBanner-BPboZR6r.js";import"./i18n-vendor-CQdsz7qV.js";import"./supabase-vendor-C3liu3n-.js";function U(){const f=S(),[l,g]=C(),{user:z}=P();M(T.MARKETPLACE_BANNER);const[i,d]=t.useState(l.get("category")||"all"),[o,m]=t.useState(""),[y,x]=t.useState(""),[n,B]=t.useState("all"),[s,v]=t.useState("newest");t.useEffect(()=>{const r=setTimeout(()=>{x(o)},500);return()=>clearTimeout(r)},[o]),t.useEffect(()=>{const r=l.get("category")||"all";d(r)},[l]);const{data:h=[],isLoading:w}=E({category:i,search:y}),{data:b=[]}=_(),j=A(),u=t.useMemo(()=>b.map(r=>r.product_id),[b]),p=[{id:"all",name:"Discover All",icon:"ri-command-fill",color:"bg-blue-600"},{id:"Electronics",name:"Electronics",icon:"ri-macbook-line",color:"bg-indigo-600"},{id:"Books & Stationery",name:"Textbooks",icon:"ri-book-read-line",color:"bg-emerald-600"},{id:"Fashion & Accessories",name:"Fashion",icon:"ri-t-shirt-line",color:"bg-rose-600"},{id:"Food & Beverages",name:"Nutrition",icon:"ri-restaurant-2-line",color:"bg-amber-600"},{id:"Sports & Fitness",name:"Sports",icon:"ri-basketball-line",color:"bg-orange-600"},{id:"Home & Living",name:"Home",icon:"ri-home-smile-line",color:"bg-teal-600"},{id:"Services",name:"Services",icon:"ri-service-line",color:"bg-purple-600"},{id:"Other",name:"Miscellaneous",icon:"ri-grid-line",color:"bg-slate-600"}],c=t.useMemo(()=>[...h].filter(r=>{let a=!0;return r.price_type==="fixed"&&r.price&&(n==="under50"?a=r.price<50:n==="50-200"?a=r.price>=50&&r.price<=200:n==="over200"&&(a=r.price>200)),a}).sort((r,a)=>s==="price-low"?(r.price||0)-(a.price||0):s==="price-high"?(a.price||0)-(r.price||0):s==="popular"?(a.views_count||0)-(r.views_count||0):s==="newest"?new Date(a.created_at).getTime()-new Date(r.created_at).getTime():0),[h,n,s]),N=t.useCallback(r=>{d(r);const a=new URLSearchParams(l);r==="all"?a.delete("category"):a.set("category",r),g(a)},[l,g]);return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-950 transition-colors duration-300 font-sans",children:[e.jsx(F,{}),e.jsxs("section",{className:"relative pt-32 pb-12 md:pt-40 md:pb-16 overflow-hidden bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 dark:bg-gray-950",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/40 via-white/20 to-white/40 dark:from-gray-950/90 dark:to-gray-950"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative z-10 text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 border border-orange-200 dark:border-gray-700 rounded-full mb-6 shadow-sm",children:[e.jsxs("span",{className:"relative flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),e.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:"Live Marketplace"})]}),e.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:["Shop Campus ",e.jsx("br",{className:"hidden sm:block"}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-500 via-amber-500 to-yellow-500",children:"Marketplace"})]}),e.jsx("div",{className:"max-w-2xl mx-auto relative",children:e.jsxs("form",{onSubmit:r=>{r.preventDefault(),x(o)},className:"relative flex items-center bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-2xl p-2 shadow-lg hover:shadow-xl transition-shadow",children:[e.jsx("i",{className:"ri-search-2-line text-xl md:text-2xl text-gray-400 ml-4 pointer-events-none"}),e.jsx("input",{type:"text",placeholder:"Find textbooks, gadgets, services...",value:o,onChange:r=>m(r.target.value),className:"w-full bg-transparent border-none text-gray-900 dark:text-white placeholder-gray-400 focus:ring-0 text-base font-medium px-4 h-12"}),e.jsx("button",{type:"submit",className:"px-6 md:px-8 h-12 bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white font-bold rounded-xl transition-all shadow-lg active:scale-95 text-sm",children:"Search"})]})})]})]}),e.jsx("div",{className:"sticky top-20 z-40 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl border-b border-orange-100 dark:border-gray-800",children:e.jsx("div",{className:"max-w-[1720px] mx-auto",children:e.jsx("div",{className:"flex items-center gap-2 md:gap-3 overflow-x-auto py-4 px-4 md:px-8 no-scrollbar scroll-smooth",children:p.map(r=>e.jsxs("button",{onClick:()=>N(r.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-full transition-all duration-300 border text-sm font-bold whitespace-nowrap ${i===r.id?"bg-gradient-to-r from-orange-500 to-amber-500 text-white border-transparent shadow-lg scale-105":"bg-transparent text-gray-600 dark:text-gray-400 border-gray-200 dark:border-gray-700 hover:bg-orange-50 dark:hover:bg-gray-800 hover:border-orange-200 dark:hover:border-gray-600"}`,children:[e.jsx("i",{className:`${r.icon} text-lg`}),r.name]},r.id))})})}),e.jsx("div",{className:"max-w-[1720px] mx-auto px-4 sm:px-6 lg:px-8 relative z-20",children:e.jsxs("div",{className:"py-8 md:py-12",children:[e.jsx(R,{className:"mb-12 rounded-[2rem] overflow-hidden shadow-lg"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between mb-8 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-600 dark:text-orange-400 font-bold text-xs mb-2",children:i==="all"?"Marketplace":"Category"}),e.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[i==="all"?"Fresh Listings":p.find(r=>r.id===i)?.name,e.jsx("span",{className:"text-sm font-bold text-gray-500 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:c.length})]})]}),e.jsx("div",{className:"w-full md:w-auto",children:e.jsxs("div",{className:"relative group z-30 w-full md:w-48",children:[e.jsxs("select",{value:s,onChange:r=>v(r.target.value),className:"appearance-none w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 py-3 pl-4 pr-10 rounded-xl font-medium text-sm focus:ring-2 focus:ring-orange-500 cursor-pointer shadow-sm hover:shadow-md transition-shadow text-gray-700 dark:text-gray-200",children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"popular",children:"Popularity"}),e.jsx("option",{value:"price-low",children:"Price: Low to High"}),e.jsx("option",{value:"price-high",children:"Price: High to Low"})]}),e.jsx("i",{className:"ri-arrow-down-s-line absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})})]}),w?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 md:gap-6",children:[1,2,3,4,5,6,7,8,9,10,11,12].map(r=>e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl p-4 h-[350px] animate-pulse",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 h-48 rounded-2xl mb-4"}),e.jsx("div",{className:"h-4 bg-gray-100 dark:bg-gray-800 rounded w-3/4 mb-3"}),e.jsx("div",{className:"h-4 bg-gray-100 dark:bg-gray-800 rounded w-1/2"})]},r))}):c?.length?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 md:gap-8",children:c.map(r=>{const a=r.seller;return e.jsxs("div",{onClick:()=>f(`/product/${r.id}`),className:"group flex flex-col bg-transparent cursor-pointer",children:[e.jsxs("div",{className:"relative aspect-[4/5] rounded-[2rem] overflow-hidden bg-gray-100 dark:bg-gray-800 mb-4 shadow-sm group-hover:shadow-xl transition-all duration-500 group-hover:-translate-y-2",children:[r.images?.[0]?e.jsx("img",{src:L(r.images[0],500,90),alt:r.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300 dark:text-gray-700",children:e.jsx("i",{className:"ri-image-2-line text-6xl"})}),e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsx("button",{onClick:k=>{k.stopPropagation(),j.mutate(r.id)},className:`w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-lg active:scale-90 backdrop-blur-xl ${u.includes(r.id)?"bg-rose-500 text-white":"bg-white/90 text-gray-400 hover:text-rose-500 hover:scale-110"}`,children:e.jsx("i",{className:`${u.includes(r.id),"ri-heart-fill"} text-lg`})})}),e.jsx("div",{className:"absolute bottom-3 left-3 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md px-4 py-2 rounded-full shadow-lg",children:e.jsx("p",{className:"text-sm font-black text-gray-900 dark:text-white leading-none",children:r.price_type==="fixed"?`â‚µ${r.price?.toLocaleString()}`:"Contact"})})]}),e.jsxs("div",{className:"px-2",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900 dark:text-white mb-1 line-clamp-1 group-hover:text-orange-600 transition-colors",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-xs font-medium",children:[e.jsx("span",{children:a.business_name||a?.full_name}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-gray-300"}),e.jsx("span",{children:r.category})]})]})]},r.id)})}):e.jsxs("div",{className:"py-32 text-center bg-white dark:bg-gray-900 rounded-[3rem] border border-gray-100 dark:border-gray-800",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gray-50 dark:bg-gray-800 rounded-full mb-6",children:e.jsx("i",{className:"ri-search-line text-3xl text-gray-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"No matches found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 max-w-sm mx-auto",children:"Adjust your filters or try a broader search term."}),e.jsx("button",{onClick:()=>{d("all"),m("")},className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white font-bold rounded-xl shadow-lg transition-all text-sm",children:"Reset Search"})]})]})})]})}export{U as default};
//# sourceMappingURL=Marketplace-CgNsP3QZ.js.map
