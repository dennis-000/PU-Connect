{"version":3,"file":"AdminLogin-CQDHrbPv.js","sources":["../../src/pages/auth/AdminLogin.tsx"],"sourcesContent":["import { useState } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { supabase } from '../../lib/supabase';\r\n\r\nexport default function AdminLogin() {\r\n    const [email, setEmail] = useState('system.admin@gmail.com');\r\n    const [password, setPassword] = useState('pukonnect@!');\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const { signIn } = useAuth();\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setLoading(true);\r\n\r\n        try {\r\n            // 2. Check for SYSTEM CREDENTIALS stored in database (Dynamic Override)\r\n            const { data: settings } = await supabase\r\n                .from('website_settings')\r\n                .select('system_default_password')\r\n                .maybeSingle();\r\n\r\n            if (settings && settings.system_default_password && password === settings.system_default_password) {\r\n                console.log('System Override Activated via DB');\r\n                localStorage.setItem('sys_admin_bypass', 'true');\r\n                localStorage.setItem('sys_admin_secret', password); // Store for RPC calls\r\n                window.location.assign('/admin/dashboard');\r\n                return;\r\n            }\r\n\r\n            // 1. Fallback: Check for HARDCODED System Credentials (Escape Hatch) [Keep for safety if DB fails]\r\n            if (email.toLowerCase() === 'system.admin@gmail.com' && password === 'pukonnect@!') {\r\n                console.log('System Override Activated (Hardcoded)');\r\n                localStorage.setItem('sys_admin_bypass', 'true');\r\n                localStorage.setItem('sys_admin_secret', password); // Store for RPC calls\r\n                window.location.assign('/admin/dashboard');\r\n                return;\r\n            }\r\n\r\n            // 3. Attempt standard sign-in\r\n            const { user, error: authError } = await signIn(email, password);\r\n\r\n            if (authError) {\r\n                // Double check if the password entered matches the system default (redundant but safe)\r\n                if (settings && settings.system_default_password && password === settings.system_default_password) {\r\n                    localStorage.setItem('sys_admin_bypass', 'true');\r\n                    localStorage.setItem('sys_admin_secret', password); // Store for RPC calls\r\n                    window.location.assign('/admin/dashboard');\r\n                    return;\r\n                }\r\n\r\n                console.warn(\"Auth failed\", authError);\r\n                setError('Invalid credentials'); // Show error to user\r\n                return;\r\n            }\r\n\r\n            if (user) {\r\n                const from = location.state?.from?.pathname || '/admin/dashboard';\r\n                navigate(from, { replace: true });\r\n            }\r\n        } catch (err: any) {\r\n            console.error(err);\r\n            setError('System error occurred');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#0f172a] flex flex-col items-center justify-center p-4 relative overflow-hidden font-sans text-slate-200\">\r\n            {/* Abstract Digital Background */}\r\n            <div className=\"absolute inset-0 z-0 opacity-20\">\r\n                <div className=\"absolute top-0 -left-4 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl animate-blob\"></div>\r\n                <div className=\"absolute top-0 -right-4 w-72 h-72 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-2000\"></div>\r\n                <div className=\"absolute -bottom-8 left-20 w-72 h-72 bg-indigo-500 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-4000\"></div>\r\n                {/* Grid pattern overlay */}\r\n                <div className=\"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMSIgY3k9IjEiIHI9IjEiIGZpbGw9InJnYmEoMjU1LDI1NSwyNTUsMC4wNSkiLz48L3N2Zz4=')] opacity-30\"></div>\r\n            </div>\r\n\r\n            <div className=\"w-full max-w-md relative z-10 animate-fade-in-up\">\r\n                {/* Logo / Header */}\r\n                <div className=\"text-center mb-10\">\r\n                    <div className=\"inline-flex p-4 bg-blue-500/10 rounded-full mb-6 ring-1 ring-blue-500/30 backdrop-blur-md shadow-lg shadow-blue-500/20\">\r\n                        <i className=\"ri-shield-keyhole-fill text-4xl text-blue-400 drop-shadow-md\"></i>\r\n                    </div>\r\n                    <h1 className=\"text-4xl font-extrabold text-white tracking-tight mb-2 leading-tight\">System<br />Portal</h1>\r\n                    <div className=\"flex items-center justify-center gap-2 mt-3\">\r\n                        <span className=\"relative flex h-2 w-2\">\r\n                            <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75\"></span>\r\n                            <span className=\"relative inline-flex rounded-full h-2 w-2 bg-red-500\"></span>\r\n                        </span>\r\n                        <p className=\"text-slate-400 text-[10px] font-bold uppercase tracking-[0.2em]\">Secure Access Point</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Login Card */}\r\n                <div className=\"bg-slate-900/40 backdrop-blur-md border border-slate-700/50 rounded-3xl p-8 shadow-2xl relative overflow-hidden group hover:border-slate-600/50 transition-colors duration-500\">\r\n                    {/* Top accent line */}\r\n                    <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-600 via-purple-500 to-blue-600 opacity-70 group-hover:opacity-100 transition-opacity duration-500\"></div>\r\n\r\n                    {error && (\r\n                        <div className=\"mb-6 bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-xl text-xs font-bold uppercase tracking-wide flex items-center gap-3 animate-fade-in\">\r\n                            <i className=\"ri-alarm-warning-line text-lg\"></i>\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                        <div>\r\n                            <label className=\"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 ml-1\">Administrative ID</label>\r\n                            <div className=\"relative group/input\">\r\n                                <i className=\"ri-user-settings-line absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within/input:text-blue-400 transition-colors text-lg\"></i>\r\n                                <input\r\n                                    type=\"email\"\r\n                                    required\r\n                                    value={email}\r\n                                    onChange={(e) => setEmail(e.target.value)}\r\n                                    className=\"w-full bg-slate-950/50 border border-slate-800 rounded-xl px-12 py-4 text-white placeholder-slate-600 focus:outline-none focus:border-blue-500/50 focus:ring-2 focus:ring-blue-500/10 transition-all text-sm font-medium\"\r\n                                    placeholder=\"admin@system.internal\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1 ml-1\">Passphrase</label>\r\n                            <div className=\"relative group/input\">\r\n                                <i className=\"ri-lock-password-line absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within/input:text-blue-400 transition-colors text-lg\"></i>\r\n                                <input\r\n                                    type={showPassword ? \"text\" : \"password\"}\r\n                                    required\r\n                                    value={password}\r\n                                    onChange={(e) => setPassword(e.target.value)}\r\n                                    className=\"w-full bg-slate-950/50 border border-slate-800 rounded-xl px-12 py-4 text-white placeholder-slate-600 focus:outline-none focus:border-blue-500/50 focus:ring-2 focus:ring-blue-500/10 transition-all text-sm font-medium pr-12\"\r\n                                    placeholder=\"••••••••••••\"\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setShowPassword(!showPassword)}\r\n                                    className=\"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white transition-colors cursor-pointer\"\r\n                                >\r\n                                    <i className={`ri-${showPassword ? 'eye-off' : 'eye'}-line text-lg`}></i>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"flex justify-end mt-2\">\r\n                                <a href=\"#\" className=\"text-[10px] font-bold text-blue-500 hover:text-blue-400 transition-colors uppercase tracking-widest\">Forgot Credentials?</a>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={loading}\r\n                            className=\"w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-900/20 hover:shadow-blue-600/20 transition-all mt-4 active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed group relative overflow-hidden\"\r\n                        >\r\n                            <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700\"></div>\r\n                            {loading ? (\r\n                                <div className=\"flex items-center justify-center gap-2\">\r\n                                    <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\r\n                                    <span className=\"text-xs uppercase tracking-widest\">Authenticating...</span>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"flex items-center justify-center gap-3\">\r\n                                    <i className=\"ri-shield-check-line text-lg group-hover:scale-110 transition-transform\"></i>\r\n                                    <span className=\"text-xs uppercase tracking-widest\">Authorize Access</span>\r\n                                </div>\r\n                            )}\r\n                        </button>\r\n                    </form>\r\n\r\n                    <div className=\"mt-8 text-center border-t border-slate-800/50 pt-6\">\r\n                        <p className=\"text-slate-600 text-[10px] font-mono leading-relaxed\">\r\n                            UNAUTHORIZED ACCESS TO THIS SYSTEM IS FORBIDDEN AND MAY BE PROSECUTED. IP ADDRESS LOGGED.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Return link */}\r\n            <button\r\n                onClick={() => navigate('/')}\r\n                className=\"absolute bottom-8 text-slate-600 hover:text-white text-[10px] font-bold uppercase tracking-widest transition-colors flex items-center gap-2 group animate-fade-in delay-500\"\r\n            >\r\n                <i className=\"ri-arrow-left-s-line group-hover:-translate-x-1 transition-transform\"></i>\r\n                Return to Public Portal\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["AdminLogin","email","setEmail","useState","password","setPassword","showPassword","setShowPassword","error","setError","loading","setLoading","signIn","useAuth","navigate","useNavigate","location","useLocation","handleSubmit","e","settings","supabase","user","authError","from","err","jsxs","jsx"],"mappings":"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"}