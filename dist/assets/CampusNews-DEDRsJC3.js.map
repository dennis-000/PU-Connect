{"version":3,"file":"CampusNews-DEDRsJC3.js","sources":["../../src/pages/news/CampusNews.tsx"],"sourcesContent":["import { useState, useMemo, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Navbar from '../../components/feature/Navbar';\r\nimport { getOptimizedImageUrl } from '../../lib/imageOptimization';\r\nimport { useNews } from '../../hooks/useNews';\r\nimport { useSiteContent, CONTENT_KEYS } from '../../hooks/useSiteContent';\r\nimport AdSenseBanner from '../../components/feature/AdSenseBanner';\r\n\r\nexport default function CampusNews() {\r\n  const [selectedCategory, setSelectedCategory] = useState('all');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [debouncedSearch, setDebouncedSearch] = useState('');\r\n\r\n  const { url: bannerUrl } = useSiteContent(CONTENT_KEYS.NEWS_BANNER);\r\n\r\n  // Debounce search query\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedSearch(searchQuery);\r\n    }, 500);\r\n    return () => clearTimeout(timer);\r\n  }, [searchQuery]);\r\n\r\n  const { data: news = [], isLoading: loading } = useNews({\r\n    category: selectedCategory,\r\n    search: debouncedSearch,\r\n  });\r\n\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric'\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white dark:bg-gray-950 transition-colors duration-300\">\r\n      <Navbar />\r\n\r\n      <section className=\"relative py-24 md:py-32 overflow-hidden bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 dark:bg-gray-950\">\r\n        {/* Background Image Overlay */}\r\n        <div className=\"absolute inset-0 z-0\">\r\n          <img\r\n            src={bannerUrl || 'https://images.unsplash.com/photo-1504711434969-e33886168f5c?auto=format&fit=crop&q=80&w=1920'}\r\n            alt=\"Campus\"\r\n            className=\"w-full h-full object-cover opacity-10 dark:opacity-20\"\r\n          />\r\n          <div className=\"absolute inset-0 bg-gradient-to-br from-white/60 via-white/40 to-white/60 dark:from-gray-950/90 dark:to-gray-950\"></div>\r\n        </div>\r\n\r\n        <div className=\"max-w-7xl mx-auto px-6 md:px-12 relative z-10 w-full\">\r\n          <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-8\">\r\n            <div className=\"max-w-3xl\">\r\n              <div className=\"inline-flex items-center gap-3 px-4 py-2 bg-white dark:bg-orange-600/10 border border-orange-200 dark:border-orange-500/20 text-orange-700 dark:text-orange-400 text-xs font-bold rounded-full mb-6 shadow-sm\">\r\n                <span className=\"w-1.5 h-1.5 bg-orange-500 rounded-full animate-pulse\"></span>\r\n                Official News Feed\r\n              </div>\r\n              <h1 className=\"text-5xl md:text-6xl font-bold text-gray-900 dark:text-white leading-tight tracking-tight mb-6\">\r\n                Campus <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-orange-500 via-amber-500 to-yellow-500\">News</span>\r\n              </h1>\r\n              <p className=\"text-gray-600 dark:text-gray-400 font-medium text-base\">\r\n                Stay informed with the latest campus updates\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col sm:flex-row gap-4 w-full md:w-auto self-end\">\r\n              <form\r\n                onSubmit={(e) => { e.preventDefault(); setDebouncedSearch(searchQuery); }}\r\n                className=\"relative group w-full sm:min-w-[400px]\"\r\n              >\r\n                <i className=\"ri-search-2-line absolute left-5 top-1/2 -translate-y-1/2 text-xl text-gray-400 pointer-events-none\"></i>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search articles...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => setSearchQuery(e.target.value)}\r\n                  className=\"w-full pl-14 pr-28 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-2xl focus:border-orange-500 dark:focus:border-orange-500 outline-none transition-all font-medium text-gray-900 dark:text-white placeholder-gray-400 text-base shadow-sm hover:shadow-md\"\r\n                />\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"absolute right-2 top-2 bottom-2 px-6 bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white rounded-xl font-bold text-sm transition-all shadow-lg active:scale-95\"\r\n                >\r\n                  Search\r\n                </button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-12 py-12 md:py-24\">\r\n        {/* Google AdSense Banner */}\r\n        <AdSenseBanner className=\"mb-20\" />\r\n\r\n        {/* Categories */}\r\n        <div className=\"mb-16 overflow-x-auto pb-4 no-scrollbar\">\r\n          <div className=\"flex gap-3 min-w-max px-2\">\r\n            {[\r\n              { id: 'all', label: 'All News', icon: 'ri-apps-2-line' },\r\n              { id: 'General', label: 'General', icon: 'ri-newspaper-line' },\r\n              { id: 'Announcements', label: 'Announcements', icon: 'ri-megaphone-line' },\r\n              { id: 'Academic', label: 'Academic', icon: 'ri-book-3-line' },\r\n              { id: 'Events', label: 'Events', icon: 'ri-calendar-event-line' },\r\n              { id: 'Sports', label: 'Sports', icon: 'ri-trophy-line' },\r\n              { id: 'Ads', label: 'Spotlight', icon: 'ri-lightbulb-flash-line' }\r\n            ].map((category) => (\r\n              <button\r\n                key={category.id}\r\n                onClick={() => setSelectedCategory(category.id)}\r\n                className={`flex items-center gap-3 px-6 py-3 rounded-full font-bold text-sm transition-all active:scale-95 border ${selectedCategory === category.id\r\n                  ? 'bg-gradient-to-r from-orange-500 to-amber-500 border-transparent text-white shadow-lg'\r\n                  : 'bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-800 text-gray-700 dark:text-gray-400 hover:border-orange-300 dark:hover:border-orange-700 hover:text-orange-600 dark:hover:text-orange-400'\r\n                  }`}\r\n              >\r\n                <i className={`${category.icon} text-lg`}></i>\r\n                {category.label}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Intelligence Feed */}\r\n        {loading ? (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12\">\r\n            {[1, 2, 3, 4, 5, 6].map(i => (\r\n              <div key={i} className=\"h-[600px] bg-gray-50 dark:bg-gray-900/50 rounded-[2.5rem] border border-gray-100 dark:border-gray-800 animate-pulse\"></div>\r\n            ))}\r\n          </div>\r\n        ) : news.length > 0 ? (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12\">\r\n            {news.map((article) => (\r\n              <Link\r\n                key={article.id}\r\n                to={`/news/${article.id}`}\r\n                className=\"group relative bg-white dark:bg-gray-900/30 rounded-[2.5rem] border border-gray-100 dark:border-gray-800 shadow-sm hover:shadow-2xl hover:-translate-y-2 transition-all duration-700 flex flex-col overflow-hidden\"\r\n              >\r\n                <div className=\"relative h-72 w-full overflow-hidden bg-gray-100 dark:bg-gray-800 rounded-t-[2.5rem]\">\r\n                  <img\r\n                    src={getOptimizedImageUrl(article.image_url, 800, 85)}\r\n                    alt={article.title}\r\n                    onError={(e) => {\r\n                      e.currentTarget.src = 'https://images.unsplash.com/photo-1585829365234-781fcd504308?auto=format&fit=crop&q=80&w=800';\r\n                    }}\r\n                    className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105\"\r\n                  />\r\n                  <div className=\"absolute top-6 left-6\">\r\n                    <span className=\"px-4 py-2 bg-gradient-to-r from-orange-500 to-amber-500 text-white text-xs font-bold rounded-xl shadow-lg\">\r\n                      {article.category}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-gray-950/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500\"></div>\r\n                </div>\r\n\r\n                <div className=\"p-8 flex-1 flex flex-col\">\r\n                  <div className=\"flex items-center gap-4 text-xs font-bold text-gray-500 dark:text-gray-500 mb-5\">\r\n                    <div className=\"flex items-center gap-2 px-3 py-1.5 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-100 dark:border-gray-700\">\r\n                      <i className=\"ri-time-line text-orange-500\"></i>\r\n                      {formatDate(article.created_at)}\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 ml-auto\">\r\n                      <i className=\"ri-eye-line text-orange-500\"></i>\r\n                      {article.views_count || 0}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <h3 className=\"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-5 leading-tight line-clamp-2 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors\">\r\n                    {article.title}\r\n                  </h3>\r\n\r\n                  <p className=\"text-sm font-medium text-gray-500 dark:text-gray-400 line-clamp-3 leading-relaxed mb-8\">\r\n                    {(article.excerpt || article.content)\r\n                      .replace(/!\\[.*?\\]\\(.*?\\)/g, '') // Remove images\r\n                      .replace(/[#*`_~]/g, '') // Remove basic formatting\r\n                      .substring(0, 150)}\r\n                    ...\r\n                  </p>\r\n\r\n                  <div className=\"mt-auto flex items-center justify-between pt-6 border-t border-gray-100 dark:border-gray-800\">\r\n                    <span className=\"text-xs font-bold text-gray-400 dark:text-gray-500\">{article.category}</span>\r\n                    <div className=\"w-10 h-10 bg-gray-50 dark:bg-gray-800 text-gray-400 dark:text-gray-500 rounded-xl flex items-center justify-center group-hover:bg-gradient-to-r group-hover:from-orange-500 group-hover:to-amber-500 group-hover:text-white group-hover:shadow-lg transition-all duration-500\">\r\n                      <i className=\"ri-arrow-right-line text-lg\"></i>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"py-40 text-center bg-gray-50/50 dark:bg-gray-900/30 rounded-[4rem] border border-dashed border-gray-200 dark:border-gray-800\">\r\n            <div className=\"w-24 h-24 bg-white dark:bg-gray-800 rounded-3xl shadow-xl flex items-center justify-center mx-auto mb-10 rotate-3 group-hover:rotate-0 transition-transform\">\r\n              <i className=\"ri-article-line text-4xl text-gray-200 dark:text-gray-700\"></i>\r\n            </div>\r\n            <h3 className=\"text-3xl font-black text-gray-900 dark:text-white mb-4 tracking-tighter\">No signals found.</h3>\r\n            <p className=\"text-gray-400 font-bold uppercase tracking-widest text-[10px] max-w-sm mx-auto leading-relaxed\">The communication network is currently silent for this frequency. Please check back later.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["CampusNews","selectedCategory","setSelectedCategory","useState","searchQuery","setSearchQuery","debouncedSearch","setDebouncedSearch","bannerUrl","useSiteContent","CONTENT_KEYS","useEffect","timer","news","loading","useNews","formatDate","dateString","jsxs","jsx","Navbar","e","AdSenseBanner","category","i","article","Link","getOptimizedImageUrl"],"mappings":"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"}