const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/arkesel-C1VSO6Pc.js","assets/index-BpkOjQCb.js","assets/query-vendor-CC_3ftG1.js","assets/react-vendor-Bsfkyusf.js","assets/i18n-vendor-CQdsz7qV.js","assets/supabase-vendor-C3liu3n-.js","assets/index-DcDPJUwr.css"])))=>i.map(i=>d[i]);
import{_ as Y}from"./supabase-vendor-C3liu3n-.js";import{u as J,j as e}from"./query-vendor-CC_3ftG1.js";import{u as X,r as o}from"./react-vendor-Bsfkyusf.js";import{u as Z,s as p,N as ee,h as I,i as U}from"./index-BpkOjQCb.js";import{M as te,r as se}from"./index-UuyE4MSh.js";import"./i18n-vendor-CQdsz7qV.js";function oe(){const{profile:m}=Z(),g=X(),b=J(),[$,T]=o.useState([]),[N,_]=o.useState("write"),[G,D]=o.useState(!0),[x,Q]=o.useState("all"),[S,z]=o.useState(""),[K,f]=o.useState(!1),[c,C]=o.useState(null),[i,d]=o.useState({title:"",content:"",excerpt:"",category:"General",image_url:"",status:"draft",scheduled_at:""}),[E,q]=o.useState(!1),[w,P]=o.useState(!1),[j,M]=o.useState(!1);o.useEffect(()=>{["admin","super_admin","news_publisher","publisher_seller"].includes(m?.role||"")&&k()},[x]),o.useEffect(()=>{if(!["admin","super_admin","news_publisher","publisher_seller"].includes(m?.role||"")){g("/marketplace");return}k()},[m,g]);const k=async()=>{D(!0);try{let t=p.from("campus_news").select(`
          *,
          author:profiles(full_name)
        `).order("updated_at",{ascending:!1});x==="published"?t=t.eq("is_published",!0):x==="draft"?t=t.eq("is_published",!1).is("scheduled_at",null):x==="scheduled"&&(t=t.not("scheduled_at","is",null));const{data:s,error:a}=await t;if(a)throw a;console.log("Fetched News from Server:",s),T(s||[])}catch(t){console.error("Error fetching news:",t)}finally{D(!1)}},R=async t=>{if(!(!t.target.files||t.target.files.length===0)){P(!0);try{const s=t.target.files[0],a=await I(s,1200,800,.85),{url:l}=await U(a,"cms");l&&d(n=>({...n,image_url:l}))}catch(s){alert(s.message||"Failed to upload image")}finally{P(!1)}}},O=async t=>{if(!(!t.target.files||t.target.files.length===0)){M(!0);try{const s=t.target.files[0],a=await I(s,800,800,.8),{url:l}=await U(a,"cms");if(l){const n=`
![${s.name}](${l})
`;d(r=>({...r,content:r.content+n}))}}catch(s){alert(s.message||"Failed to upload image")}finally{M(!1)}}},F=async t=>{try{const{data:s}=await p.from("profiles").select("phone").not("phone","is",null).eq("is_active",!0);if(s&&s.length>0){const a=s.map(n=>n.phone).filter(n=>n&&n.length>9),l=[...new Set(a)];if(l.length>0){const{sendSMS:n}=await Y(async()=>{const{sendSMS:r}=await import("./arkesel-C1VSO6Pc.js");return{sendSMS:r}},__vite__mapDeps([0,1,2,3,4,5,6]));return await n(l,`ðŸ“¢ Campus News: "${t}" has just been published! Read now on Campus Connect.`),!0}}return!1}catch(s){return console.error("SMS Broadcast failed:",s),!1}},B=async t=>{t.preventDefault(),q(!0);try{const{status:s,scheduled_at:a,...l}=i,n=l.excerpt||l.content.substring(0,160).replace(/[#*`]/g,"")+"...",r={title:l.title,content:l.content,category:l.category,image_url:l.image_url,author_id:m?.id,is_published:s==="published",scheduled_at:s==="scheduled"&&a?new Date(a).toISOString():null,updated_at:new Date().toISOString()};let u=!1;if(c){const y={title:r.title,content:r.content,category:r.category,image_url:r.image_url,is_published:r.is_published,scheduled_at:r.scheduled_at,updated_at:r.updated_at};console.log("Sending Update to Supabase:",c.id,y);const{data:h,error:L}=await p.from("campus_news").update(y).eq("id",c.id).select("id, title, image_url");if(L)throw L;if(!h||h.length===0)throw new Error('Permission Error (RLS): Your account is authorized on the site, but the Supabase Database is blocking this specific update. Please run the "RLS SQL Fix" provided in the chat to grant the System Administrator full editing permissions.');console.log("Update Verified:",h[0]),r.is_published&&!c.is_published&&!c.sms_sent&&(u=!0),v("news_updated",{title:r.title,id:c.id})}else{const{data:y,error:h}=await p.from("campus_news").insert([r]).select().single();if(h)throw h;r.is_published&&(u=!0),v("news_created",{title:r.title,id:y?.id})}u&&F(r.title),b.invalidateQueries({queryKey:["news"]}),c&&b.invalidateQueries({queryKey:["news","article",c.id]}),alert(c?"Story updated successfully!":"New story created successfully!"),f(!1),C(null),d({title:"",content:"",excerpt:"",category:"General",image_url:"",status:"draft",scheduled_at:""}),await k()}catch(s){console.error("Submit Error:",s),alert(s.message||"Failed to save news")}finally{q(!1)}},v=async(t,s)=>{try{await p.from("activity_logs").insert({user_id:m?.id,action_type:t,action_details:s})}catch(a){console.error("Failed to log activity:",a)}},V=t=>{console.log("Editing article data:",t),C(t),d({title:t.title,content:t.content,excerpt:t.excerpt||"",category:t.category,image_url:t.image_url||"",status:t.scheduled_at?"scheduled":t.is_published?"published":"draft",scheduled_at:t.scheduled_at?new Date(t.scheduled_at).toISOString().slice(0,16):""}),_("write"),f(!0)},W=async t=>{if(confirm("Are you sure you want to delete this news article?"))try{const{error:s}=await p.from("campus_news").delete().eq("id",t);if(s)throw s;b.invalidateQueries({queryKey:["news"]}),b.invalidateQueries({queryKey:["news","article",t]}),await k()}catch(s){alert(s.message||"Failed to delete news")}},H=async(t,s)=>{try{const a=!s;let l=!1,n="";if(a){const{data:u}=await p.from("campus_news").select("sms_sent, title").eq("id",t).single();u&&u.sms_sent===!1&&(l=!0,n=u.title)}const{error:r}=await p.from("campus_news").update({is_published:a,scheduled_at:null,sms_sent:l?!0:void 0}).eq("id",t);if(r)throw r;if(v("news_published",{id:t,status:a?"published":"unpublished"}),l){const u=await F(n);alert(u?"News published & SMS broadcast sent!":"News published (SMS broadcast failed/skipped)"),v("sms_sent",{type:"news_broadcast",title:n})}await k(),b.invalidateQueries({queryKey:["news"]}),b.invalidateQueries({queryKey:["news","article",t]})}catch(a){alert(a.message||"Failed to update status")}},A=$.filter(t=>{if(x!=="all")if(x==="scheduled"){if(!t.scheduled_at)return!1}else{const s=x==="published";if(t.is_published!==s||t.scheduled_at)return!1}if(S){const s=S.toLowerCase();return t.title.toLowerCase().includes(s)||t.category.toLowerCase().includes(s)||(t.author?.full_name||"").toLowerCase().includes(s)}return!0});return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 transition-colors duration-300 pb-20 font-sans",children:[e.jsx(ee,{}),e.jsxs("div",{className:"pt-32 md:pt-40 pb-12 box-border max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"px-3 py-1 rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 text-[10px] font-bold uppercase tracking-widest border border-purple-200 dark:border-purple-800",children:"Editorial Dashboard"})}),e.jsx("h1",{className:"text-3xl md:text-5xl font-black text-slate-900 dark:text-white tracking-tight mb-2",children:"News Management"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Create and manage campus news articles"})]}),e.jsxs("div",{className:"flex gap-3",children:[m?.role==="admin"||m?.role==="super_admin"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>g("/admin/dashboard"),className:"px-6 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-xs font-bold uppercase tracking-wide whitespace-nowrap cursor-pointer flex items-center gap-2",children:[e.jsx("i",{className:"ri-dashboard-line text-lg"}),"Admin Dash"]}),e.jsxs("button",{onClick:()=>g("/publisher"),className:"hidden md:flex px-6 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-xs font-bold uppercase tracking-wide whitespace-nowrap cursor-pointer items-center gap-2",children:[e.jsx("i",{className:"ri-article-line text-lg"}),"Publisher Portal"]})]}):e.jsxs("button",{onClick:()=>g("/publisher"),className:"px-6 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-xs font-bold uppercase tracking-wide whitespace-nowrap cursor-pointer flex items-center gap-2",children:[e.jsx("i",{className:"ri-arrow-left-line text-lg"}),"Dashboard"]}),e.jsxs("button",{onClick:()=>{C(null),d({title:"",content:"",excerpt:"",category:"General",image_url:"",status:"draft",scheduled_at:""}),f(!0)},className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors text-xs font-bold uppercase tracking-wide whitespace-nowrap cursor-pointer flex items-center gap-2 shadow-lg shadow-blue-200 dark:shadow-none",children:[e.jsx("i",{className:"ri-add-line text-lg"}),"Create News"]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("i",{className:"ri-search-line absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search news by title, category, or author...",value:S,onChange:t=>z(t.target.value),className:"w-full pl-11 pr-4 py-3 bg-white dark:bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-blue-500/20 text-slate-900 dark:text-white outline-none transition-all shadow-sm"})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-100 dark:border-slate-700 p-1.5 flex-shrink-0 shadow-sm overflow-x-auto",children:e.jsx("div",{className:"flex space-x-1",children:[{id:"all",label:"All Articles"},{id:"published",label:"Published"},{id:"draft",label:"Drafts"},{id:"scheduled",label:"Scheduled"}].map(t=>e.jsx("button",{onClick:()=>Q(t.id),className:`px-4 py-2 text-xs font-bold uppercase tracking-wide rounded-xl transition-colors whitespace-nowrap cursor-pointer ${x===t.id?"bg-slate-900 dark:bg-white text-white dark:text-slate-900 shadow-md":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:t.label},t.id))})})]}),G?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"inline-block w-10 h-10 border-4 border-slate-200 border-t-blue-600 rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-xs font-bold uppercase tracking-widest text-slate-400",children:"Loading news..."})]}):A.length===0?e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2rem] border border-slate-100 dark:border-slate-700 p-16 text-center shadow-sm",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-50 dark:bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("i",{className:"ri-newspaper-line text-4xl text-slate-300 dark:text-slate-500"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"No items found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mx-auto text-sm",children:"Try adjusting your filters or create a new article to get started."})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6",children:A.map(t=>e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl border border-slate-100 dark:border-slate-700 overflow-hidden hover:shadow-xl transition-shadow group",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"w-full h-48 md:w-64 md:h-auto flex-shrink-0 relative overflow-hidden bg-slate-100 dark:bg-slate-700",children:[t.image_url&&t.image_url.trim()!==""?e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700",onError:s=>{s.currentTarget.style.display="none";const a=s.currentTarget.parentElement;if(a){const l=document.createElement("i");l.className="ri-image-line text-4xl text-slate-300 absolute inset-0 flex items-center justify-center",a.appendChild(l)}}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300 dark:text-slate-600",children:e.jsx("i",{className:"ri-image-line text-4xl"})}),e.jsx("div",{className:"absolute top-4 left-4 md:hidden",children:e.jsx("span",{className:`px-3 py-1 text-[10px] font-bold uppercase tracking-widest rounded-full shadow-lg ${t.is_published?"bg-emerald-500 text-white":t.scheduled_at?"bg-purple-500 text-white":"bg-slate-800 text-white"}`,children:t.is_published?"Published":t.scheduled_at?"Scheduled":"Draft"})})]}),e.jsxs("div",{className:"flex-1 p-6 md:p-8 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[e.jsx("span",{className:"px-2.5 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-[10px] font-bold uppercase tracking-widest rounded-full border border-blue-200 dark:border-blue-800",children:t.category}),e.jsx("span",{className:`hidden md:inline-block px-2.5 py-0.5 text-[10px] font-bold uppercase tracking-widest rounded-full border ${t.is_published?"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-300":t.scheduled_at?"bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900/20 dark:text-purple-300":"bg-slate-100 text-slate-600 border-slate-200 dark:bg-slate-700 dark:text-slate-300"}`,children:t.is_published?"Published":t.scheduled_at?"Scheduled":"Draft"}),e.jsxs("span",{className:"text-[10px] font-bold text-slate-400 flex items-center gap-1 ml-auto md:ml-0 uppercase tracking-wider",children:[e.jsx("i",{className:"ri-time-line"})," ",new Date(t.created_at).toLocaleDateString()]})]}),e.jsx("h3",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white mb-3 leading-tight tracking-tight",children:t.title}),e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 line-clamp-2 md:line-clamp-2 mb-6 leading-relaxed",children:t.content}),t.scheduled_at&&e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-600 dark:text-purple-400 bg-purple-50 dark:bg-purple-900/20 px-4 py-2 rounded-xl mb-6 w-fit border border-purple-100 dark:border-purple-800",children:[e.jsx("i",{className:"ri-calendar-event-line text-lg"}),"Scheduled for: ",new Date(t.scheduled_at).toLocaleString()]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6 mt-auto pt-6 border-t border-slate-50 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-6 text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("i",{className:"ri-user-smile-line text-lg text-slate-300"}),t.author?.full_name||"Unknown"]}),e.jsxs("button",{onClick:()=>alert(`This article has ${t.views_count.toLocaleString()} views. (Detailed viewer list coming soon)`),className:"flex items-center gap-1.5 hover:text-blue-600 transition-colors cursor-pointer",title:"Click to see who viewed",children:[e.jsx("i",{className:"ri-eye-line text-lg text-slate-300 group-hover:text-blue-400 transition-colors"}),t.views_count.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>V(t),className:"flex-1 sm:flex-none px-4 py-2.5 bg-slate-50 dark:bg-slate-700 text-slate-700 dark:text-slate-200 text-xs font-bold uppercase tracking-wider rounded-xl hover:bg-slate-100 dark:hover:bg-slate-600 border border-slate-200 dark:border-slate-600 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-edit-line mr-1"})," Edit"]}),e.jsxs("button",{onClick:()=>H(t.id,t.is_published),className:`flex-1 sm:flex-none px-4 py-2.5 text-xs font-bold uppercase tracking-wider rounded-xl transition-colors whitespace-nowrap border ${t.is_published?"bg-amber-50 text-amber-700 border-amber-200 hover:bg-amber-100 dark:bg-amber-900/20 dark:text-amber-300 dark:border-amber-800":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100 dark:bg-emerald-900/20 dark:text-emerald-300 dark:border-emerald-800"}`,children:[e.jsx("i",{className:`${t.is_published?"ri-eye-off-line":"ri-send-plane-line"} mr-1`}),t.is_published?"Unpublish":"Publish"]}),e.jsx("button",{onClick:()=>W(t.id),className:"flex-none px-4 py-2.5 bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-400 border border-rose-200 dark:border-rose-900/30 text-xs font-bold uppercase tracking-wider rounded-xl hover:bg-rose-100 dark:hover:bg-rose-900/40 transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line text-lg"})})]})]})]})]})},t.id))})]}),K&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2.5rem] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"sticky top-0 bg-white/95 dark:bg-slate-900/95 border-b border-slate-100 dark:border-slate-800 px-8 py-6 flex items-center justify-between z-10 backdrop-blur",children:[e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:c?"Edit Story":"Compose News"}),e.jsx("button",{onClick:()=>f(!1),className:"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500 hover:bg-slate-200 transition-colors",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:B,className:"p-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase tracking-wide text-slate-500 mb-2",children:"Headline *"}),e.jsx("input",{type:"text",value:i.title,onChange:t=>d({...i,title:t.target.value}),required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border-none rounded-xl focus:ring-2 focus:ring-blue-500/50 outline-none font-medium text-slate-900 dark:text-white",placeholder:"Enter a catchy headline"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase tracking-wide text-slate-500 mb-2",children:"Short Summary"}),e.jsx("textarea",{value:i.excerpt,onChange:t=>d({...i,excerpt:t.target.value}),rows:2,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border-none rounded-xl focus:ring-2 focus:ring-blue-500/50 outline-none font-medium text-slate-900 dark:text-white resize-none",placeholder:"A brief teaser for the news feed (optional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase tracking-wide text-slate-500 mb-2",children:"Category *"}),e.jsxs("select",{value:i.category,onChange:t=>d({...i,category:t.target.value}),required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border-none rounded-xl focus:ring-2 focus:ring-blue-500/50 outline-none font-medium text-slate-900 dark:text-white cursor-pointer",children:[e.jsx("option",{value:"General",children:"General"}),e.jsx("option",{value:"Events",children:"Events"}),e.jsx("option",{value:"Academic",children:"Academic"}),e.jsx("option",{value:"Sports",children:"Sports"}),e.jsx("option",{value:"Announcements",children:"Announcements"}),e.jsx("option",{value:"Ads",children:"Advertisements"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wide text-slate-500",children:"Content *"}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 rounded-lg p-1",children:[e.jsx("button",{type:"button",onClick:()=>_("write"),className:`px-3 py-1 text-[10px] font-bold uppercase tracking-widest rounded-md transition-all ${N==="write"?"bg-white dark:bg-slate-700 text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Write"}),e.jsx("button",{type:"button",onClick:()=>_("preview"),className:`px-3 py-1 text-[10px] font-bold uppercase tracking-widest rounded-md transition-all ${N==="preview"?"bg-white dark:bg-slate-700 text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Preview"})]})]}),N==="write"?e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:i.content,onChange:t=>d({...i,content:t.target.value}),required:!0,rows:12,className:"w-full px-6 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none font-medium text-slate-800 dark:text-gray-200 resize-y min-h-[300px] leading-relaxed",placeholder:"Write your story here... Markdown is supported."}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsxs("label",{className:`
                            flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-slate-700 rounded-lg text-xs font-bold uppercase tracking-wide shadow-sm cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-600 transition-colors
                            ${j?"opacity-50 cursor-not-allowed":""}
                         `,children:[j?e.jsx("i",{className:"ri-loader-4-line animate-spin"}):e.jsx("i",{className:"ri-image-add-line"}),j?"Uploading...":"Insert Image",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:O,disabled:j})]})})]}):e.jsx("div",{className:"w-full px-6 py-6 bg-slate-50 dark:bg-slate-800 border-none rounded-xl min-h-[300px] overflow-y-auto",children:e.jsx("div",{className:"prose prose-blue dark:prose-invert prose-sm max-w-none",children:e.jsx(te,{remarkPlugins:[se],children:i.content||"_No content to preview._"})})}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-2",children:"* Pro Tip: Use Markdown for formatting. Images uploaded are automatically inserted."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-3",children:"Cover Image & Graphics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx("i",{className:"ri-link-m absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"url",value:i.image_url,onChange:t=>d({...i,image_url:t.target.value}),className:"w-full pl-11 pr-4 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none font-bold text-xs text-slate-900 dark:text-white",placeholder:"https://images.unsplash.com/..."})]}),e.jsxs("label",{className:`
                            flex items-center justify-center w-14 h-14 bg-blue-600 text-white rounded-2xl cursor-pointer hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/20 active:scale-95 flex-shrink-0
                            ${w?"opacity-50 pointer-events-none":""}
                        `,children:[w?e.jsx("i",{className:"ri-loader-4-line animate-spin text-xl"}):e.jsx("i",{className:"ri-camera-lens-fill text-xl"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:R,disabled:w})]})]}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-relaxed",children:"Upload a high-resolution banner (16:9 recommended) to serve as the visual hook for your story."})]}),e.jsx("div",{className:"h-32 md:h-full bg-slate-50 dark:bg-slate-800 rounded-3xl border-2 border-dashed border-slate-200 dark:border-slate-700 relative overflow-hidden group",children:i.image_url?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:i.image_url,alt:"Preview",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),e.jsx("button",{type:"button",onClick:()=>d(t=>({...t,image_url:""})),className:"absolute top-2 right-2 w-8 h-8 bg-black/50 backdrop-blur-md text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("i",{className:"ri-delete-bin-fill"})})]}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-400 opacity-50",children:[e.jsx("i",{className:"ri-image-2-fill text-3xl mb-1"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"No Graphics"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase tracking-wide text-slate-500 mb-2",children:"Publishing Status *"}),e.jsxs("select",{value:i.status,onChange:t=>d({...i,status:t.target.value}),required:!0,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border-none rounded-xl focus:ring-2 focus:ring-blue-500/50 outline-none font-medium text-slate-900 dark:text-white cursor-pointer",children:[e.jsx("option",{value:"draft",children:"Save as Draft"}),e.jsx("option",{value:"published",children:"Publish Immediately"}),e.jsx("option",{value:"scheduled",children:"Schedule for Later"})]})]}),i.status==="scheduled"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsx("label",{className:"block text-xs font-bold uppercase tracking-wide text-slate-500 mb-2",children:"Schedule Date & Time *"}),e.jsx("input",{type:"datetime-local",value:i.scheduled_at,onChange:t=>d({...i,scheduled_at:t.target.value}),required:i.status==="scheduled",className:"w-full px-4 py-3 bg-blue-50/50 dark:bg-blue-900/20 border-2 border-blue-100 dark:border-blue-900 rounded-xl focus:ring-2 focus:ring-blue-500/50 outline-none font-bold text-blue-900 dark:text-blue-200"})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-6 sticky bottom-0 bg-white dark:bg-slate-900 z-10",children:[e.jsx("button",{type:"button",onClick:()=>f(!1),className:"flex-1 py-4 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-200 transition-colors uppercase tracking-widest text-xs",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:E||w,className:"flex-[2] py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-bold rounded-xl hover:shadow-lg transition-all flex items-center justify-center gap-2 uppercase tracking-widest text-xs disabled:opacity-50 disabled:cursor-not-allowed",children:E?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin text-lg"}),e.jsx("span",{children:"Saving..."})]}):w?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line animate-spin text-lg"}),e.jsx("span",{children:"Uploading Image..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-save-line text-lg"}),e.jsx("span",{children:c?"Update Story":"Create Story"})]})})]})]})]})})]})}export{oe as default};
//# sourceMappingURL=NewsManagement-zonfJp7A.js.map
