{"version":3,"mappings":";gUASA,SAAwBA,IAAkB,CACxC,KAAM,CAAE,KAAAC,EAAM,QAAAC,CAAA,EAAYC,EAAA,EACpBC,EAAWC,EAAA,EAGjBC,YAAU,IAAM,CACVJ,GAAWA,EAAQ,OAAS,UAAYA,EAAQ,OAAS,SAAWA,EAAQ,OAAS,eACvFE,EAAS,gBAAgB,CAE7B,EAAG,CAACF,EAASE,CAAQ,CAAC,EAGtBE,YAAU,IAAM,CAId,GAHI,CAACL,GAAQC,GAAS,OAAS,SAAWA,GAAS,OAAS,eAE3C,aAAa,QAAQ,kBAAkB,IAAM,OAChD,QAES,SAAY,CACjC,KAAM,CAAE,KAAAK,EAAM,MAAAC,CAAA,EAAU,MAAMC,EAC3B,KAAK,qBAAqB,EAC1B,OAAO,QAAQ,EACf,GAAG,UAAWR,EAAK,EAAE,EACrB,eAEC,CAACO,GAASD,GAAQA,EAAK,SAAW,YAE3B,CAACC,GAAS,CAACD,IAEpBH,EAAS,gBAAgB,CAE7B,GAEA,EAEA,MAAMM,EAAqBD,EACxB,QAAQ,uBAAuBR,EAAK,EAAE,EAAE,EACxC,GACC,mBACA,CACE,MAAO,IACP,OAAQ,SACR,MAAO,sBACP,OAAQ,cAAcA,EAAK,EAAE,IAE9BU,GAAiB,EACZA,EAAQ,YAAc,UAEfA,EAAQ,IAAI,SAAW,aAChCP,EAAS,gBAAgB,CAE7B,GAED,YAEH,MAAO,IAAM,CACXK,EAAS,cAAcC,CAAkB,CAC3C,CACF,EAAG,CAACT,EAAMC,EAASE,CAAQ,CAAC,EAE5B,KAAM,CAACQ,EAAcC,CAAe,EAAIC,WAAyE,IAAI,EAE/G,CAACC,EAAeC,CAAgB,EAAIF,WAAc,IAAI,EACtD,CAACG,EAAcC,EAAe,EAAIJ,WAAS,EAAK,EAGhD,CAACK,EAAmBC,CAAoB,EAAIN,WAAS,EAAK,EAC1D,CAACO,EAAkBC,CAAmB,EAAIR,WAAS,EAAK,EACxD,CAACS,EAAaC,CAAc,EAAIV,WAAwB,IAAI,EAC5D,CAACW,EAAUC,CAAW,EAAIZ,WAAsB,IAAI,EACpD,CAACa,EAAkBC,CAAmB,EAAId,WAAS,CACvD,aAAc,GACd,iBAAkB,GAClB,oBAAqB,GACtB,EAEKe,EAAa,CACjB,cAAe,qBAAsB,qBAAsB,mBAC3D,gBAAiB,WAAY,mBAAoB,yBACjD,gBAAiB,SAGbC,EAAqB,SAAY,CACrC,GAAI7B,GAAM,GAAI,CACZ,KAAM,CAAE,KAAAM,CAAA,EAAS,MAAME,EACpB,KAAK,iBAAiB,EACtB,OAAO,GAAG,EACV,GAAG,UAAWR,EAAK,EAAE,EACrB,cACHe,EAAiBT,CAAI,EACjBA,IACFqB,EAAoB,CAClB,aAAcrB,EAAK,eAAiB,GACpC,iBAAkBA,EAAK,mBAAqB,GAC5C,oBAAqBA,EAAK,sBAAwB,GACnD,EAEDiB,EAAejB,EAAK,eAAiB,IAAI,EAE7C,CACF,EAEAD,YAAU,IAAM,CACdwB,EAAA,CACF,EAAG,CAAC7B,CAAI,CAAC,EAET,MAAM8B,EAAsB,MAAOC,GAAuB,CAExD,GADAA,EAAE,iBACE,EAAC/B,EACL,CAAAqB,EAAoB,EAAI,EAExB,GAAI,CACF,IAAIW,EAAelB,GAAe,cAGlC,GAAIU,EAAU,CACZ,KAAM,CAAE,YAAAS,EAAa,cAAAC,GAAkB,MAAAC,EAAA,4BAAAF,EAAA,cAAAC,CAAA,OAAM,QAAO,qBAAuB,OAAAE,KAAA,sBAAAH,EAAA,cAAAC,CAAA,mCACrEG,EAAa,MAAMH,EAAcV,CAAQ,EACzC,CAAE,IAAAc,GAAQ,MAAML,EAAYI,EAAY,WAAYrC,EAAK,EAAE,EACjEgC,EAAeM,CACjB,CAGA,KAAM,CAAE,MAAOC,GAAiB,MAAM/B,EACnC,KAAK,iBAAiB,EACtB,OAAO,CACN,cAAekB,EAAiB,aAChC,kBAAmBA,EAAiB,iBACpC,qBAAsBA,EAAiB,oBACvC,cAAeM,EACf,WAAY,IAAI,OAAO,aAAY,CACpC,EACA,GAAG,UAAWhC,EAAK,EAAE,EAExB,GAAIuC,EAAc,MAAMA,EAGxB,MAAM/B,EACH,KAAK,qBAAqB,EAC1B,OAAO,CACN,cAAekB,EAAiB,aAChC,kBAAmBA,EAAiB,iBACpC,qBAAsBA,EAAiB,oBACvC,cAAeM,EACf,WAAY,IAAI,OAAO,aAAY,CACpC,EACA,GAAG,UAAWhC,EAAK,EAAE,EAExBY,EAAgB,CAAE,KAAM,UAAW,QAAS,0CAA2C,EACvF,MAAMiB,EAAA,EACNV,EAAqB,EAAK,EAC1BI,EAAe,IAAI,EACnBE,EAAY,IAAI,CAClB,OAASe,EAAU,CACjB,QAAQ,MAAM,2BAA4BA,CAAG,EAC7C5B,EAAgB,CAAE,KAAM,QAAS,QAAS,kBAAoB4B,EAAI,QAAS,CAC7E,SACEnB,EAAoB,EAAK,CAC3B,EACF,EAEMoB,EAAoBC,GAAe,CACvCjB,EAAYiB,CAAI,EAChB,MAAMC,EAAS,IAAI,WACnBA,EAAO,UAAY,IAAM,CACvBpB,EAAeoB,EAAO,MAAgB,CACxC,EACAA,EAAO,cAAcD,CAAI,CAC3B,EAEArC,YAAU,IAAM,CAEd,MAAMuC,EAAkBpC,EAAS,QAAQ,cAAc,EACvD,OAAAoC,EACG,GAAG,WAAY,CAAE,MAAO,QAAU,CAAC,CAAE,IAAAC,EAAK,aAAAC,KAAmB,CAC5D,MAAM9C,EAAO8C,EAAa,CAAC,EACvB9C,GAAQA,EAAK,UAAYC,GAAS,IACpCW,EAAgB,CACd,KAAM,OACN,QAAS,GAAGZ,EAAK,WAAa,QAAQ,eACvC,CAEL,CAAC,EACA,YAEI,IAAM,CACXQ,EAAS,cAAcoC,CAAe,CACxC,CACF,EAAG,CAAC3C,CAAO,CAAC,EAEZI,YAAU,IAAM,CACd,GAAIM,EAAc,CAChB,MAAMoC,EAAQ,WAAW,IAAMnC,EAAgB,IAAI,EAAG,GAAI,EAC1D,MAAO,IAAM,aAAamC,CAAK,CACjC,CACF,EAAG,CAACpC,CAAY,CAAC,EAEjB,KAAM,CAAE,KAAMqC,EAAW,GAAI,UAAAC,CAAA,EAAcC,EAAY,CACrD,SAAUlD,GAAM,GACjB,EAEKmD,EAAwBC,EAAA,EACxBC,EAAwBC,EAAA,EAExBC,EAAQ,CACZ,MAAOP,EAAS,OAChB,OAAQA,EAAS,OAAOQ,GAAKA,EAAE,SAAS,EAAE,OAC1C,MAAOR,EAAS,OAAO,CAACS,EAAKD,IAAMC,GAAOD,EAAE,aAAe,GAAI,CAAC,GAGlE,GAAI,CAACxD,GAAS,CAAC,CAAC,SAAU,QAAS,cAAe,kBAAkB,EAAE,SAASC,GAAS,MAAQ,EAAE,EAChG,OAAAE,EAAS,gBAAgB,EAClB,KAIT,MAAMuD,EAAqB,MAAOC,EAAmBC,IAAiB,CACpE,MAAMC,EAAW,aAAa,QAAQ,kBAAkB,IAAM,OACxDC,EAAS,aAAa,QAAQ,kBAAkB,EACtD,GAAID,GAAYC,EAAQ,CACtB,KAAM,CAAE,MAAAvD,CAAA,EAAU,MAAMC,EAAS,IAAI,uBAAwB,CAC3D,WAAYmD,EACZ,aAAcC,EACd,WAAYE,CAAA,CACb,EACD,GAAIvD,EAAO,MAAMA,EAEjBC,EAAS,QAAQ,kBAAkB,EAAE,KAAK,CACxC,KAAM,YACN,MAAO,SACP,QAAS,EAAC,CACX,EACD,OAAO,SAAS,SAChB,MACF,CACA,OAAO2C,EAAsB,OAAO,CAAE,GAAIQ,EAAW,QAAAC,EAAS,CAChE,EAEMG,EAAqB,MAAOJ,GAAsB,CACtD,MAAME,EAAW,aAAa,QAAQ,kBAAkB,IAAM,OACxDC,EAAS,aAAa,QAAQ,kBAAkB,EACtD,GAAID,GAAYC,EAAQ,CACtB,KAAM,CAAE,MAAAvD,CAAA,EAAU,MAAMC,EAAS,IAAI,uBAAwB,CAC3D,UAAWmD,EACX,WAAYG,CAAA,CACb,EACD,GAAIvD,EAAO,MAAMA,EACjB,OAAO,SAAS,SAChB,MACF,CACA,OAAO8C,EAAsB,OAAOM,CAAS,CAC/C,EAEMK,EAAqB,MAAOL,EAAmBM,IAA2B,CAC9E,GAAI,CACF,MAAMP,EAAmBC,EAAW,CAAE,UAAW,CAACM,EAAe,EACjErD,EAAgB,CAAE,KAAM,UAAW,QAAS,WAAYqD,EAA8B,SAAd,WAAsB,gBAAiB,CACjH,OAASzB,EAAU,CACjB5B,EAAgB,CAAE,KAAM,QAAS,QAAS4B,EAAI,SAAW,0BAA2B,CACtF,CACF,EAEM0B,EAAe,MAAOP,GAAsB,CAChD,GAAI,OAAO,QAAQ,oDAAoD,EACrE,GAAI,CACF,MAAMI,EAAmBJ,CAAS,EAClC/C,EAAgB,CAAE,KAAM,UAAW,QAAS,+BAAgC,CAC9E,OAAS4B,EAAU,CACjB5B,EAAgB,CAAE,KAAM,QAAS,QAAS4B,EAAI,SAAW,2BAA4B,CACvF,CAEJ,EAEA,OACE2B,OAAC,OAAI,UAAU,+EACb,UAAAC,MAACC,EAAA,EAAO,EAGP1D,GACCwD,OAAC,OAAI,UAAW,+KAA+KxD,EAAa,OAAS,UAAY,qDAC/NA,EAAa,OAAS,QAAU,+CAC9B,8CACF,GACA,UAAAyD,MAAC,KAAE,UAAW,GAAGzD,EAAa,OAAS,UAAY,0BAA4BA,EAAa,OAAS,QAAU,wBAA0B,wBAAwB,WAAY,EAC7KyD,MAAC,QAAK,UAAU,kCAAmC,WAAa,QAAQ,GAC1E,EAGFD,OAAC,OAAI,UAAU,oEACb,UAAAA,OAAC,OAAI,UAAU,+NACb,UAAAA,OAAC,OAAI,UAAU,sDACb,UAAAA,OAAC,OAAI,UAAU,sBACb,UAAAC,MAAC,OAAI,UAAW,wHAAwHpD,EAAe,aAAe,EAAE,GACrK,YAAe,cACdoD,MAAC,OACC,IAAKE,EAAqBxD,EAAc,cAAe,IAAK,EAAE,EAC9D,IAAKA,EAAc,cACnB,UAAU,+BAGZsD,MAAC,OAAI,UAAU,iFACb,eAAC,KAAE,UAAU,kBAAkB,EACjC,EAEJ,EAGAD,OAAC,UACC,QAAS,IAAMhD,EAAqB,EAAI,EACxC,UAAU,mHAEV,UAAAiD,MAAC,OAAI,UAAU,4DAA4D,EAC3ED,OAAC,OAAI,UAAU,uCACb,UAAAC,MAAC,KAAE,UAAU,0CAA0C,EACvDA,MAAC,QAAK,UAAU,+DAA+D,wBAAY,GAC7F,KAGDpD,SACE,OAAI,UAAU,yDACb,SAAAoD,MAAC,KAAE,UAAU,uDAAuD,EACtE,GAEJ,SACC,OACC,UAAAD,OAAC,OAAI,UAAU,wJACb,UAAAC,MAAC,KAAE,UAAU,oCAAoC,EAAI,0BAEvD,EACAD,OAAC,MAAG,UAAU,kGACX,UAAArD,GAAe,eAAiB,iBAAY,OAAG,EAChDsD,MAAC,QAAK,UAAU,gBAAgB,uBAAW,GAC7C,EACAD,OAAC,KAAE,UAAU,qFACV,UAAArD,GAAe,mBAAqB,UAAU,kBAAgB,IAAI,KAAKA,GAAe,YAAc,KAAK,KAAK,EAAE,aAAY,EAC/H,GACF,GACF,EAEAqD,OAAC,OAAI,UAAU,sBACb,UAAAA,OAAC,UACC,QAAS,IAAMhD,EAAqB,EAAI,EACxC,UAAU,iSAEV,UAAAiD,MAAC,KAAE,UAAU,2CAA2C,EACxDA,MAAC,QAAK,qCAAyB,KAEjCD,OAACI,EAAA,CACC,GAAG,sBACH,UAAU,uNAEV,UAAAH,MAAC,QAAK,2BAAe,EACrBA,MAAC,KAAE,UAAU,sBAAsB,MAEnCnE,GAAS,OAAS,SAAWA,GAAS,OAAS,gBAC/CkE,OAAC,UACC,QAAS,IAAMhE,EAAS,kBAAkB,EAC1C,UAAU,uSAEV,UAAAiE,MAAC,KAAE,UAAU,6BAA6B,EAC1CA,MAAC,QAAK,2BAAe,IACvB,EAEJ,GACF,EAGClD,SACE,OAAI,UAAU,8HACb,SAAAiD,OAAC,OAAI,UAAU,2KACb,UAAAA,OAAC,OAAI,UAAU,+FACb,UAAAA,OAAC,OACC,UAAAC,MAAC,MAAG,UAAU,oEAAoE,6BAAiB,EACnGA,MAAC,KAAE,UAAU,qEAAqE,4CAAgC,GACpH,EACAA,MAAC,UACC,QAAS,IAAMjD,EAAqB,EAAK,EACzC,UAAU,4IAEV,SAAAiD,MAAC,KAAE,UAAU,yBAAyB,GACxC,EACF,EAEAD,OAAC,QAAK,SAAUrC,EAAqB,UAAU,8CAC7C,UAAAqC,OAAC,OAAI,UAAU,+CACb,UAAAA,OAAC,OAAI,UAAU,2BACb,UAAAC,MAAC,OAAI,UAAU,6HACb,SAAAA,MAAC,OACC,IAAK9C,GAAegD,EAAqBxD,GAAe,cAAe,IAAK,EAAE,EAC9E,UAAU,6BACV,IAAI,UACJ,QAAUiB,GAAM,CACdA,EAAE,cAAc,IAAM,oCAAsC,mBAAmBL,EAAiB,cAAgB,GAAG,CACrH,IAEJ,EACAyC,OAAC,OAAI,UAAU,mHACb,UAAAC,MAAC,OAAI,UAAU,2CAA2C,EAC1DA,MAACI,EAAA,CACC,OAAO,WACP,WAAY,GACZ,eAAgB/B,EAChB,eAAgB,GAChB,KAAK,SACL,SAAQ,GACR,UAAU,yCAEZ2B,MAAC,KAAE,UAAU,4EAA4E,GAC3F,GACF,EACAD,OAAC,OAAI,UAAU,kCACb,UAAAC,MAAC,KAAE,UAAU,yDAAyD,6BAAiB,EACvFA,MAAC,KAAE,UAAU,iFAAiF,0EAE9F,GACF,GACF,EAEAD,OAAC,OAAI,UAAU,YACb,UAAAA,OAAC,OAAI,UAAU,YACb,UAAAC,MAAC,SAAM,UAAU,uEAAuE,yBAAa,EACrGA,MAAC,SACC,KAAK,OACL,SAAQ,GACR,MAAO1C,EAAiB,aACxB,SAAWK,GAAMJ,EAAoB,CAAE,GAAGD,EAAkB,aAAcK,EAAE,OAAO,MAAO,EAC1F,UAAU,wLACZ,EACF,EAEAoC,OAAC,OAAI,UAAU,YACb,UAAAC,MAAC,SAAM,UAAU,uEAAuE,2BAAe,EACvGA,MAAC,UACC,SAAQ,GACR,MAAO1C,EAAiB,iBACxB,SAAWK,GAAMJ,EAAoB,CAAE,GAAGD,EAAkB,iBAAkBK,EAAE,OAAO,MAAO,EAC9F,UAAU,uMAET,SAAAH,EAAW,IAAI6C,GAAKL,MAAC,UAAe,MAAOK,EAAI,SAAAA,CAAA,EAAdA,CAAgB,CAAS,GAC7D,EACF,EAEAN,OAAC,OAAI,UAAU,YACb,UAAAC,MAAC,SAAM,UAAU,uEAAuE,2CAA+B,EACvHA,MAAC,YACC,KAAM,EACN,MAAO1C,EAAiB,oBACxB,SAAWK,GAAMJ,EAAoB,CAAE,GAAGD,EAAkB,oBAAqBK,EAAE,OAAO,MAAO,EACjG,UAAU,6LACV,YAAY,6BACd,EACF,GACF,EAEAoC,OAAC,OAAI,UAAU,kBACb,UAAAC,MAAC,UACC,KAAK,SACL,QAAS,IAAMjD,EAAqB,EAAK,EACzC,UAAU,iLACX,oBAGDiD,MAAC,UACC,KAAK,SACL,SAAUhD,EACV,UAAU,8OAET,WACCgD,MAAC,KAAE,UAAU,wCAAwC,EAErDD,OAAAO,WAAA,CACE,UAAAN,MAAC,KAAE,UAAU,yBAAyB,EAAI,wBAE5C,GAEJ,EACF,GACF,GACF,EACF,EAIFA,MAAC,OAAI,UAAU,6DACZ,UACC,CAAE,MAAO,kBAAmB,MAAOb,EAAM,MAAO,KAAM,yBAA0B,MAAO,+BACvF,CAAE,MAAO,kBAAmB,MAAOA,EAAM,OAAQ,KAAM,uBAAwB,MAAO,6BACtF,CAAE,MAAO,mBAAoB,MAAOA,EAAM,MAAM,iBAAkB,KAAM,cAAe,MAAO,kCAAkC,EAChI,IAAI,CAACoB,EAAMC,IACXT,OAAC,OAAY,UAAU,6NACrB,UAAAC,MAAC,OAAI,UAAW,sDAAsDO,EAAK,KAAK,0FAA2F,SAC1K,OACC,UAAAP,MAAC,KAAE,UAAU,sEAAuE,SAAAO,EAAK,MAAM,EAC/FP,MAAC,KAAE,UAAU,mEAAoE,WAAK,MAAM,GAC9F,EACAA,MAAC,OAAI,UAAW,+BAA+BO,EAAK,KAAK,gHACvD,SAAAP,MAAC,KAAE,UAAW,GAAGO,EAAK,IAAI,YAAa,EACzC,IARQC,CASV,CACD,EACH,EAEAT,OAAC,OAAI,UAAU,aACb,UAAAA,OAAC,OAAI,UAAU,sHACb,UAAAA,OAAC,MAAG,UAAU,2FAA2F,8BAEvGA,OAAC,QAAK,UAAU,uIAAwI,UAAAnB,EAAS,OAAO,UAAM,GAChL,EACAmB,OAAC,OAAI,UAAU,0BACb,UAAAC,MAAC,QAAK,UAAU,oDAAoD,EACpEA,MAAC,QAAK,UAAU,iEAAiE,yBAAa,GAChG,GACF,QAEC,OACE,SAAAnB,EACCkB,OAAC,OAAI,UAAU,mCACb,UAAAC,MAAC,OAAI,UAAU,6GAA6G,EAC5HA,MAAC,KAAE,UAAU,iEAAiE,wCAA4B,GAC5G,EACEpB,EAAS,SAAW,EACtBmB,OAAC,OAAI,UAAU,mHACb,UAAAC,MAAC,OAAI,UAAU,2GACb,eAAC,KAAE,UAAU,iEAAiE,EAChF,EACAA,MAAC,MAAG,UAAU,uEAAuE,6BAAiB,EACtGA,MAAC,KAAE,UAAU,iGAAiG,0GAA8F,EAC5MA,MAACG,EAAA,CACC,GAAG,sBACH,UAAU,4KACX,sCAED,EACF,EAEAH,MAAC,OAAI,UAAU,0BACZ,SAAApB,EAAS,IAAK6B,GACbV,OAAC,OAAqB,UAAU,2OAE9B,UAAAA,OAAC,OAAI,UAAU,oJACZ,UAAAU,EAAQ,SAAS,CAAC,EACjBT,MAAC,OACC,IAAKE,EAAqBO,EAAQ,OAAO,CAAC,EAAG,IAAK,EAAE,EACpD,IAAKA,EAAQ,KACb,UAAU,6FAGX,OAAI,UAAU,oFACb,SAAAT,MAAC,KAAE,UAAU,2BAA2B,EAC1C,QAED,OAAI,UAAU,wBACb,SAAAA,MAAC,QAAK,UAAW,mFAAmFS,EAAQ,UAAY,4BAA8B,yBAAyB,GAC5K,WAAQ,UAAY,SAAW,UAClC,EACF,GACF,EAEAV,OAAC,OAAI,UAAU,8CACb,UAAAA,OAAC,OAAI,UAAU,sEACb,UAAAA,OAAC,OACC,UAAAC,MAAC,MAAG,UAAU,8JAA+J,SAAAS,EAAQ,KAAK,EAC1LV,OAAC,OAAI,UAAU,oCACb,UAAAA,OAAC,OAAI,UAAU,2FACb,UAAAC,MAAC,KAAE,UAAU,+CAA+C,EAC3DS,EAAQ,aAAe,EAAE,UAC5B,EACAT,MAAC,QAAK,UAAU,sDAAsD,EACtEA,MAAC,QAAK,UAAU,qFAAsF,WAAQ,SAAS,GACzH,GACF,EACAD,OAAC,OAAI,UAAU,gBACb,UAAAC,MAAC,KAAE,UAAU,mEACV,SAAAS,EAAQ,aAAe,QACtBV,OAAAO,WAAA,CACE,UAAAN,MAAC,QAAK,UAAU,0DAA0D,eAAG,EAC5ES,EAAQ,OAAO,gBAAe,EACjC,EAEA,aAEJ,EACAT,MAAC,KAAE,UAAU,sEAAuE,WAAQ,aAAe,QAAU,cAAgB,mBAAmB,GAC1J,GACF,EAEAD,OAAC,OAAI,UAAU,kCACb,UAAAA,OAAC,UACC,QAAS,IAAMhE,EAAS,wBAAwB0E,EAAQ,EAAE,EAAE,EAC5D,UAAU,gTAEV,UAAAT,MAAC,KAAE,UAAU,yBAAyB,EAAI,kBAG5CD,OAAC,UACC,QAAS,IAAMH,EAAmBa,EAAQ,GAAIA,EAAQ,SAAS,EAC/D,UAAW,uJAAuJA,EAAQ,UAAY,oHAAsH,6GAC1S,GAEF,UAAAT,MAAC,KAAE,UAAWS,EAAQ,UAAY,4BAA8B,wBAAyB,EACxFA,EAAQ,UAAY,eAAiB,qBAExCT,MAAC,UACC,QAAS,IAAMF,EAAaW,EAAQ,EAAE,EACtC,UAAU,sPACV,MAAM,iBAEN,SAAAT,MAAC,KAAE,UAAU,6BAA6B,GAC5C,EACF,GACF,IAzEQS,EAAQ,EA0ElB,CACD,EACH,EAEJ,GACF,GACF,GACF,CAEJ","names":["SellerDashboard","user","profile","useAuth","navigate","useNavigate","useEffect","data","error","supabase","statusSubscription","payload","notification","setNotification","useState","sellerProfile","setSellerProfile","updatingLogo","setUpdatingLogo","showSettingsModal","setShowSettingsModal","isSavingSettings","setIsSavingSettings","logoPreview","setLogoPreview","logoFile","setLogoFile","settingsFormData","setSettingsFormData","categories","fetchSellerProfile","handleProfileUpdate","e","finalLogoUrl","uploadImage","compressImage","__vitePreload","n","compressed","url","profileError","err","handleLogoSelect","file","reader","presenceChannel","key","newPresences","timer","products","isLoading","useProducts","updateProductMutation","useUpdateProduct","deleteProductMutation","useDeleteProduct","stats","p","sum","adminUpdateProduct","productId","updates","isBypass","secret","adminDeleteProduct","handleToggleStatus","currentStatus","handleDelete","jsxs","jsx","Navbar","getOptimizedImageUrl","Link","ImageUploader","c","Fragment","stat","i","product"],"ignoreList":[],"sources":["../../src/pages/seller/SellerDashboard.tsx"],"sourcesContent":["import { useNavigate, Link } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport Navbar from '../../components/feature/Navbar';\r\nimport { useProducts, useUpdateProduct, useDeleteProduct } from '../../hooks/useProducts';\r\nimport { getOptimizedImageUrl } from '../../lib/imageOptimization';\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from '../../lib/supabase';\r\nimport ImageUploader from '../../components/base/ImageUploader';\r\n\r\nexport default function SellerDashboard() {\r\n  const { user, profile } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  // Redirect if not a seller\r\n  useEffect(() => {\r\n    if (profile && profile.role !== 'seller' && profile.role !== 'admin' && profile.role !== 'super_admin') {\r\n      navigate('/seller/status');\r\n    }\r\n  }, [profile, navigate]);\r\n\r\n  // Immediate protection: If application status changes (e.g. Admin re-evaluates), kick back to status page\r\n  useEffect(() => {\r\n    if (!user || profile?.role === 'admin' || profile?.role === 'super_admin') return;\r\n\r\n    const isBypass = localStorage.getItem('sys_admin_bypass') === 'true';\r\n    if (isBypass) return;\r\n\r\n    const checkAppStatus = async () => {\r\n      const { data, error } = await supabase\r\n        .from('seller_applications')\r\n        .select('status')\r\n        .eq('user_id', user.id)\r\n        .maybeSingle();\r\n\r\n      if (!error && data && data.status !== 'approved') {\r\n        navigate('/seller/status');\r\n      } else if (!error && !data) {\r\n        // If no application record exists at all, they shouldn't be here\r\n        navigate('/seller/status');\r\n      }\r\n    };\r\n\r\n    checkAppStatus();\r\n\r\n    const statusSubscription = supabase\r\n      .channel(`seller-status-guard-${user.id}`)\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*', // Listen for ALL changes including DELETE\r\n          schema: 'public',\r\n          table: 'seller_applications',\r\n          filter: `user_id=eq.${user.id}`,\r\n        },\r\n        (payload: any) => {\r\n          if (payload.eventType === 'DELETE') {\r\n            navigate('/seller/status');\r\n          } else if (payload.new.status !== 'approved') {\r\n            navigate('/seller/status');\r\n          }\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(statusSubscription);\r\n    };\r\n  }, [user, profile, navigate]);\r\n\r\n  const [notification, setNotification] = useState<{ type: 'success' | 'error' | 'info', message: string } | null>(null);\r\n\r\n  const [sellerProfile, setSellerProfile] = useState<any>(null);\r\n  const [updatingLogo, setUpdatingLogo] = useState(false);\r\n\r\n  // Edit Profile States\r\n  const [showSettingsModal, setShowSettingsModal] = useState(false);\r\n  const [isSavingSettings, setIsSavingSettings] = useState(false);\r\n  const [logoPreview, setLogoPreview] = useState<string | null>(null);\r\n  const [logoFile, setLogoFile] = useState<File | null>(null);\r\n  const [settingsFormData, setSettingsFormData] = useState({\r\n    businessName: '',\r\n    businessCategory: '',\r\n    businessDescription: ''\r\n  });\r\n\r\n  const categories = [\r\n    'Electronics', 'Fashion & Clothing', 'Books & Stationery', 'Food & Beverages',\r\n    'Accommodation', 'Services', 'Sports & Fitness', 'Beauty & Personal Care',\r\n    'Home & Living', 'Other'\r\n  ];\r\n\r\n  const fetchSellerProfile = async () => {\r\n    if (user?.id) {\r\n      const { data } = await supabase\r\n        .from('seller_profiles')\r\n        .select('*')\r\n        .eq('user_id', user.id)\r\n        .maybeSingle();\r\n      setSellerProfile(data);\r\n      if (data) {\r\n        setSettingsFormData({\r\n          businessName: data.business_name || '',\r\n          businessCategory: data.business_category || '',\r\n          businessDescription: data.business_description || ''\r\n        });\r\n        // Start with existing logo URL as preview\r\n        setLogoPreview(data.business_logo || null);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchSellerProfile();\r\n  }, [user]);\r\n\r\n  const handleProfileUpdate = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!user) return;\r\n    setIsSavingSettings(true);\r\n\r\n    try {\r\n      let finalLogoUrl = sellerProfile?.business_logo;\r\n\r\n      // 1. Upload new logo if selected\r\n      if (logoFile) {\r\n        const { uploadImage, compressImage } = await import('../../lib/uploadImage');\r\n        const compressed = await compressImage(logoFile);\r\n        const { url } = await uploadImage(compressed, 'profiles', user.id);\r\n        finalLogoUrl = url;\r\n      }\r\n\r\n      // 2. Update seller_profiles\r\n      const { error: profileError } = await supabase\r\n        .from('seller_profiles')\r\n        .update({\r\n          business_name: settingsFormData.businessName,\r\n          business_category: settingsFormData.businessCategory,\r\n          business_description: settingsFormData.businessDescription,\r\n          business_logo: finalLogoUrl,\r\n          updated_at: new Date().toISOString()\r\n        })\r\n        .eq('user_id', user.id);\r\n\r\n      if (profileError) throw profileError;\r\n\r\n      // 3. Sync to seller_applications so admins see the update\r\n      await supabase\r\n        .from('seller_applications')\r\n        .update({\r\n          business_name: settingsFormData.businessName,\r\n          business_category: settingsFormData.businessCategory,\r\n          business_description: settingsFormData.businessDescription,\r\n          business_logo: finalLogoUrl,\r\n          updated_at: new Date().toISOString()\r\n        })\r\n        .eq('user_id', user.id);\r\n\r\n      setNotification({ type: 'success', message: 'Business settings updated successfully!' });\r\n      await fetchSellerProfile();\r\n      setShowSettingsModal(false);\r\n      setLogoPreview(null);\r\n      setLogoFile(null);\r\n    } catch (err: any) {\r\n      console.error('Error updating settings:', err);\r\n      setNotification({ type: 'error', message: 'Update failed: ' + err.message });\r\n    } finally {\r\n      setIsSavingSettings(false);\r\n    }\r\n  };\r\n\r\n  const handleLogoSelect = (file: File) => {\r\n    setLogoFile(file);\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => {\r\n      setLogoPreview(reader.result as string);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Subscribe to Global Alerts\r\n    const presenceChannel = supabase.channel('online-users');\r\n    presenceChannel\r\n      .on('presence', { event: 'join' }, ({ key, newPresences }) => {\r\n        const user = newPresences[0];\r\n        if (user && user.user_id !== profile?.id) {\r\n          setNotification({\r\n            type: 'info',\r\n            message: `${user.full_name || 'A user'} came online`\r\n          });\r\n        }\r\n      })\r\n      .subscribe();\r\n\r\n    return () => {\r\n      supabase.removeChannel(presenceChannel);\r\n    };\r\n  }, [profile]);\r\n\r\n  useEffect(() => {\r\n    if (notification) {\r\n      const timer = setTimeout(() => setNotification(null), 4000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [notification]);\r\n\r\n  const { data: products = [], isLoading } = useProducts({\r\n    sellerId: user?.id\r\n  });\r\n\r\n  const updateProductMutation = useUpdateProduct();\r\n  const deleteProductMutation = useDeleteProduct();\r\n\r\n  const stats = {\r\n    total: products.length,\r\n    active: products.filter(p => p.is_active).length,\r\n    views: products.reduce((sum, p) => sum + (p.views_count || 0), 0)\r\n  };\r\n\r\n  if (!user || (!['seller', 'admin', 'super_admin', 'publisher_seller'].includes(profile?.role || ''))) {\r\n    navigate('/seller/status');\r\n    return null;\r\n  }\r\n\r\n  // Helpers for System Admin Bypass\r\n  const adminUpdateProduct = async (productId: string, updates: any) => {\r\n    const isBypass = localStorage.getItem('sys_admin_bypass') === 'true';\r\n    const secret = localStorage.getItem('sys_admin_secret');\r\n    if (isBypass && secret) {\r\n      const { error } = await supabase.rpc('admin_update_product', {\r\n        product_id: productId,\r\n        product_data: updates,\r\n        secret_key: secret\r\n      });\r\n      if (error) throw error;\r\n      // Manually invalidate since we bypassed the mutation hook\r\n      supabase.channel('products-changes').send({\r\n        type: 'broadcast',\r\n        event: 'change',\r\n        payload: {}\r\n      });\r\n      window.location.reload(); // Hard refresh to show change since RPC doesn't trigger react-query easily here\r\n      return;\r\n    }\r\n    return updateProductMutation.mutate({ id: productId, updates });\r\n  };\r\n\r\n  const adminDeleteProduct = async (productId: string) => {\r\n    const isBypass = localStorage.getItem('sys_admin_bypass') === 'true';\r\n    const secret = localStorage.getItem('sys_admin_secret');\r\n    if (isBypass && secret) {\r\n      const { error } = await supabase.rpc('admin_delete_product', {\r\n        target_id: productId,\r\n        secret_key: secret\r\n      });\r\n      if (error) throw error;\r\n      window.location.reload();\r\n      return;\r\n    }\r\n    return deleteProductMutation.mutate(productId);\r\n  };\r\n\r\n  const handleToggleStatus = async (productId: string, currentStatus: boolean) => {\r\n    try {\r\n      await adminUpdateProduct(productId, { is_active: !currentStatus });\r\n      setNotification({ type: 'success', message: `Product ${!currentStatus ? 'published' : 'hidden'} successfully` });\r\n    } catch (err: any) {\r\n      setNotification({ type: 'error', message: err.message || 'Failed to update status' });\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (productId: string) => {\r\n    if (window.confirm('Delete this product? This action cannot be undone.')) {\r\n      try {\r\n        await adminDeleteProduct(productId);\r\n        setNotification({ type: 'success', message: 'Product deleted successfully' });\r\n      } catch (err: any) {\r\n        setNotification({ type: 'error', message: err.message || 'Failed to delete product' });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white dark:bg-slate-900 transition-colors duration-300 pb-20\">\r\n      <Navbar />\r\n\r\n      {/* Notification Toast */}\r\n      {notification && (\r\n        <div className={`fixed top-24 right-4 md:right-8 z-50 animate-in fade-in slide-in-from-right-8 duration-300 px-6 py-4 rounded-2xl shadow-2xl border flex items-center gap-3 backdrop-blur-md ${notification.type === 'success' ? 'bg-emerald-500/90 border-emerald-400/50 text-white' :\r\n          notification.type === 'error' ? 'bg-rose-500/90 border-rose-400/50 text-white' :\r\n            'bg-blue-500/90 border-blue-400/50 text-white'\r\n          }`}>\r\n          <i className={`${notification.type === 'success' ? 'ri-checkbox-circle-fill' : notification.type === 'error' ? 'ri-error-warning-fill' : 'ri-notification-3-fill'} text-xl`}></i>\r\n          <span className=\"font-bold text-sm tracking-wide\">{notification.message}</span>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-12 pt-32 md:pt-40 box-border\">\r\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-10 mb-16 md:mb-24 text-center md:text-left bg-slate-50 dark:bg-slate-800/50 p-8 md:p-12 rounded-[3rem] border border-slate-100 dark:border-slate-800 shadow-sm\">\r\n          <div className=\"flex flex-col md:flex-row items-center gap-8 flex-1\">\r\n            <div className=\"relative group/logo\">\r\n              <div className={`w-32 h-32 rounded-3xl overflow-hidden shadow-2xl border-4 border-white dark:border-slate-700 bg-white transition-all ${updatingLogo ? 'opacity-50' : ''}`}>\r\n                {sellerProfile?.business_logo ? (\r\n                  <img\r\n                    src={getOptimizedImageUrl(sellerProfile.business_logo, 200, 85)}\r\n                    alt={sellerProfile.business_name}\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"w-full h-full bg-blue-600 flex items-center justify-center text-white text-4xl\">\r\n                    <i className=\"ri-store-3-line\"></i>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Modal Trigger Overlay */}\r\n              <button\r\n                onClick={() => setShowSettingsModal(true)}\r\n                className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover/logo:opacity-100 transition-opacity z-10\"\r\n              >\r\n                <div className=\"bg-black/60 backdrop-blur-sm inset-0 absolute rounded-3xl\"></div>\r\n                <div className=\"relative z-30 text-white text-center\">\r\n                  <i className=\"ri-edit-circle-line text-2xl mb-1 block\"></i>\r\n                  <span className=\"text-[8px] font-black uppercase tracking-widest leading-none\">Edit Profile</span>\r\n                </div>\r\n              </button>\r\n\r\n              {updatingLogo && (\r\n                <div className=\"absolute inset-0 flex items-center justify-center z-40\">\r\n                  <i className=\"ri-loader-4-line animate-spin text-3xl text-blue-600\"></i>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div>\r\n              <div className=\"inline-flex items-center gap-2 px-4 py-1.5 bg-slate-900 dark:bg-blue-600 text-white text-[10px] font-bold uppercase tracking-widest rounded-full mb-6\">\r\n                <i className=\"ri-shield-star-line text-blue-400\"></i>\r\n                Official Seller Portal\r\n              </div>\r\n              <h1 className=\"text-3xl md:text-5xl font-bold text-slate-900 dark:text-white leading-tight tracking-tight mb-4\">\r\n                {sellerProfile?.business_name || 'Merchant'}<br />\r\n                <span className=\"text-blue-600\">Operations.</span>\r\n              </h1>\r\n              <p className=\"text-slate-400 dark:text-slate-500 font-bold uppercase tracking-widest text-[10px]\">\r\n                {sellerProfile?.business_category || 'General'} • Established {new Date(sellerProfile?.created_at || Date.now()).getFullYear()}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex flex-col gap-3\">\r\n            <button\r\n              onClick={() => setShowSettingsModal(true)}\r\n              className=\"px-10 py-4 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 font-bold text-xs uppercase tracking-widest rounded-2xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-all flex items-center justify-center gap-2 active:scale-95\"\r\n            >\r\n              <i className=\"ri-settings-4-line text-lg text-blue-500\"></i>\r\n              <span>Edit Business Information</span>\r\n            </button>\r\n            <Link\r\n              to=\"/seller/add-product\"\r\n              className=\"group px-10 py-5 bg-blue-600 text-white font-bold text-xs uppercase tracking-widest rounded-2xl hover:bg-blue-700 transition-all flex items-center justify-center gap-4 active:scale-95 shadow-lg shadow-blue-500/20\"\r\n            >\r\n              <span>Add New Product</span>\r\n              <i className=\"ri-add-line text-xl\"></i>\r\n            </Link>\r\n            {(profile?.role === 'admin' || profile?.role === 'super_admin') && (\r\n              <button\r\n                onClick={() => navigate('/admin/dashboard')}\r\n                className=\"group px-10 py-4 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 font-bold text-xs uppercase tracking-widest rounded-2xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-all flex items-center justify-center gap-2 active:scale-95\"\r\n              >\r\n                <i className=\"ri-arrow-left-line text-lg\"></i>\r\n                <span>Admin Dashboard</span>\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Business Settings Modal */}\r\n        {showSettingsModal && (\r\n          <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-md animate-in fade-in duration-300\">\r\n            <div className=\"bg-white dark:bg-slate-900 w-full max-w-2xl rounded-[2.5rem] shadow-2xl border border-slate-200 dark:border-slate-800 overflow-hidden animate-in zoom-in-95 duration-300\">\r\n              <div className=\"px-10 py-8 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center\">\r\n                <div>\r\n                  <h2 className=\"text-2xl font-black text-slate-900 dark:text-white tracking-tight\">Business Settings</h2>\r\n                  <p className=\"text-[10px] font-bold text-blue-600 uppercase tracking-widest mt-1\">Configure your merchant identity</p>\r\n                </div>\r\n                <button\r\n                  onClick={() => setShowSettingsModal(false)}\r\n                  className=\"w-12 h-12 rounded-2xl bg-slate-50 dark:bg-slate-800 text-slate-400 hover:text-rose-500 transition-colors flex items-center justify-center\"\r\n                >\r\n                  <i className=\"ri-close-line text-2xl\"></i>\r\n                </button>\r\n              </div>\r\n\r\n              <form onSubmit={handleProfileUpdate} className=\"p-10 space-y-8 overflow-y-auto max-h-[70vh]\">\r\n                <div className=\"flex flex-col sm:flex-row items-center gap-8\">\r\n                  <div className=\"relative group/edit-logo\">\r\n                    <div className=\"w-32 h-32 rounded-3xl bg-slate-100 dark:bg-slate-800 overflow-hidden border-4 border-white dark:border-slate-700 shadow-xl\">\r\n                      <img\r\n                        src={logoPreview || getOptimizedImageUrl(sellerProfile?.business_logo, 200, 85)}\r\n                        className=\"w-full h-full object-cover\"\r\n                        alt=\"Preview\"\r\n                        onError={(e) => {\r\n                          e.currentTarget.src = 'https://ui-avatars.com/api/?name=' + encodeURIComponent(settingsFormData.businessName || 'B');\r\n                        }}\r\n                      />\r\n                    </div>\r\n                    <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover/edit-logo:opacity-100 transition-opacity\">\r\n                      <div className=\"bg-black/40 inset-0 absolute rounded-2xl\"></div>\r\n                      <ImageUploader\r\n                        folder=\"profiles\"\r\n                        autoUpload={false}\r\n                        onFileSelected={handleLogoSelect}\r\n                        hideInternalUI={true}\r\n                        size=\"custom\"\r\n                        noBorder\r\n                        className=\"absolute inset-0 z-20 cursor-pointer\"\r\n                      />\r\n                      <i className=\"ri-camera-lens-line text-white text-3xl relative z-10 pointer-events-none\"></i>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex-1 text-center sm:text-left\">\r\n                    <p className=\"text-sm font-black text-slate-900 dark:text-white mb-2\">Merchant Branding</p>\r\n                    <p className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-relaxed\">\r\n                      Upload your business logo. Recommended size is 500x500 pixels.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                  <div className=\"space-y-2\">\r\n                    <label className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2\">Business Name</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      required\r\n                      value={settingsFormData.businessName}\r\n                      onChange={(e) => setSettingsFormData({ ...settingsFormData, businessName: e.target.value })}\r\n                      className=\"w-full h-14 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-blue-500/30 rounded-2xl px-6 font-bold outline-none text-slate-900 dark:text-white transition-all\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <label className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2\">Industry Sector</label>\r\n                    <select\r\n                      required\r\n                      value={settingsFormData.businessCategory}\r\n                      onChange={(e) => setSettingsFormData({ ...settingsFormData, businessCategory: e.target.value })}\r\n                      className=\"w-full h-14 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-blue-500/30 rounded-2xl px-6 font-bold outline-none text-slate-900 dark:text-white transition-all appearance-none\"\r\n                    >\r\n                      {categories.map(c => <option key={c} value={c}>{c}</option>)}\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <label className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-2\">Mission Statement (Description)</label>\r\n                    <textarea\r\n                      rows={4}\r\n                      value={settingsFormData.businessDescription}\r\n                      onChange={(e) => setSettingsFormData({ ...settingsFormData, businessDescription: e.target.value })}\r\n                      className=\"w-full p-6 bg-slate-50 dark:bg-slate-800 border-2 border-transparent focus:border-blue-500/30 rounded-2xl font-bold outline-none text-slate-900 dark:text-white transition-all resize-none\"\r\n                      placeholder=\"Describe your business...\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex gap-4 pt-4\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowSettingsModal(false)}\r\n                    className=\"flex-1 h-16 bg-slate-50 dark:bg-slate-800 text-slate-500 font-bold uppercase tracking-widest text-[10px] rounded-2xl hover:bg-slate-100 dark:hover:bg-slate-700 transition-all\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={isSavingSettings}\r\n                    className=\"flex-[2] h-16 bg-blue-600 text-white font-black uppercase tracking-[0.2em] text-[10px] rounded-2xl hover:bg-blue-700 shadow-xl shadow-blue-500/20 active:scale-95 transition-all disabled:opacity-50 flex items-center justify-center gap-3\"\r\n                  >\r\n                    {isSavingSettings ? (\r\n                      <i className=\"ri-loader-4-line animate-spin text-xl\"></i>\r\n                    ) : (\r\n                      <>\r\n                        <i className=\"ri-save-3-line text-lg\"></i>\r\n                        Save Profile Changes\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* System Stats Section */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-24\">\r\n          {[\r\n            { label: 'Inventory Count', value: stats.total, icon: 'ri-shopping-bag-3-fill', color: 'from-slate-700 to-slate-900' },\r\n            { label: 'Published Items', value: stats.active, icon: 'ri-check-double-line', color: 'from-blue-500 to-blue-600' },\r\n            { label: 'Cumulative Views', value: stats.views.toLocaleString(), icon: 'ri-eye-line', color: 'from-emerald-500 to-emerald-600' }\r\n          ].map((stat, i) => (\r\n            <div key={i} className=\"relative bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 p-8 rounded-[2rem] shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all flex items-center justify-between overflow-hidden group\">\r\n              <div className={`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br ${stat.color} opacity-[0.05] rounded-bl-full group-hover:scale-110 transition-transform duration-500`}></div>\r\n              <div>\r\n                <p className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2\">{stat.label}</p>\r\n                <p className=\"text-3xl font-bold text-slate-900 dark:text-white tracking-tight\">{stat.value}</p>\r\n              </div>\r\n              <div className={`w-14 h-14 bg-gradient-to-tr ${stat.color} rounded-2xl flex items-center justify-center text-white shadow-lg group-hover:scale-110 transition-transform`}>\r\n                <i className={`${stat.icon} text-2xl`}></i>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"space-y-12\">\r\n          <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-6 pb-8 border-b border-slate-50 dark:border-slate-800\">\r\n            <h2 className=\"text-2xl font-bold text-slate-900 dark:text-white tracking-tight flex items-center gap-4\">\r\n              Merchant Products\r\n              <span className=\"text-sm font-bold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-4 py-1.5 rounded-full uppercase tracking-widest\">{products.length} Total</span>\r\n            </h2>\r\n            <div className=\"flex items-center gap-3\">\r\n              <span className=\"w-2 h-2 bg-emerald-500 rounded-full animate-pulse\"></span>\r\n              <span className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest\">System Online</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            {isLoading ? (\r\n              <div className=\"py-32 flex flex-col items-center\">\r\n                <div className=\"w-10 h-10 border-4 border-slate-100 dark:border-slate-800 border-t-blue-600 rounded-full animate-spin mb-8\"></div>\r\n                <p className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest\">Retrieving Inventory Data...</p>\r\n              </div>\r\n            ) : products.length === 0 ? (\r\n              <div className=\"py-24 text-center bg-slate-50 dark:bg-slate-800/50 rounded-[2.5rem] border border-slate-50 dark:border-slate-800\">\r\n                <div className=\"w-16 h-16 bg-white dark:bg-slate-800 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-sm\">\r\n                  <i className=\"ri-folder-add-line text-3xl text-slate-200 dark:text-slate-600\"></i>\r\n                </div>\r\n                <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-2 tracking-tight\">No Listings Found</h3>\r\n                <p className=\"text-slate-500 dark:text-slate-400 max-w-sm mx-auto mb-8 font-semibold text-xs leading-relaxed\">Your inventory is currently empty. Add your first product to begin trading on the marketplace.</p>\r\n                <Link\r\n                  to=\"/seller/add-product\"\r\n                  className=\"px-8 py-4 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition-all shadow-lg shadow-blue-500/10 active:scale-95 uppercase tracking-widest text-[10px]\"\r\n                >\r\n                  Create Your First Listing\r\n                </Link>\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-1 gap-10\">\r\n                {products.map((product) => (\r\n                  <div key={product.id} className=\"group relative bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-[2rem] p-6 transition-all hover:shadow-xl hover:border-blue-100 dark:hover:border-blue-900 flex flex-col lg:flex-row items-center gap-10\">\r\n                    {/* Product Image */}\r\n                    <div className=\"w-full lg:w-48 h-48 rounded-2xl overflow-hidden bg-slate-50 dark:bg-slate-700 border border-slate-50 dark:border-slate-700 flex-shrink-0 relative\">\r\n                      {product.images?.[0] ? (\r\n                        <img\r\n                          src={getOptimizedImageUrl(product.images[0], 400, 85)}\r\n                          alt={product.name}\r\n                          className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105\"\r\n                        />\r\n                      ) : (\r\n                        <div className=\"w-full h-full flex items-center justify-center text-slate-200 dark:text-slate-600\">\r\n                          <i className=\"ri-image-2-line text-4xl\"></i>\r\n                        </div>\r\n                      )}\r\n                      <div className=\"absolute top-3 left-3\">\r\n                        <span className={`px-2.5 py-1 text-[9px] font-bold uppercase tracking-widest rounded-lg shadow-md ${product.is_active ? 'bg-emerald-500 text-white' : 'bg-slate-900 text-white'}`}>\r\n                          {product.is_active ? 'Active' : 'Private'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex-1 w-full flex flex-col justify-between\">\r\n                      <div className=\"flex flex-col md:flex-row md:items-start justify-between gap-6 mb-8\">\r\n                        <div>\r\n                          <h3 className=\"text-xl md:text-2xl font-bold text-slate-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors tracking-tight mb-2\">{product.name}</h3>\r\n                          <div className=\"flex flex-wrap items-center gap-4\">\r\n                            <div className=\"flex items-center gap-1.5 text-[10px] font-bold text-slate-400 uppercase tracking-widest\">\r\n                              <i className=\"ri-eye-line text-blue-600 dark:text-blue-400\"></i>\r\n                              {product.views_count || 0} Views\r\n                            </div>\r\n                            <span className=\"w-1 h-1 bg-slate-300 dark:bg-slate-600 rounded-full\"></span>\r\n                            <span className=\"text-[10px] font-bold text-slate-500 dark:text-slate-500 uppercase tracking-widest\">{product.category}</span>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"md:text-right\">\r\n                          <p className=\"text-2xl font-bold text-slate-900 dark:text-white tracking-tight\">\r\n                            {product.price_type === 'fixed' ? (\r\n                              <>\r\n                                <span className=\"text-sm text-blue-600 dark:text-blue-400 font-bold mr-1\">GH₵</span>\r\n                                {product.price?.toLocaleString()}\r\n                              </>\r\n                            ) : (\r\n                              'Negotiable'\r\n                            )}\r\n                          </p>\r\n                          <p className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1\">{product.price_type === 'fixed' ? 'Fixed Price' : 'Flexible Pricing'}</p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                        <button\r\n                          onClick={() => navigate(`/seller/edit-product/${product.id}`)}\r\n                          className=\"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-slate-50 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-bold rounded-xl hover:bg-slate-100 dark:hover:bg-slate-600 transition-all border border-slate-100 dark:border-slate-600 active:scale-95 uppercase tracking-widest text-[10px]\"\r\n                        >\r\n                          <i className=\"ri-edit-line text-base\"></i>\r\n                          Edit Details\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleToggleStatus(product.id, product.is_active)}\r\n                          className={`flex-1 flex items-center justify-center gap-2 px-6 py-3.5 font-bold rounded-xl transition-all active:scale-95 uppercase tracking-widest text-[10px] ${product.is_active ? 'bg-amber-50 text-amber-700 hover:bg-amber-100 dark:bg-amber-900/20 dark:text-amber-400 dark:hover:bg-amber-900/30' : 'bg-blue-50 text-blue-700 hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-400 dark:hover:bg-blue-900/30'\r\n                            }`}\r\n                        >\r\n                          <i className={product.is_active ? 'ri-eye-off-line text-base' : 'ri-eye-line text-base'}></i>\r\n                          {product.is_active ? 'Hide Listing' : 'Publish Listing'}\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleDelete(product.id)}\r\n                          className=\"sm:flex-none flex items-center justify-center w-12 h-12 bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 rounded-xl hover:bg-rose-600 hover:text-white transition-all border border-rose-100 dark:border-rose-900/30 active:scale-95\"\r\n                          title=\"Delete Listing\"\r\n                        >\r\n                          <i className=\"ri-delete-bin-line text-lg\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"file":"SellerDashboard-CxTaJCGM.js"}