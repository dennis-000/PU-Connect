{"version":3,"file":"useInternships-DIeQcykL.js","sources":["../../src/hooks/useInternships.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\r\nimport { supabase } from '../lib/supabase';\r\n\r\nexport type Internship = {\r\n    id: string;\r\n    title: string;\r\n    company: string;\r\n    location: string;\r\n    type: string;\r\n    source: string;\r\n    description: string;\r\n    url: string;\r\n    logo_url?: string;\r\n    posted_at: string;\r\n    created_at: string;\r\n    is_active: boolean;\r\n};\r\n\r\n// Fallback Mock Data (matches the database schema)\r\nconst MOCK_DATA: Internship[] = [\r\n    {\r\n        id: '1',\r\n        title: 'Software Engineering Intern',\r\n        company: 'Tech Co Ghana',\r\n        location: 'Accra, Ghana',\r\n        type: 'Full-time',\r\n        source: 'LinkedIn',\r\n        description: 'Join our dynamic team to build the future of fintech in Africa.',\r\n        posted_at: new Date(Date.now() - 1000 * 60 * 60 * 48).toISOString(), // 2 days ago\r\n        logo_url: 'https://ui-avatars.com/api/?name=Tech+Co&background=0D8ABC&color=fff',\r\n        url: '#',\r\n        created_at: new Date().toISOString(),\r\n        is_active: true\r\n    },\r\n    {\r\n        id: '2',\r\n        title: 'Data Science Intern',\r\n        company: 'Global Corp',\r\n        location: 'Remote (USA)',\r\n        type: 'Part-time',\r\n        source: 'LinkedIn',\r\n        description: 'Analyze large datasets and build predictive models.',\r\n        posted_at: new Date(Date.now() - 1000 * 60 * 60 * 24 * 5).toISOString(), // 5 days ago\r\n        logo_url: 'https://ui-avatars.com/api/?name=Global+Corp&background=6366f1&color=fff',\r\n        url: '#',\r\n        created_at: new Date().toISOString(),\r\n        is_active: true\r\n    },\r\n    {\r\n        id: '3',\r\n        title: 'Marketing Specialist Intern',\r\n        company: 'Sowutoum Media',\r\n        location: 'Sowutoum, Ghana',\r\n        type: 'On-site',\r\n        source: 'Direct',\r\n        description: 'Assist in managing social media campaigns for local businesses.',\r\n        posted_at: new Date(Date.now() - 1000 * 60 * 60 * 24 * 7).toISOString(),\r\n        logo_url: 'https://ui-avatars.com/api/?name=Sowutoum+Media&background=f43f5e&color=fff',\r\n        url: '#',\r\n        created_at: new Date().toISOString(),\r\n        is_active: true\r\n    },\r\n    {\r\n        id: '4',\r\n        title: 'Graphic Design Intern',\r\n        company: 'Creative Studio',\r\n        location: 'London, UK (Remote)',\r\n        type: 'Internship',\r\n        source: 'Abroad',\r\n        description: 'Create stunning visuals for international clients.',\r\n        posted_at: new Date(Date.now() - 1000 * 60 * 60 * 24 * 3).toISOString(),\r\n        logo_url: 'https://ui-avatars.com/api/?name=Creative+Studio&background=10b981&color=fff',\r\n        url: '#',\r\n        created_at: new Date().toISOString(),\r\n        is_active: true\r\n    }\r\n];\r\n\r\nexport function useInternships(filters?: { search?: string; type?: string }) {\r\n    return useQuery({\r\n        queryKey: ['internships', filters],\r\n        queryFn: async () => {\r\n            try {\r\n                let query = supabase\r\n                    .from('internships')\r\n                    .select('*')\r\n                    .eq('is_active', true)\r\n                    .order('posted_at', { ascending: false });\r\n\r\n                const { data, error } = await query;\r\n\r\n                if (error) {\r\n                    // Fallback to mock data if table doesn't exist yet (404/400)\r\n                    console.warn('Fetching internships failed (likely table missing), using mock data:', error);\r\n                    return MOCK_DATA;\r\n                }\r\n\r\n                // Return mixed data? No, probably either DB or Mock.\r\n                return data && data.length > 0 ? data : MOCK_DATA;\r\n            } catch (err) {\r\n                console.error('useInternships error:', err);\r\n                return MOCK_DATA;\r\n            }\r\n        },\r\n        staleTime: 1000 * 60 * 10, // 10 minutes\r\n    });\r\n}\r\n"],"names":["MOCK_DATA","useInternships","filters","useQuery","query","supabase","data","error","err"],"mappings":"uFAmBA,MAAMA,EAA0B,CAC5B,CACI,GAAI,IACJ,MAAO,8BACP,QAAS,gBACT,SAAU,eACV,KAAM,YACN,OAAQ,WACR,YAAa,kEACb,UAAW,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAO,GAAK,GAAK,EAAE,EAAE,YAAA,EACtD,SAAU,uEACV,IAAK,IACL,WAAY,IAAI,KAAA,EAAO,YAAA,EACvB,UAAW,EAAA,EAEf,CACI,GAAI,IACJ,MAAO,sBACP,QAAS,cACT,SAAU,eACV,KAAM,YACN,OAAQ,WACR,YAAa,sDACb,UAAW,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAO,GAAK,GAAK,GAAK,CAAC,EAAE,YAAA,EAC1D,SAAU,2EACV,IAAK,IACL,WAAY,IAAI,KAAA,EAAO,YAAA,EACvB,UAAW,EAAA,EAEf,CACI,GAAI,IACJ,MAAO,8BACP,QAAS,iBACT,SAAU,kBACV,KAAM,UACN,OAAQ,SACR,YAAa,kEACb,UAAW,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAO,GAAK,GAAK,GAAK,CAAC,EAAE,YAAA,EAC1D,SAAU,8EACV,IAAK,IACL,WAAY,IAAI,KAAA,EAAO,YAAA,EACvB,UAAW,EAAA,EAEf,CACI,GAAI,IACJ,MAAO,wBACP,QAAS,kBACT,SAAU,sBACV,KAAM,aACN,OAAQ,SACR,YAAa,qDACb,UAAW,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAO,GAAK,GAAK,GAAK,CAAC,EAAE,YAAA,EAC1D,SAAU,+EACV,IAAK,IACL,WAAY,IAAI,KAAA,EAAO,YAAA,EACvB,UAAW,EAAA,CAEnB,EAEO,SAASC,EAAeC,EAA8C,CACzE,OAAOC,EAAS,CACZ,SAAU,CAAC,cAAeD,CAAO,EACjC,QAAS,SAAY,CACjB,GAAI,CACA,IAAIE,EAAQC,EACP,KAAK,aAAa,EAClB,OAAO,GAAG,EACV,GAAG,YAAa,EAAI,EACpB,MAAM,YAAa,CAAE,UAAW,GAAO,EAE5C,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAA,EAAU,MAAMH,EAE9B,OAAIG,GAEA,QAAQ,KAAK,uEAAwEA,CAAK,EACnFP,GAIJM,GAAQA,EAAK,OAAS,EAAIA,EAAON,CAC5C,OAASQ,EAAK,CACV,eAAQ,MAAM,wBAAyBA,CAAG,EACnCR,CACX,CACJ,EACA,UAAW,IAAO,GAAK,EAAA,CAC1B,CACL"}