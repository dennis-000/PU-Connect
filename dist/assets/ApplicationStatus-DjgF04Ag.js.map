{"version":3,"file":"ApplicationStatus-DjgF04Ag.js","sources":["../../src/pages/seller/ApplicationStatus.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { supabase } from '../../lib/supabase';\r\nimport Navbar from '../../components/feature/Navbar';\r\n\r\ntype Application = {\r\n  id: string;\r\n  status: 'pending' | 'approved' | 'rejected';\r\n  business_name: string;\r\n  business_category: string;\r\n  business_description: string;\r\n  contact_phone: string;\r\n  contact_email: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n  admin_notes?: string;\r\n};\r\n\r\nexport default function ApplicationStatus() {\r\n  const navigate = useNavigate();\r\n  const { user, profile, refreshProfile } = useAuth();\r\n  const [application, setApplication] = useState<Application | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    fetchApplication();\r\n\r\n    // Use the effective ID for filtering and channel naming\r\n    const effectiveUserId = user.id === 'sys_admin_001' ? '00000000-0000-0000-0000-000000000000' : user.id;\r\n\r\n    // Subscribe to real-time updates with a unique channel name\r\n    const subscription = supabase\r\n      .channel(`app-status-${effectiveUserId}`)\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n          table: 'seller_applications',\r\n          filter: `user_id=eq.${effectiveUserId}`,\r\n        },\r\n        (payload) => {\r\n          if (payload.eventType === 'DELETE') {\r\n            navigate('/seller/apply');\r\n            return;\r\n          }\r\n          const updatedApp = payload.new as Application;\r\n          setApplication(updatedApp);\r\n          if (updatedApp.status === 'approved') {\r\n            refreshProfile();\r\n          }\r\n        }\r\n      )\r\n      .subscribe();\r\n\r\n    // Secondary Polling Fallback (Every 10 seconds)\r\n    const interval = setInterval(fetchApplication, 10000);\r\n\r\n    return () => {\r\n      supabase.removeChannel(subscription);\r\n      clearInterval(interval);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [user, navigate]);\r\n\r\n  // Automatic redirect when approved AND role is updated\r\n  useEffect(() => {\r\n    const isSeller = profile?.role === 'seller' || profile?.role === 'publisher_seller' || profile?.role === 'admin' || profile?.role === 'super_admin';\r\n\r\n    if (application?.status === 'approved' && isSeller) {\r\n      const timer = setTimeout(() => {\r\n        navigate('/seller/dashboard');\r\n      }, 1500); // Small delay to let the user see the \"Approved\" message\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [application?.status, profile?.role, navigate]);\r\n\r\n  const fetchApplication = async () => {\r\n    if (!user) return;\r\n\r\n    try {\r\n      const effectiveUserId = user.id === 'sys_admin_001' ? '00000000-0000-0000-0000-000000000000' : user.id;\r\n\r\n      const { data, error } = await supabase\r\n        .from('seller_applications')\r\n        .select('*')\r\n        .eq('user_id', effectiveUserId)\r\n        .single();\r\n\r\n      if (error) {\r\n        if (error.code === 'PGRST116') {\r\n          // No application found\r\n          navigate('/seller/apply');\r\n          return;\r\n        }\r\n        throw error;\r\n      }\r\n\r\n      setApplication(data);\r\n\r\n      // If approved and user role is still 'buyer', update to 'seller'\r\n      if (data.status === 'approved' && profile?.role === 'buyer') {\r\n        await updateUserRole();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching application:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateUserRole = async () => {\r\n    if (!user) return;\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from('profiles')\r\n        .update({ role: 'seller' })\r\n        .eq('id', user.id);\r\n\r\n      if (error) throw error;\r\n\r\n      // Refresh profile to get updated role\r\n      await refreshProfile();\r\n    } catch (error) {\r\n      console.error('Error updating user role:', error);\r\n    }\r\n  };\r\n\r\n  const handleCancelApplication = async () => {\r\n    if (!application) return;\r\n\r\n    if (!confirm('Are you sure you want to cancel your application? This action cannot be undone.')) {\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const isBypass = user?.id === 'sys_admin_001' || localStorage.getItem('sys_admin_bypass') === 'true';\r\n\r\n      if (isBypass) {\r\n        // Use RPC function to bypass RLS for system admin\r\n        const secret = localStorage.getItem('sys_admin_secret') || 'your_secret_admin_key_here';\r\n        const { error } = await supabase.rpc('admin_cancel_seller_application', {\r\n          application_id: application.id,\r\n          secret_key: secret\r\n        });\r\n\r\n        if (error) throw error;\r\n      } else {\r\n        // Regular user update status to cancelled\r\n        const { error } = await supabase\r\n          .from('seller_applications')\r\n          .update({ status: 'cancelled' })\r\n          .eq('id', application.id)\r\n          .eq('user_id', user?.id);\r\n\r\n        if (error) throw error;\r\n      }\r\n\r\n      // Navigate back to apply page\r\n      navigate('/seller/apply');\r\n    } catch (error: any) {\r\n      console.error('Error canceling application:', error);\r\n      alert('Failed to cancel application: ' + error.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-white dark:bg-slate-950 flex items-center justify-center transition-colors duration-500\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-20 h-20 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-6\"></div>\r\n          <p className=\"text-slate-500 dark:text-slate-400 font-black text-xs uppercase tracking-[0.2em] animate-pulse\">Initializing Security Clearance...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!application) {\r\n    return (\r\n      <div className=\"min-h-screen bg-white dark:bg-slate-950 transition-colors duration-500\">\r\n        <Navbar />\r\n        <div className=\"max-w-4xl mx-auto px-4 py-20 md:py-32 text-center\">\r\n          <div className=\"bg-slate-50 dark:bg-slate-900 rounded-[3rem] p-16 md:p-24 border border-slate-100 dark:border-slate-800 shadow-2xl relative overflow-hidden group\">\r\n            <div className=\"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 rounded-full blur-3xl -z-10 animate-pulse\"></div>\r\n            <i className=\"ri-file-search-fill text-8xl text-slate-200 dark:text-slate-800 mb-8 block transition-transform group-hover:scale-110 duration-700\"></i>\r\n            <h2 className=\"text-4xl md:text-5xl font-black text-slate-900 dark:text-white mb-6 tracking-tighter\">No Active Records.</h2>\r\n            <p className=\"text-slate-500 dark:text-slate-400 font-bold text-lg mb-12 max-w-md mx-auto\">We couldn't find an existing merchant application associated with your identity.</p>\r\n            <button\r\n              onClick={() => navigate('/seller/apply')}\r\n              className=\"h-16 px-12 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-black text-xs uppercase tracking-[0.3em] rounded-2xl hover:scale-105 active:scale-95 transition-all shadow-2xl shadow-blue-500/20\"\r\n            >\r\n              Begin Onboarding\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case 'approved':\r\n        return 'ri-shield-check-fill';\r\n      case 'rejected':\r\n        return 'ri-error-warning-fill';\r\n      default:\r\n        return 'ri-time-fill';\r\n    }\r\n  };\r\n\r\n  const getStatusMessage = (status: string) => {\r\n    switch (status) {\r\n      case 'pending':\r\n        return {\r\n          title: 'Under Review',\r\n          message: 'Your application is being audited by our trust and safety team. We\\'ll notify you once a decision is finalized.',\r\n          icon: 'ri-hourglass-2-fill',\r\n        };\r\n      case 'approved':\r\n        return {\r\n          title: 'Verification Complete!',\r\n          message: 'Your credentials have been validated. You now have full access to our merchant infrastructure.',\r\n          icon: 'ri-verified-badge-fill',\r\n        };\r\n      case 'rejected':\r\n        return {\r\n          title: 'Action Required',\r\n          message: 'Unfortunately, your application did not meet our verification criteria. Please review the feedback below.',\r\n          icon: 'ri-close-circle-fill',\r\n        };\r\n      default:\r\n        return {\r\n          title: 'Unknown Status',\r\n          message: 'Checking records...',\r\n          icon: 'ri-question-fill',\r\n        };\r\n    }\r\n  };\r\n\r\n  const statusInfo = getStatusMessage(application.status);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white dark:bg-slate-950 transition-colors duration-500\">\r\n      <Navbar />\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 md:py-20 lg:py-28 relative\">\r\n        {/* Background Decorative Elements */}\r\n        <div className=\"absolute top-40 right-0 w-72 h-72 bg-blue-500/5 rounded-full blur-3xl -z-10 animate-pulse\"></div>\r\n        <div className=\"absolute bottom-20 left-0 w-96 h-96 bg-emerald-500/5 rounded-full blur-3xl -z-10\"></div>\r\n\r\n        <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-10 mb-16 md:mb-24\">\r\n          <div className=\"text-center md:text-left max-w-2xl\">\r\n            <div className=\"inline-flex items-center gap-2 px-5 py-2 bg-gradient-to-r from-slate-900 to-slate-800 dark:from-white dark:to-slate-100 text-white dark:text-slate-900 text-[10px] font-black uppercase tracking-[0.2em] rounded-full mb-8 shadow-xl shadow-blue-500/10\">\r\n              <i className=\"ri-shield-check-fill text-blue-400 dark:text-blue-600\"></i>\r\n              Application Tracking\r\n            </div>\r\n            <h1 className=\"text-5xl md:text-7xl lg:text-8xl font-black text-slate-900 dark:text-white tracking-tighter leading-[0.85] mb-8\">\r\n              Verification<br />\r\n              <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-indigo-600 to-violet-600\">Registry.</span>\r\n            </h1>\r\n            <p className=\"text-slate-500 dark:text-slate-400 font-bold uppercase tracking-widest text-[10px] md:text-xs flex items-center justify-center md:justify-start gap-3\">\r\n              <span className=\"w-8 h-[2px] bg-blue-600/30\"></span>\r\n              Live status of your merchant credentials\r\n            </p>\r\n          </div>\r\n\r\n          <button\r\n            onClick={() => navigate('/')}\r\n            className=\"hidden md:flex h-14 px-8 items-center justify-center bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl text-slate-500 dark:text-slate-400 font-black text-[10px] uppercase tracking-widest hover:text-blue-600 dark:hover:text-blue-400 transition-all cursor-pointer group shadow-sm active:scale-95\"\r\n          >\r\n            <i className=\"ri-home-5-line text-lg mr-3 group-hover:-translate-y-1 transition-transform\"></i>\r\n            Platform Home\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-16\">\r\n          {/* Status Overview Card */}\r\n          <div className=\"lg:col-span-5\">\r\n            <div className={`p-10 md:p-14 rounded-[3rem] border shadow-2xl transition-all relative overflow-hidden group ${application.status === 'approved' ? 'bg-emerald-50/50 dark:bg-emerald-500/5 border-emerald-100 dark:border-emerald-500/20 shadow-emerald-500/10' :\r\n              application.status === 'rejected' ? 'bg-rose-50/50 dark:bg-rose-500/5 border-rose-100 dark:border-rose-500/20 shadow-rose-500/10' :\r\n                'bg-blue-50/50 dark:bg-blue-500/5 border-blue-100 dark:border-blue-500/20 shadow-blue-500/10'\r\n              }`}>\r\n              <div className=\"absolute top-0 right-0 w-40 h-40 bg-current opacity-[0.03] rounded-bl-full translate-x-10 -translate-y-10 group-hover:scale-110 transition-transform duration-700\"></div>\r\n\r\n              <div className=\"flex flex-col items-center text-center relative z-10\">\r\n                <div className={`w-24 h-24 rounded-3xl flex items-center justify-center mb-10 shadow-2xl shadow-current/20 transition-transform group-hover:scale-105 duration-500 ${application.status === 'approved' ? 'bg-gradient-to-br from-emerald-500 to-emerald-600 text-white' :\r\n                  application.status === 'rejected' ? 'bg-gradient-to-br from-rose-500 to-rose-600 text-white' :\r\n                    'bg-gradient-to-br from-blue-500 to-blue-600 text-white'\r\n                  }`}>\r\n                  <i className={`${getStatusIcon(application.status)} text-5xl`}></i>\r\n                </div>\r\n\r\n                <h2 className={`text-3xl font-black tracking-tight mb-4 ${application.status === 'approved' ? 'text-emerald-900 dark:text-emerald-400' :\r\n                  application.status === 'rejected' ? 'text-rose-900 dark:text-rose-400' :\r\n                    'text-blue-900 dark:text-blue-400'\r\n                  }`}>\r\n                  {statusInfo.title}\r\n                </h2>\r\n\r\n                <div className={`inline-flex items-center gap-3 px-6 py-2.5 rounded-full text-[11px] font-black uppercase tracking-[0.2em] mb-10 border-2 ${application.status === 'approved' ? 'bg-emerald-100/30 dark:bg-emerald-500/10 border-emerald-200 dark:border-emerald-500/30 text-emerald-700 dark:text-emerald-300' :\r\n                  application.status === 'rejected' ? 'bg-rose-100/30 dark:bg-rose-500/10 border-rose-200 dark:border-rose-500/30 text-rose-700 dark:text-rose-300' :\r\n                    'bg-blue-100/30 dark:bg-blue-500/10 border-blue-200 dark:border-blue-500/30 text-blue-700 dark:text-blue-300'\r\n                  }`}>\r\n                  <span className=\"w-2.5 h-2.5 rounded-full bg-current animate-pulse\"></span>\r\n                  {application.status}\r\n                </div>\r\n\r\n                <p className={`text-sm font-bold leading-relaxed mb-12 max-w-sm ${application.status === 'approved' ? 'text-emerald-800/80 dark:text-emerald-400/80' :\r\n                  application.status === 'rejected' ? 'text-rose-800/80 dark:text-rose-400/80' :\r\n                    'text-blue-800/80 dark:text-blue-400/80'\r\n                  }`}>\r\n                  {statusInfo.message}\r\n                </p>\r\n\r\n                {application.status === 'approved' ? (\r\n                  <button\r\n                    onClick={() => navigate('/seller/dashboard')}\r\n                    className=\"w-full h-16 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-black text-[10px] uppercase tracking-[0.3em] rounded-2xl hover:scale-[1.02] active:scale-[0.98] shadow-2xl shadow-indigo-500/20 transition-all flex items-center justify-center gap-4 group/btn\"\r\n                  >\r\n                    <span>Merchant Dashboard</span>\r\n                    <i className=\"ri-arrow-right-fill text-xl group-hover:translate-x-1 transition-transform\"></i>\r\n                  </button>\r\n                ) : application.status === 'rejected' ? (\r\n                  <button\r\n                    onClick={() => navigate('/seller/apply')}\r\n                    className=\"w-full h-16 bg-rose-600 text-white font-black text-[10px] uppercase tracking-[0.3em] rounded-2xl hover:bg-rose-700 hover:scale-[1.02] active:scale-[0.98] shadow-2xl shadow-rose-500/20 transition-all flex items-center justify-center gap-4 group/btn\"\r\n                  >\r\n                    <span>Resubmit Details</span>\r\n                    <i className=\"ri-refresh-line text-xl group-hover:rotate-180 transition-transform duration-700\"></i>\r\n                  </button>\r\n                ) : (\r\n                  <div className=\"w-full space-y-4\">\r\n                    <div className=\"w-full h-16 bg-white dark:bg-slate-900/50 border-2 border-blue-200 dark:border-blue-500/20 text-blue-900 dark:text-blue-400 font-black text-[10px] uppercase tracking-[0.3em] rounded-2xl flex items-center justify-center gap-4\">\r\n                      <i className=\"ri-loader-5-line animate-spin text-xl\"></i>\r\n                      Verification In Progress\r\n                    </div>\r\n                    <button\r\n                      onClick={handleCancelApplication}\r\n                      className=\"w-full h-14 bg-rose-50 dark:bg-rose-500/10 border-2 border-rose-200 dark:border-rose-500/20 text-rose-600 dark:text-rose-400 font-black text-[10px] uppercase tracking-[0.3em] rounded-2xl hover:bg-rose-100 dark:hover:bg-rose-500/20 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group/cancel\"\r\n                    >\r\n                      <i className=\"ri-close-circle-line text-lg group-hover/cancel:rotate-90 transition-transform duration-300\"></i>\r\n                      Cancel Application\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {application.admin_notes && (\r\n              <div className=\"mt-8 p-10 bg-rose-50/50 dark:bg-rose-500/5 border-2 border-rose-100 dark:border-rose-500/20 rounded-[2.5rem] relative overflow-hidden group\">\r\n                <div className=\"absolute top-0 right-0 w-24 h-24 bg-rose-500/5 rounded-bl-full translate-x-5 -translate-y-5\"></div>\r\n                <p className=\"text-[10px] font-black text-rose-400 uppercase tracking-[0.2em] mb-4\">Official Feedback</p>\r\n                <div className=\"flex gap-4\">\r\n                  <i className=\"ri-double-quotes-l text-4xl text-rose-200 dark:text-rose-500/20\"></i>\r\n                  <p className=\"text-rose-900 dark:text-rose-300 font-bold leading-relaxed italic text-lg\">{application.admin_notes}</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Details & Metadata Section */}\r\n          <div className=\"lg:col-span-7 space-y-8\">\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-8\">\r\n              <div className=\"bg-white dark:bg-slate-900 p-8 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm group hover:border-blue-500/30 transition-colors\">\r\n                <p className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] mb-6 flex items-center gap-2\">\r\n                  <i className=\"ri-bank-line text-blue-500\"></i>\r\n                  Business Entity\r\n                </p>\r\n                <p className=\"text-2xl font-black text-slate-900 dark:text-white tracking-tight leading-none\">{application.business_name}</p>\r\n              </div>\r\n              <div className=\"bg-white dark:bg-slate-900 p-8 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm group hover:border-blue-500/30 transition-colors\">\r\n                <p className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] mb-6 flex items-center gap-2\">\r\n                  <i className=\"ri-price-tag-3-line text-blue-500\"></i>\r\n                  Industry Niche\r\n                </p>\r\n                <p className=\"text-2xl font-black text-slate-900 dark:text-white tracking-tight leading-none\">{application.business_category}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white dark:bg-slate-900 p-10 rounded-[3rem] border border-slate-100 dark:border-slate-800 shadow-sm group hover:border-blue-500/30 transition-colors\">\r\n              <p className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] mb-6 flex items-center gap-2\">\r\n                <i className=\"ri-article-line text-blue-500\"></i>\r\n                Business Description\r\n              </p>\r\n              <p className=\"text-slate-600 dark:text-slate-400 font-bold leading-relaxed text-lg\">{application.business_description}</p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-8\">\r\n              <div className=\"bg-white dark:bg-slate-900 p-8 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm group hover:border-blue-500/30 transition-colors\">\r\n                <p className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] mb-6 flex items-center gap-2\">\r\n                  <i className=\"ri-phone-fill text-blue-500\"></i>\r\n                  Contact Line\r\n                </p>\r\n                <p className=\"text-2xl font-black text-slate-900 dark:text-white tracking-tight leading-none\">{application.contact_phone}</p>\r\n              </div>\r\n              <div className=\"bg-white dark:bg-slate-900 p-8 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm group hover:border-blue-500/30 transition-colors\">\r\n                <p className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] mb-6 flex items-center gap-2\">\r\n                  <i className=\"ri-mail-fill text-blue-500\"></i>\r\n                  Electronic Mail\r\n                </p>\r\n                <p className=\"text-lg font-black text-blue-600 dark:text-blue-400 tracking-tight break-all leading-none\">{application.contact_email}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-slate-50 dark:bg-slate-800/50 p-8 rounded-[2rem] border border-slate-100 dark:border-slate-800 flex flex-col sm:flex-row items-center justify-between gap-6 group\">\r\n              <div className=\"flex items-center gap-5\">\r\n                <div className=\"w-14 h-14 bg-white dark:bg-slate-900 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform\">\r\n                  <i className=\"ri-calendar-event-fill text-blue-600 dark:text-blue-400 text-2xl\"></i>\r\n                </div>\r\n                <div className=\"text-center sm:text-left\">\r\n                  <p className=\"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] mb-1\">Entry Timestamp</p>\r\n                  <p className=\"text-lg font-black text-slate-900 dark:text-white\">\r\n                    {new Date(application.created_at).toLocaleDateString(undefined, { day: 'numeric', month: 'long', year: 'numeric' })}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <div className=\"px-6 py-2 bg-white dark:bg-slate-900 rounded-full border border-slate-100 dark:border-slate-800\">\r\n                <p className=\"text-[10px] font-black text-emerald-600 dark:text-emerald-400 uppercase tracking-[0.3em]\">Encrypted Log</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["ApplicationStatus","navigate","useNavigate","user","profile","refreshProfile","useAuth","application","setApplication","useState","loading","setLoading","useEffect","fetchApplication","effectiveUserId","subscription","supabase","payload","updatedApp","interval","isSeller","timer","data","error","updateUserRole","handleCancelApplication","secret","jsxs","jsx","Navbar","getStatusIcon","status","statusInfo"],"mappings":"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"}