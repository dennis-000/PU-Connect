import{u as D,a as F,b as h,j as e}from"./query-vendor-CC_3ftG1.js";import{r as x,L as E}from"./react-vendor-Bsfkyusf.js";import{s as u}from"./index-CcOhh2SE.js";import"./i18n-vendor-CQdsz7qV.js";import"./supabase-vendor-C3liu3n-.js";function z(){const r=D(),[g,n]=x.useState(!1),[c,b]=x.useState(null),[f,C]=x.useState(""),[p,j]=x.useState(null),[a,l]=x.useState({title:"",company:"",location:"Accra, Ghana",type:"Internship",description:"",url:"#",source:"Direct",logo_url:"/PU Connect logo.png",is_active:!0}),{data:m=[],isLoading:S}=F({queryKey:["admin-internships"],queryFn:async()=>{const{data:t,error:s}=await u.from("internships").select("*").order("created_at",{ascending:!1});if(s)throw s;return t}}),v=h({mutationFn:async t=>{const{data:s,error:o}=await u.from("internships").insert([{...t,posted_at:new Date().toISOString(),created_at:new Date().toISOString()}]).select();if(o)throw o;return s},onSuccess:()=>{r.invalidateQueries({queryKey:["admin-internships"]}),r.invalidateQueries({queryKey:["internships"]}),n(!1),N(),i("success","Internship posted successfully!")},onError:t=>i("error",t.message)}),k=h({mutationFn:async t=>{const{error:s}=await u.from("internships").update(t).eq("id",c);if(s)throw s},onSuccess:()=>{r.invalidateQueries({queryKey:["admin-internships"]}),r.invalidateQueries({queryKey:["internships"]}),n(!1),b(null),N(),i("success","Internship updated successfully!")},onError:t=>i("error",t.message)}),q=h({mutationFn:async t=>{const{error:s}=await u.from("internships").delete().eq("id",t);if(s)throw s},onSuccess:()=>{r.invalidateQueries({queryKey:["admin-internships"]}),r.invalidateQueries({queryKey:["internships"]}),i("success","Internship deleted.")},onError:t=>i("error",t.message)}),_=h({mutationFn:async({id:t,currentState:s})=>{const{error:o}=await u.from("internships").update({is_active:!s}).eq("id",t);if(o)throw o},onSuccess:()=>{r.invalidateQueries({queryKey:["admin-internships"]}),r.invalidateQueries({queryKey:["internships"]}),i("success","Status updated.")},onError:t=>i("error",t.message)}),I=t=>{t.preventDefault(),c?k.mutate(a):v.mutate(a)},L=t=>{l(t),b(t.id),n(!0),window.scrollTo({top:0,behavior:"smooth"})},M=t=>{confirm("Are you sure you want to delete this listing?")&&q.mutate(t)},N=()=>{l({title:"",company:"",location:"Accra, Ghana",type:"Internship",description:"",url:"#",source:"Direct",logo_url:"/PU Connect logo.png",is_active:!0}),b(null)},i=(t,s)=>{j({type:t,message:s}),setTimeout(()=>j(null),3e3)},w=m.filter(t=>t.title.toLowerCase().includes(f.toLowerCase())||t.company.toLowerCase().includes(f.toLowerCase())),y={total:m.length,active:m.filter(t=>t.is_active).length,closed:m.filter(t=>!t.is_active).length},P=t=>{const s=new Date(t),d=Math.floor((new Date().getTime()-s.getTime())/1e3);return d<60?"Just now":d<3600?`${Math.floor(d/60)}m ago`:d<86400?`${Math.floor(d/3600)}h ago`:`${Math.floor(d/86400)}d ago`};return e.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] dark:bg-[#0B1120] font-sans pb-32 transition-colors duration-300",children:[p&&e.jsx("div",{className:"fixed top-24 right-6 z-50 animate-slide-in-right",children:e.jsxs("div",{className:`px-6 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${p.type==="success"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-rose-500/10 border-rose-500/20 text-rose-600 dark:text-rose-400"}`,children:[e.jsx("i",{className:`text-xl ${p.type==="success"?"ri-checkbox-circle-fill":"ri-error-warning-fill"}`}),e.jsx("span",{className:"font-bold text-xs uppercase tracking-wide",children:p.message})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 sticky top-0 z-30 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-5",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(E,{to:"/admin/dashboard",className:"w-10 h-10 flex items-center justify-center rounded-xl bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-500 hover:text-slate-900 dark:hover:text-white transition-all shadow-sm group",children:e.jsx("i",{className:"ri-arrow-left-line text-lg group-hover:-translate-x-0.5 transition-transform"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:e.jsx("i",{className:"ri-briefcase-4-fill text-white text-lg"})}),e.jsx("h1",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:"Internship Portal"})]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-widest pl-12 hidden md:block",children:"Manage Career Opportunities"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"hidden md:flex gap-2 mr-4",children:[e.jsxs("div",{className:"px-4 py-2 bg-purple-50 dark:bg-purple-900/10 rounded-lg border border-purple-100 dark:border-purple-500/10",children:[e.jsx("p",{className:"text-[10px] uppercase font-black text-purple-400",children:"Total"}),e.jsx("p",{className:"text-xl font-black text-purple-600 dark:text-purple-400 leading-none",children:y.total})]}),e.jsxs("div",{className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/10 rounded-lg border border-emerald-100 dark:border-emerald-500/10",children:[e.jsx("p",{className:"text-[10px] uppercase font-black text-emerald-400",children:"Active"}),e.jsx("p",{className:"text-xl font-black text-emerald-600 dark:text-emerald-400 leading-none",children:y.active})]})]}),e.jsxs("button",{onClick:()=>{N(),n(!0),window.scrollTo({top:0,behavior:"smooth"})},className:"h-12 px-6 bg-slate-900 dark:bg-white text-white dark:text-slate-900 hover:bg-slate-800 dark:hover:bg-slate-100 rounded-xl font-black text-xs uppercase tracking-widest transition-all shadow-xl shadow-slate-900/10 active:scale-95 flex items-center gap-2",children:[e.jsx("i",{className:"ri-add-line text-lg"}),e.jsx("span",{children:"New Job"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start",children:[g&&e.jsx("div",{className:"lg:col-span-4 sticky top-32 z-20 order-1 lg:order-2",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2rem] p-6 border border-slate-200 dark:border-slate-800 shadow-2xl animate-fade-in-up",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("h3",{className:"text-lg font-black text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx("i",{className:`ri-${c?"edit":"magic"}-line text-blue-500`}),c?"Edit Listing":"New Listing"]}),e.jsx("button",{onClick:()=>n(!1),className:"w-8 h-8 flex items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800 text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:e.jsx("i",{className:"ri-close-line text-lg"})})]}),e.jsxs("form",{onSubmit:I,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Role Title"}),e.jsx("input",{type:"text",required:!0,value:a.title,onChange:t=>l({...a,title:t.target.value}),className:"w-full bg-slate-50 dark:bg-slate-950 border-2 border-slate-100 dark:border-slate-800 rounded-xl p-3.5 text-sm font-bold text-slate-900 dark:text-white focus:border-blue-500 focus:ring-0 outline-none transition-all placeholder:font-medium",placeholder:"e.g. Product Design Intern"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Company & Logo"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("input",{type:"text",required:!0,value:a.company,onChange:t=>l({...a,company:t.target.value}),className:"w-full bg-slate-50 dark:bg-slate-950 border-2 border-slate-100 dark:border-slate-800 rounded-xl p-3.5 text-sm font-bold text-slate-900 dark:text-white focus:border-blue-500 outline-none transition-all",placeholder:"Company Name"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Location"}),e.jsx("input",{type:"text",value:a.location,onChange:t=>l({...a,location:t.target.value}),className:"w-full bg-slate-50 dark:bg-slate-950/50 border-2 border-slate-100 dark:border-slate-800 rounded-xl p-3.5 text-sm font-bold outline-none focus:border-blue-500 transition-all dark:text-white"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Job Type"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:a.type,onChange:t=>l({...a,type:t.target.value}),className:"w-full bg-slate-50 dark:bg-slate-950/50 border-2 border-slate-100 dark:border-slate-800 rounded-xl p-3.5 text-sm font-bold outline-none focus:border-blue-500 transition-all appearance-none cursor-pointer dark:text-white",children:[e.jsx("option",{value:"Internship",children:"Internship"}),e.jsx("option",{value:"Full-time",children:"Full-time"}),e.jsx("option",{value:"Part-time",children:"Part-time"}),e.jsx("option",{value:"Contract",children:"Contract"}),e.jsx("option",{value:"National Service",children:"NSS"})]}),e.jsx("i",{className:"ri-arrow-down-s-line absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Application Link"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"ri-link absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",value:a.url,onChange:t=>l({...a,url:t.target.value}),className:"w-full bg-slate-50 dark:bg-slate-950 border-2 border-slate-100 dark:border-slate-800 rounded-xl p-3.5 pl-10 text-sm font-bold outline-none focus:border-blue-500 transition-all dark:text-white",placeholder:"https://... or mailto:..."})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Description"}),e.jsx("textarea",{rows:5,value:a.description,onChange:t=>l({...a,description:t.target.value}),className:"w-full bg-slate-50 dark:bg-slate-950 border-2 border-slate-100 dark:border-slate-800 rounded-xl p-3.5 text-sm font-medium outline-none focus:border-blue-500 transition-all resize-none dark:text-white/80",placeholder:"Key responsibilities and requirements..."})]}),e.jsxs("div",{className:"pt-2 flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"flex-1 py-4 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 font-black rounded-xl text-xs uppercase tracking-widest hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:v.isPending||k.isPending,className:"flex-1 py-4 bg-blue-600 text-white font-black rounded-xl text-xs uppercase tracking-widest shadow-lg shadow-blue-500/30 hover:bg-blue-500 hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-2",children:[v.isPending||k.isPending?e.jsx("i",{className:"ri-loader-4-line animate-spin text-lg"}):e.jsx("i",{className:"ri-check-line text-lg"}),c?"Update":"Publish"]})]})]})]})}),e.jsxs("div",{className:g?"lg:col-span-8 order-2 lg:order-1":"lg:col-span-12",children:[e.jsxs("div",{className:"relative mb-8 group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-search-line text-slate-400 text-xl group-focus-within:text-blue-500 transition-colors"})}),e.jsx("input",{type:"text",placeholder:"Search internships by title or company...",value:f,onChange:t=>C(t.target.value),className:"w-full pl-12 pr-4 py-4 bg-white dark:bg-slate-900 border-2 border-slate-100 dark:border-slate-800 rounded-2xl text-slate-900 dark:text-white placeholder-slate-400 font-bold focus:border-blue-500 outline-none transition-all shadow-sm"})]}),S?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[1,2,3,4].map(t=>e.jsx("div",{className:"bg-white dark:bg-slate-900 h-40 rounded-2xl animate-pulse border border-slate-100 dark:border-slate-800"},t))}):w.length===0?e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[2.5rem] p-16 text-center border-2 border-dashed border-slate-200 dark:border-slate-800/50",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-50 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-300 dark:text-slate-600",children:e.jsx("i",{className:"ri-briefcase-line text-5xl"})}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white mb-2",children:"No internships found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Try adjusting your search terms or create a new listing."})]}):e.jsx("div",{className:g?"flex flex-col gap-4":"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5",children:w.map(t=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-[1.5rem] border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-xl hover:border-blue-500/30 transition-all group relative overflow-hidden",children:[e.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[e.jsx("button",{onClick:()=>_.mutate({id:t.id,currentState:t.is_active}),className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${t.is_active?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30":"bg-slate-100 text-slate-400"}`,title:t.is_active?"Mark as Closed":"Mark as Active",children:e.jsx("i",{className:`ri-${t.is_active?"eye-fill":"eye-off-line"}`})}),e.jsx("button",{onClick:()=>L(t),className:"w-8 h-8 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 hover:bg-blue-100 flex items-center justify-center transition-colors",children:e.jsx("i",{className:"ri-pencil-fill"})}),e.jsx("button",{onClick:()=>M(t.id),className:"w-8 h-8 rounded-lg bg-rose-50 dark:bg-rose-900/20 text-rose-600 hover:bg-rose-100 flex items-center justify-center transition-colors",children:e.jsx("i",{className:"ri-delete-bin-line"})})]}),e.jsxs("div",{className:"flex gap-4 mb-4 pr-24",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-slate-50 dark:bg-slate-800 p-2 border border-slate-100 dark:border-slate-700/50",children:e.jsx("img",{src:t.logo_url||"/PU Connect logo.png",alt:"Logo",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-slate-900 dark:text-white text-lg leading-tight mb-1",children:t.title}),e.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:t.company})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsxs("span",{className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-800 rounded-lg text-xs font-bold text-slate-600 dark:text-slate-300",children:[e.jsx("i",{className:"ri-map-pin-line mr-1"})," ",t.location]}),e.jsxs("span",{className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-800 rounded-lg text-xs font-bold text-slate-600 dark:text-slate-300",children:[e.jsx("i",{className:"ri-briefcase-line mr-1"})," ",t.type]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["Posted ",P(t.created_at)]}),e.jsx("div",{className:`w-2 h-2 rounded-full ${t.is_active?"bg-emerald-500 animate-pulse":"bg-rose-500"}`})]})]},t.id))})]})]})})]})}export{z as default};
//# sourceMappingURL=InternshipManagement-Bx1u2hLO.js.map
