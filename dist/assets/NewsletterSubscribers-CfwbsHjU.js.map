{"version":3,"file":"NewsletterSubscribers-CfwbsHjU.js","sources":["../../src/pages/admin/NewsletterSubscribers.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { supabase } from '../../lib/supabase';\r\nimport Navbar from '../../components/feature/Navbar';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function NewsletterSubscribers() {\r\n    const { profile } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [subscribers, setSubscribers] = useState<{ id: string; email: string; created_at: string }[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (profile && profile.role !== 'admin' && profile.role !== 'super_admin') {\r\n            navigate('/');\r\n            return;\r\n        }\r\n        fetchSubscribers();\r\n    }, [profile, navigate]);\r\n\r\n    const fetchSubscribers = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('newsletter_subscribers')\r\n                .select('*')\r\n                .order('created_at', { ascending: false });\r\n\r\n            if (error) {\r\n                // If table doesn't exist yet, just show empty\r\n                if (error.code === '42P01') {\r\n                    setSubscribers([]);\r\n                } else {\r\n                    console.error('Error fetching subscribers:', error);\r\n                }\r\n            } else {\r\n                setSubscribers(data || []);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-slate-50 dark:bg-slate-900 font-sans pb-20 transition-colors duration-300\">\r\n            <Navbar />\r\n\r\n            <div className=\"pt-32 pb-12 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-10\">\r\n                    <div>\r\n                        <h1 className=\"text-3xl md:text-5xl font-black text-slate-900 dark:text-white tracking-tight leading-tight mb-2\">\r\n                            Newsletter\r\n                        </h1>\r\n                        <p className=\"text-slate-500 dark:text-slate-400 font-medium text-lg\">\r\n                            Manage your email subscribers.\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <button\r\n                            onClick={() => window.history.back()}\r\n                            className=\"px-6 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 rounded-xl text-xs font-bold uppercase tracking-wide hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors shadow-sm\"\r\n                        >\r\n                            Back\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"bg-white dark:bg-slate-800 rounded-3xl border border-slate-100 dark:border-slate-700 shadow-sm overflow-hidden\">\r\n                    {loading ? (\r\n                        <div className=\"p-12 text-center text-slate-400 text-sm font-bold uppercase tracking-widest\">\r\n                            Loading Subscribers...\r\n                        </div>\r\n                    ) : subscribers.length === 0 ? (\r\n                        <div className=\"p-16 text-center\">\r\n                            <div className=\"w-20 h-20 bg-slate-50 dark:bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                                <i className=\"ri-mail-open-line text-4xl text-slate-300\"></i>\r\n                            </div>\r\n                            <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-2\">No Subscribers Yet</h3>\r\n                            <p className=\"text-slate-500 mb-6 max-w-sm mx-auto\">\r\n                                No one has subscribed to the newsletter yet. Make sure the subscription form on the home page is working!\r\n                            </p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"overflow-x-auto\">\r\n                            <table className=\"w-full text-left border-collapse\">\r\n                                <thead>\r\n                                    <tr className=\"bg-slate-50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-700\">\r\n                                        <th className=\"px-8 py-5 text-xs font-bold uppercase tracking-widest text-slate-500\">Email Address</th>\r\n                                        <th className=\"px-8 py-5 text-xs font-bold uppercase tracking-widest text-slate-500 text-right\">Subscribed Date</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {subscribers.map(sub => (\r\n                                        <tr key={sub.id} className=\"border-b border-slate-50 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors\">\r\n                                            <td className=\"px-8 py-5 font-bold text-slate-700 dark:text-slate-300\">\r\n                                                {sub.email}\r\n                                            </td>\r\n                                            <td className=\"px-8 py-5 text-right font-medium text-slate-500 text-sm\">\r\n                                                {new Date(sub.created_at).toLocaleDateString()}\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["NewsletterSubscribers","profile","useAuth","navigate","useNavigate","subscribers","setSubscribers","useState","loading","setLoading","useEffect","fetchSubscribers","data","error","supabase","jsxs","jsx","Navbar","sub"],"mappings":"mOAMA,SAAwBA,GAAwB,CAC5C,KAAM,CAAE,QAAAC,CAAA,EAAYC,EAAA,EACdC,EAAWC,EAAA,EACX,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAA8D,CAAA,CAAE,EAChG,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EAE3CG,EAAAA,UAAU,IAAM,CACZ,GAAIT,GAAWA,EAAQ,OAAS,SAAWA,EAAQ,OAAS,cAAe,CACvEE,EAAS,GAAG,EACZ,MACJ,CACAQ,EAAA,CACJ,EAAG,CAACV,EAASE,CAAQ,CAAC,EAEtB,MAAMQ,EAAmB,SAAY,CACjCF,EAAW,EAAI,EACf,GAAI,CACA,KAAM,CAAE,KAAAG,EAAM,MAAAC,CAAA,EAAU,MAAMC,EACzB,KAAK,wBAAwB,EAC7B,OAAO,GAAG,EACV,MAAM,aAAc,CAAE,UAAW,GAAO,EAEzCD,EAEIA,EAAM,OAAS,QACfP,EAAe,CAAA,CAAE,EAEjB,QAAQ,MAAM,8BAA+BO,CAAK,EAGtDP,EAAeM,GAAQ,EAAE,CAEjC,OAASC,EAAO,CACZ,QAAQ,MAAM,SAAUA,CAAK,CACjC,QAAA,CACIJ,EAAW,EAAK,CACpB,CACJ,EAEA,OACIM,EAAAA,KAAC,MAAA,CAAI,UAAU,4FACX,SAAA,CAAAC,EAAAA,IAACC,EAAA,EAAO,EAERF,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACX,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACX,SAAA,CAAAA,OAAC,MAAA,CACG,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,mGAAmG,SAAA,aAEjH,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,yDAAyD,SAAA,gCAAA,CAEtE,CAAA,EACJ,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,0BACX,SAAAA,EAAAA,IAAC,SAAA,CACG,QAAS,IAAM,OAAO,QAAQ,KAAA,EAC9B,UAAU,mPACb,SAAA,MAAA,CAAA,CAED,CACJ,CAAA,EACJ,QAEC,MAAA,CAAI,UAAU,iHACV,SAAAR,QACI,MAAA,CAAI,UAAU,8EAA8E,SAAA,yBAE7F,EACAH,EAAY,SAAW,EACvBU,OAAC,MAAA,CAAI,UAAU,mBACX,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,qGACX,eAAC,IAAA,CAAE,UAAU,4CAA4C,CAAA,CAC7D,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,wDAAwD,SAAA,qBAAkB,EACxFA,EAAAA,IAAC,IAAA,CAAE,UAAU,uCAAuC,SAAA,2GAAA,CAEpD,CAAA,CAAA,CACJ,QAEC,MAAA,CAAI,UAAU,kBACX,SAAAD,EAAAA,KAAC,QAAA,CAAM,UAAU,mCACb,SAAA,CAAAC,MAAC,QAAA,CACG,SAAAD,EAAAA,KAAC,KAAA,CAAG,UAAU,mFACV,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,uEAAuE,SAAA,gBAAa,EAClGA,EAAAA,IAAC,KAAA,CAAG,UAAU,kFAAkF,SAAA,iBAAA,CAAe,CAAA,CAAA,CACnH,CAAA,CACJ,EACAA,EAAAA,IAAC,SACI,SAAAX,EAAY,OACTU,EAAAA,KAAC,KAAA,CAAgB,UAAU,gHACvB,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,yDACT,SAAAE,EAAI,MACT,EACAF,EAAAA,IAAC,KAAA,CAAG,UAAU,0DACT,SAAA,IAAI,KAAKE,EAAI,UAAU,EAAE,mBAAA,CAAmB,CACjD,CAAA,GANKA,EAAI,EAOb,CACH,CAAA,CACL,CAAA,CAAA,CACJ,EACJ,CAAA,CAER,CAAA,CAAA,CACJ,CAAA,EACJ,CAER"}