import{j as e}from"./query-vendor-CC_3ftG1.js";import{f as u,u as p,r as d}from"./react-vendor-Bsfkyusf.js";import{u as f,s as g,N as b}from"./index-CcOhh2SE.js";import"./i18n-vendor-CQdsz7qV.js";import"./supabase-vendor-C3liu3n-.js";function w(){const[x]=u(),i=p(),{user:n}=f(),[l,a]=d.useState("verifying"),[c,t]=d.useState("Verifying your payment...");d.useEffect(()=>{const r=x.get("reference");if(!r||!n){a("failed"),t("Invalid payment reference");return}m(r)},[x,n]);const m=async r=>{try{const{data:s,error:o}=await g.functions.invoke("verify-paystack-payment",{body:{reference:r,seller_id:n?.id}});if(o)throw o;s.success?(a("success"),s.type==="sms_topup"?(t(`Payment successful! ${s.units} SMS units have been added to your record.`),setTimeout(()=>{i("/admin/sms")},3e3)):(t("Payment successful! Your seller account is now active."),setTimeout(()=>{i("/seller/dashboard")},3e3))):(a("failed"),t("Payment verification failed. Please contact support."))}catch(s){console.error("Verification error:",s),a("failed"),t("Failed to verify payment. Please contact support with your payment reference.")}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(b,{}),e.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-20 relative min-h-[calc(100vh-80px)] flex items-center justify-center",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[150%] aspect-square bg-gradient-to-br from-blue-500/5 to-emerald-600/5 rounded-full blur-[120px] pointer-events-none -z-10"}),e.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-xl shadow-gray-200/40 border border-gray-100 p-12 md:p-20 text-center w-full relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"radial-gradient(#000 1px, transparent 1px)",backgroundSize:"20px 20px"}}),l==="verifying"&&e.jsxs("div",{className:"relative z-10 animate-in fade-in zoom-in duration-500",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-10 shadow-lg",children:e.jsx("i",{className:"ri-loader-4-line text-4xl text-blue-600 animate-spin"})}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-gray-900 text-white text-[10px] font-bold uppercase tracking-wide rounded-full mb-6",children:[e.jsx("i",{className:"ri-shield-check-line text-blue-400"}),"Payment Verification"]}),e.jsxs("h2",{className:"text-3xl md:text-5xl font-bold text-gray-900 mb-6 tracking-tight",children:["Verifying ",e.jsx("span",{className:"text-blue-600",children:"Payment."})]}),e.jsx("p",{className:"text-gray-500 font-bold uppercase tracking-wide text-[10px] md:text-xs max-w-sm mx-auto leading-relaxed",children:c})]}),l==="success"&&e.jsxs("div",{className:"relative z-10 animate-in fade-in zoom-in duration-500",children:[e.jsx("div",{className:"w-20 h-20 bg-emerald-100 rounded-2xl flex items-center justify-center mx-auto mb-10 shadow-lg",children:e.jsx("i",{className:"ri-check-double-line text-4xl text-emerald-600"})}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-emerald-600 text-white text-[10px] font-bold uppercase tracking-wide rounded-full mb-6",children:[e.jsx("i",{className:"ri-checkbox-circle-line"}),"Process Complete"]}),e.jsxs("h2",{className:"text-3xl md:text-5xl font-bold text-gray-900 mb-6 tracking-tight",children:["Payment ",e.jsx("span",{className:"text-emerald-600",children:"Successful."})]}),e.jsx("p",{className:"text-gray-500 font-bold uppercase tracking-wide text-[10px] md:text-xs max-w-sm mx-auto leading-relaxed mb-10",children:c}),e.jsxs("div",{className:"flex items-center justify-center gap-3 py-4 bg-gray-50 rounded-2xl border border-gray-100 text-[10px] font-bold text-gray-400 uppercase tracking-wide",children:[e.jsx("i",{className:"ri-refresh-line animate-spin text-blue-500"}),"Redirecting to dashboard..."]})]}),l==="failed"&&e.jsxs("div",{className:"relative z-10 animate-in fade-in zoom-in duration-500",children:[e.jsx("div",{className:"w-20 h-20 bg-rose-100 rounded-2xl flex items-center justify-center mx-auto mb-10 shadow-lg",children:e.jsx("i",{className:"ri-close-circle-line text-4xl text-rose-600"})}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-rose-600 text-white text-[10px] font-bold uppercase tracking-wide rounded-full mb-6",children:[e.jsx("i",{className:"ri-error-warning-line"}),"Verification Failed"]}),e.jsxs("h2",{className:"text-3xl md:text-5xl font-bold text-gray-900 mb-6 tracking-tight",children:["Payment ",e.jsx("span",{className:"text-rose-600",children:"Issue."})]}),e.jsx("p",{className:"text-gray-500 font-bold uppercase tracking-wide text-[10px] md:text-xs max-w-sm mx-auto leading-relaxed mb-10",children:c}),e.jsxs("button",{onClick:()=>i("/seller/become"),className:"w-full px-10 py-5 bg-gray-900 text-white font-bold text-xs uppercase tracking-wide rounded-2xl hover:bg-black transition-all active:scale-[0.98] flex items-center justify-center gap-3",children:[e.jsx("i",{className:"ri-refresh-line text-lg"}),"Try Again"]})]})]})]})]})}export{w as default};
//# sourceMappingURL=PaymentCallback-DVkvKjGk.js.map
