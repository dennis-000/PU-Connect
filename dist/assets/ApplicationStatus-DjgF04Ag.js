import{j as e}from"./query-vendor-CC_3ftG1.js";import{u as w,r as d}from"./react-vendor-Bsfkyusf.js";import{u as N,s as n,N as h}from"./index-CcOhh2SE.js";import"./i18n-vendor-CQdsz7qV.js";import"./supabase-vendor-C3liu3n-.js";function I(){const a=w(),{user:s,profile:o,refreshProfile:x}=N(),[t,u]=d.useState(null),[f,c]=d.useState(!0);d.useEffect(()=>{if(!s){a("/login");return}m();const r=s.id==="sys_admin_001"?"00000000-0000-0000-0000-000000000000":s.id,l=n.channel(`app-status-${r}`).on("postgres_changes",{event:"*",schema:"public",table:"seller_applications",filter:`user_id=eq.${r}`},b=>{if(b.eventType==="DELETE"){a("/seller/apply");return}const g=b.new;u(g),g.status==="approved"&&x()}).subscribe(),i=setInterval(m,1e4);return()=>{n.removeChannel(l),clearInterval(i)}},[s,a]),d.useEffect(()=>{const r=o?.role==="seller"||o?.role==="publisher_seller"||o?.role==="admin"||o?.role==="super_admin";if(t?.status==="approved"&&r){const l=setTimeout(()=>{a("/seller/dashboard")},1500);return()=>clearTimeout(l)}},[t?.status,o?.role,a]);const m=async()=>{if(s)try{const r=s.id==="sys_admin_001"?"00000000-0000-0000-0000-000000000000":s.id,{data:l,error:i}=await n.from("seller_applications").select("*").eq("user_id",r).single();if(i){if(i.code==="PGRST116"){a("/seller/apply");return}throw i}u(l),l.status==="approved"&&o?.role==="buyer"&&await k()}catch(r){console.error("Error fetching application:",r)}finally{c(!1)}},k=async()=>{if(s)try{const{error:r}=await n.from("profiles").update({role:"seller"}).eq("id",s.id);if(r)throw r;await x()}catch(r){console.error("Error updating user role:",r)}},j=async()=>{if(t&&confirm("Are you sure you want to cancel your application? This action cannot be undone.")){c(!0);try{if(s?.id==="sys_admin_001"||localStorage.getItem("sys_admin_bypass")==="true"){const l=localStorage.getItem("sys_admin_secret")||"your_secret_admin_key_here",{error:i}=await n.rpc("admin_cancel_seller_application",{application_id:t.id,secret_key:l});if(i)throw i}else{const{error:l}=await n.from("seller_applications").update({status:"cancelled"}).eq("id",t.id).eq("user_id",s?.id);if(l)throw l}a("/seller/apply")}catch(r){console.error("Error canceling application:",r),alert("Failed to cancel application: "+r.message),c(!1)}}};if(f)return e.jsx("div",{className:"min-h-screen bg-white dark:bg-slate-950 flex items-center justify-center transition-colors duration-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-6"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-black text-xs uppercase tracking-[0.2em] animate-pulse",children:"Initializing Security Clearance..."})]})});if(!t)return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-950 transition-colors duration-500",children:[e.jsx(h,{}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-20 md:py-32 text-center",children:e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-[3rem] p-16 md:p-24 border border-slate-100 dark:border-slate-800 shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/5 rounded-full blur-3xl -z-10 animate-pulse"}),e.jsx("i",{className:"ri-file-search-fill text-8xl text-slate-200 dark:text-slate-800 mb-8 block transition-transform group-hover:scale-110 duration-700"}),e.jsx("h2",{className:"text-4xl md:text-5xl font-black text-slate-900 dark:text-white mb-6 tracking-tighter",children:"No Active Records."}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-bold text-lg mb-12 max-w-md mx-auto",children:"We couldn't find an existing merchant application associated with your identity."}),e.jsx("button",{onClick:()=>a("/seller/apply"),className:"h-16 px-12 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-black text-xs uppercase tracking-[0.3em] rounded-2xl hover:scale-105 active:scale-95 transition-all shadow-2xl shadow-blue-500/20",children:"Begin Onboarding"})]})})]});const v=r=>{switch(r){case"approved":return"ri-shield-check-fill";case"rejected":return"ri-error-warning-fill";default:return"ri-time-fill"}},p=(r=>{switch(r){case"pending":return{title:"Under Review",message:"Your application is being audited by our trust and safety team. We'll notify you once a decision is finalized.",icon:"ri-hourglass-2-fill"};case"approved":return{title:"Verification Complete!",message:"Your credentials have been validated. You now have full access to our merchant infrastructure.",icon:"ri-verified-badge-fill"};case"rejected":return{title:"Action Required",message:"Unfortunately, your application did not meet our verification criteria. Please review the feedback below.",icon:"ri-close-circle-fill"};default:return{title:"Unknown Status",message:"Checking records...",icon:"ri-question-fill"}}})(t.status);return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-950 transition-colors duration-500",children:[e.jsx(h,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 md:py-20 lg:py-28 relative",children:[e.jsx("div",{className:"absolute top-40 right-0 w-72 h-72 bg-blue-500/5 rounded-full blur-3xl -z-10 animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 left-0 w-96 h-96 bg-emerald-500/5 rounded-full blur-3xl -z-10"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-10 mb-16 md:mb-24",children:[e.jsxs("div",{className:"text-center md:text-left max-w-2xl",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-5 py-2 bg-gradient-to-r from-slate-900 to-slate-800 dark:from-white dark:to-slate-100 text-white dark:text-slate-900 text-[10px] font-black uppercase tracking-[0.2em] rounded-full mb-8 shadow-xl shadow-blue-500/10",children:[e.jsx("i",{className:"ri-shield-check-fill text-blue-400 dark:text-blue-600"}),"Application Tracking"]}),e.jsxs("h1",{className:"text-5xl md:text-7xl lg:text-8xl font-black text-slate-900 dark:text-white tracking-tighter leading-[0.85] mb-8",children:["Verification",e.jsx("br",{}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-indigo-600 to-violet-600",children:"Registry."})]}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 font-bold uppercase tracking-widest text-[10px] md:text-xs flex items-center justify-center md:justify-start gap-3",children:[e.jsx("span",{className:"w-8 h-[2px] bg-blue-600/30"}),"Live status of your merchant credentials"]})]}),e.jsxs("button",{onClick:()=>a("/"),className:"hidden md:flex h-14 px-8 items-center justify-center bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl text-slate-500 dark:text-slate-400 font-black text-[10px] uppercase tracking-widest hover:text-blue-600 dark:hover:text-blue-400 transition-all cursor-pointer group shadow-sm active:scale-95",children:[e.jsx("i",{className:"ri-home-5-line text-lg mr-3 group-hover:-translate-y-1 transition-transform"}),"Platform Home"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-16",children:[e.jsxs("div",{className:"lg:col-span-5",children:[e.jsxs("div",{className:`p-10 md:p-14 rounded-[3rem] border shadow-2xl transition-all relative overflow-hidden group ${t.status==="approved"?"bg-emerald-50/50 dark:bg-emerald-500/5 border-emerald-100 dark:border-emerald-500/20 shadow-emerald-500/10":t.status==="rejected"?"bg-rose-50/50 dark:bg-rose-500/5 border-rose-100 dark:border-rose-500/20 shadow-rose-500/10":"bg-blue-50/50 dark:bg-blue-500/5 border-blue-100 dark:border-blue-500/20 shadow-blue-500/10"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-current opacity-[0.03] rounded-bl-full translate-x-10 -translate-y-10 group-hover:scale-110 transition-transform duration-700"}),e.jsxs("div",{className:"flex flex-col items-center text-center relative z-10",children:[e.jsx("div",{className:`w-24 h-24 rounded-3xl flex items-center justify-center mb-10 shadow-2xl shadow-current/20 transition-transform group-hover:scale-105 duration-500 ${t.status==="approved"?"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white":t.status==="rejected"?"bg-gradient-to-br from-rose-500 to-rose-600 text-white":"bg-gradient-to-br from-blue-500 to-blue-600 text-white"}`,children:e.jsx("i",{className:`${v(t.status)} text-5xl`})}),e.jsx("h2",{className:`text-3xl font-black tracking-tight mb-4 ${t.status==="approved"?"text-emerald-900 dark:text-emerald-400":t.status==="rejected"?"text-rose-900 dark:text-rose-400":"text-blue-900 dark:text-blue-400"}`,children:p.title}),e.jsxs("div",{className:`inline-flex items-center gap-3 px-6 py-2.5 rounded-full text-[11px] font-black uppercase tracking-[0.2em] mb-10 border-2 ${t.status==="approved"?"bg-emerald-100/30 dark:bg-emerald-500/10 border-emerald-200 dark:border-emerald-500/30 text-emerald-700 dark:text-emerald-300":t.status==="rejected"?"bg-rose-100/30 dark:bg-rose-500/10 border-rose-200 dark:border-rose-500/30 text-rose-700 dark:text-rose-300":"bg-blue-100/30 dark:bg-blue-500/10 border-blue-200 dark:border-blue-500/30 text-blue-700 dark:text-blue-300"}`,children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-current animate-pulse"}),t.status]}),e.jsx("p",{className:`text-sm font-bold leading-relaxed mb-12 max-w-sm ${t.status==="approved"?"text-emerald-800/80 dark:text-emerald-400/80":t.status==="rejected"?"text-rose-800/80 dark:text-rose-400/80":"text-blue-800/80 dark:text-blue-400/80"}`,children:p.message}),t.status==="approved"?e.jsxs("button",{onClick:()=>a("/seller/dashboard"),className:"w-full h-16 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-black text-[10px] uppercase tracking-[0.3em] rounded-2xl hover:scale-[1.02] active:scale-[0.98] shadow-2xl shadow-indigo-500/20 transition-all flex items-center justify-center gap-4 group/btn",children:[e.jsx("span",{children:"Merchant Dashboard"}),e.jsx("i",{className:"ri-arrow-right-fill text-xl group-hover:translate-x-1 transition-transform"})]}):t.status==="rejected"?e.jsxs("button",{onClick:()=>a("/seller/apply"),className:"w-full h-16 bg-rose-600 text-white font-black text-[10px] uppercase tracking-[0.3em] rounded-2xl hover:bg-rose-700 hover:scale-[1.02] active:scale-[0.98] shadow-2xl shadow-rose-500/20 transition-all flex items-center justify-center gap-4 group/btn",children:[e.jsx("span",{children:"Resubmit Details"}),e.jsx("i",{className:"ri-refresh-line text-xl group-hover:rotate-180 transition-transform duration-700"})]}):e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{className:"w-full h-16 bg-white dark:bg-slate-900/50 border-2 border-blue-200 dark:border-blue-500/20 text-blue-900 dark:text-blue-400 font-black text-[10px] uppercase tracking-[0.3em] rounded-2xl flex items-center justify-center gap-4",children:[e.jsx("i",{className:"ri-loader-5-line animate-spin text-xl"}),"Verification In Progress"]}),e.jsxs("button",{onClick:j,className:"w-full h-14 bg-rose-50 dark:bg-rose-500/10 border-2 border-rose-200 dark:border-rose-500/20 text-rose-600 dark:text-rose-400 font-black text-[10px] uppercase tracking-[0.3em] rounded-2xl hover:bg-rose-100 dark:hover:bg-rose-500/20 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group/cancel",children:[e.jsx("i",{className:"ri-close-circle-line text-lg group-hover/cancel:rotate-90 transition-transform duration-300"}),"Cancel Application"]})]})]})]}),t.admin_notes&&e.jsxs("div",{className:"mt-8 p-10 bg-rose-50/50 dark:bg-rose-500/5 border-2 border-rose-100 dark:border-rose-500/20 rounded-[2.5rem] relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-rose-500/5 rounded-bl-full translate-x-5 -translate-y-5"}),e.jsx("p",{className:"text-[10px] font-black text-rose-400 uppercase tracking-[0.2em] mb-4",children:"Official Feedback"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("i",{className:"ri-double-quotes-l text-4xl text-rose-200 dark:text-rose-500/20"}),e.jsx("p",{className:"text-rose-900 dark:text-rose-300 font-bold leading-relaxed italic text-lg",children:t.admin_notes})]})]})]}),e.jsxs("div",{className:"lg:col-span-7 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm group hover:border-blue-500/30 transition-colors",children:[e.jsxs("p",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] mb-6 flex items-center gap-2",children:[e.jsx("i",{className:"ri-bank-line text-blue-500"}),"Business Entity"]}),e.jsx("p",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight leading-none",children:t.business_name})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm group hover:border-blue-500/30 transition-colors",children:[e.jsxs("p",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] mb-6 flex items-center gap-2",children:[e.jsx("i",{className:"ri-price-tag-3-line text-blue-500"}),"Industry Niche"]}),e.jsx("p",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight leading-none",children:t.business_category})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-10 rounded-[3rem] border border-slate-100 dark:border-slate-800 shadow-sm group hover:border-blue-500/30 transition-colors",children:[e.jsxs("p",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] mb-6 flex items-center gap-2",children:[e.jsx("i",{className:"ri-article-line text-blue-500"}),"Business Description"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-bold leading-relaxed text-lg",children:t.business_description})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm group hover:border-blue-500/30 transition-colors",children:[e.jsxs("p",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] mb-6 flex items-center gap-2",children:[e.jsx("i",{className:"ri-phone-fill text-blue-500"}),"Contact Line"]}),e.jsx("p",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight leading-none",children:t.contact_phone})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-8 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm group hover:border-blue-500/30 transition-colors",children:[e.jsxs("p",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] mb-6 flex items-center gap-2",children:[e.jsx("i",{className:"ri-mail-fill text-blue-500"}),"Electronic Mail"]}),e.jsx("p",{className:"text-lg font-black text-blue-600 dark:text-blue-400 tracking-tight break-all leading-none",children:t.contact_email})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-8 rounded-[2rem] border border-slate-100 dark:border-slate-800 flex flex-col sm:flex-row items-center justify-between gap-6 group",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-14 h-14 bg-white dark:bg-slate-900 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform",children:e.jsx("i",{className:"ri-calendar-event-fill text-blue-600 dark:text-blue-400 text-2xl"})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] mb-1",children:"Entry Timestamp"}),e.jsx("p",{className:"text-lg font-black text-slate-900 dark:text-white",children:new Date(t.created_at).toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})})]})]}),e.jsx("div",{className:"px-6 py-2 bg-white dark:bg-slate-900 rounded-full border border-slate-100 dark:border-slate-800",children:e.jsx("p",{className:"text-[10px] font-black text-emerald-600 dark:text-emerald-400 uppercase tracking-[0.3em]",children:"Encrypted Log"})})]})]})]})]})]})}export{I as default};
//# sourceMappingURL=ApplicationStatus-DjgF04Ag.js.map
