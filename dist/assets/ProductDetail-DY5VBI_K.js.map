{"version":3,"file":"ProductDetail-DY5VBI_K.js","sources":["../../src/pages/product/ProductDetail.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport { type Profile } from '../../lib/supabase';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport Navbar from '../../components/feature/Navbar';\r\nimport { getOptimizedImageUrl } from '../../lib/imageOptimization';\r\nimport { useProduct, useFavorites, useToggleFavorite } from '../../hooks/useProducts';\r\nimport { useCreateConversation, useConversations } from '../../hooks/useConversations';\r\n\r\nexport default function ProductDetail() {\r\n  const { id } = useParams();\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const { data: product, isLoading: loading } = useProduct(id);\r\n  const { conversations = [] } = useConversations();\r\n  const createConversationMutation = useCreateConversation();\r\n  const { data: favoriteItems = [] } = useFavorites();\r\n  const toggleFavoriteMutation = useToggleFavorite();\r\n\r\n  const isFavorited = favoriteItems.some(f => f.product_id === id);\r\n\r\n  const [activeImage, setActiveImage] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (product?.images && product.images.length > 0) {\r\n      setActiveImage(product.images[0]);\r\n    }\r\n  }, [product]);\r\n\r\n  const handleWhatsAppContact = () => {\r\n    if (!product?.whatsapp_number) {\r\n      alert('WhatsApp number not available');\r\n      return;\r\n    }\r\n\r\n    const message = encodeURIComponent(\r\n      `Hi! I'm interested in your product: ${product.name}`\r\n    );\r\n    const whatsappUrl = `https://wa.me/${product.whatsapp_number.replace(/[^0-9]/g, '')}?text=${message}`;\r\n    window.open(whatsappUrl, '_blank');\r\n  };\r\n\r\n  const handleInAppMessage = async () => {\r\n    if (!user) {\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    if (!product) return;\r\n\r\n    // Prevent messaging yourself\r\n    if (user.id === product.seller_id) {\r\n      alert(\"You cannot message yourself!\");\r\n      return;\r\n    }\r\n\r\n    // Check if conversation already exists for this product\r\n    // A conversation exists if the current user is a participant (buyer or seller) AND the product matches\r\n    const existing = conversations?.find(c =>\r\n      c.product_id === product.id &&\r\n      (c.buyer_id === user.id || c.seller_id === user.id)\r\n    );\r\n\r\n    if (existing) {\r\n      navigate('/messages');\r\n      return;\r\n    }\r\n\r\n    createConversationMutation.mutate({\r\n      otherUserId: product.seller_id,\r\n      productId: product.id\r\n    }, {\r\n      onSuccess: () => {\r\n        navigate('/messages');\r\n      },\r\n      onError: (error: any) => {\r\n        console.error('Error creating conversation:', error);\r\n        alert(`Failed to start conversation: ${error.message || 'Unknown error'}`);\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleShare = () => {\r\n    const shareTitle = product?.name || 'Campus Connect Product';\r\n    const shareUrl = window.location.href;\r\n\r\n    if (navigator.share) {\r\n      navigator.share({\r\n        title: shareTitle,\r\n        text: `Check out ${shareTitle} on Campus Marketplace`,\r\n        url: shareUrl,\r\n      }).catch(err => {\r\n        if (err.name !== 'AbortError') console.error('Share failed:', err);\r\n      });\r\n    } else {\r\n      const whatsappUrl = `https://wa.me/?text=${encodeURIComponent('Check out ' + shareTitle + ' on Campus Connect: ' + shareUrl)}`;\r\n      window.open(whatsappUrl, '_blank');\r\n      navigator.clipboard.writeText(shareUrl);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-950 pt-20 transition-colors duration-300\">\r\n        <Navbar />\r\n        <div className=\"text-center py-24\">\r\n          <div className=\"inline-block w-12 h-12 border-4 border-gray-200 border-t-emerald-600 rounded-full animate-spin\"></div>\r\n          <p className=\"mt-4 text-gray-600 dark:text-gray-400 font-medium\">Loading product details...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!product) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-950 pt-20 transition-colors duration-300\">\r\n        <Navbar />\r\n        <div className=\"text-center py-24 max-w-md mx-auto\">\r\n          <div className=\"w-24 h-24 bg-red-50 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n            <i className=\"ri-shopping-bag-line text-5xl text-red-300 dark:text-red-500\"></i>\r\n          </div>\r\n          <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">Product not found</h3>\r\n          <p className=\"text-gray-600 dark:text-gray-400 mb-8\">The product you are looking for might have been sold or removed by the seller.</p>\r\n          <Link to=\"/marketplace\" className=\"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors\">\r\n            <i className=\"ri-arrow-left-line mr-2\"></i>\r\n            Back to marketplace\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const seller = product.seller as Profile;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-950 pt-24 pb-32 transition-colors duration-300\">\r\n      <Navbar />\r\n\r\n      <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        <div className=\"mb-6 flex items-center justify-between\">\r\n          <Link\r\n            to=\"/marketplace\"\r\n            className=\"inline-flex items-center text-blue-600 hover:text-blue-700 font-bold text-sm uppercase tracking-widest transition-colors cursor-pointer\"\r\n          >\r\n            <i className=\"ri-arrow-left-line mr-2\"></i>\r\n            Back to Marketplace\r\n          </Link>\r\n          <button\r\n            onClick={handleShare}\r\n            className=\"w-10 h-10 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all text-gray-500 dark:text-gray-400 cursor-pointer flex items-center justify-center\"\r\n            title=\"Share Product\"\r\n          >\r\n            <i className=\"ri-share-forward-line text-lg\"></i>\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"bg-white dark:bg-gray-900 rounded-[2.5rem] shadow-xl shadow-gray-200/40 dark:shadow-none border border-gray-50 dark:border-gray-800 overflow-hidden\">\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-12 p-6 md:p-12\">\r\n            {/* Product Image Gallery */}\r\n            <div className=\"flex flex-col gap-4\">\r\n              {/* Main Image */}\r\n              <div className=\"aspect-[4/5] md:aspect-square bg-gray-50 dark:bg-gray-800 rounded-[2rem] overflow-hidden border border-gray-50 dark:border-gray-800 flex items-center justify-center relative group select-none\">\r\n                {activeImage ? (\r\n                  <>\r\n                    <img\r\n                      key={activeImage}\r\n                      src={getOptimizedImageUrl(activeImage, 1000, 85)}\r\n                      alt={product.name}\r\n                      className=\"w-full h-full object-cover animate-in fade-in zoom-in-105 duration-500\"\r\n                      loading=\"eager\"\r\n                      decoding=\"async\"\r\n                    />\r\n\r\n                    {/* Navigation Arrows (Only if multiple images) */}\r\n                    {product.images && product.images.length > 1 && (\r\n                      <>\r\n                        <button\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            const currentIdx = product.images!.indexOf(activeImage);\r\n                            const prevIdx = (currentIdx - 1 + product.images!.length) % product.images!.length;\r\n                            setActiveImage(product.images![prevIdx]);\r\n                          }}\r\n                          className=\"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/10 hover:bg-white/30 backdrop-blur-md text-white rounded-full flex items-center justify-center transition-all opacity-0 group-hover:opacity-100 active:scale-95\"\r\n                        >\r\n                          <i className=\"ri-arrow-left-s-line text-2xl\"></i>\r\n                        </button>\r\n                        <button\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            const currentIdx = product.images!.indexOf(activeImage);\r\n                            const nextIdx = (currentIdx + 1) % product.images!.length;\r\n                            setActiveImage(product.images![nextIdx]);\r\n                          }}\r\n                          className=\"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/10 hover:bg-white/30 backdrop-blur-md text-white rounded-full flex items-center justify-center transition-all opacity-0 group-hover:opacity-100 active:scale-95\"\r\n                        >\r\n                          <i className=\"ri-arrow-right-s-line text-2xl\"></i>\r\n                        </button>\r\n\r\n                        {/* Image Counter Badge */}\r\n                        <div className=\"absolute bottom-4 right-4 px-3 py-1 bg-black/50 backdrop-blur-md rounded-full text-white text-[10px] font-bold uppercase tracking-widest opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                          {product.images.indexOf(activeImage) + 1} / {product.images.length}\r\n                        </div>\r\n                      </>\r\n                    )}\r\n                  </>\r\n                ) : (\r\n                  <div className=\"w-full h-full flex items-center justify-center\">\r\n                    <i className=\"ri-image-line text-6xl text-gray-200 dark:text-gray-700\"></i>\r\n                  </div>\r\n                )}\r\n                {product.is_active === false && (\r\n                  <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center\">\r\n                    <span className=\"px-8 py-3 bg-red-600 text-white font-bold rounded-full text-lg uppercase tracking-widest shadow-xl\">Sold Out</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Thumbnails */}\r\n              {product.images && product.images.length > 1 && (\r\n                <div className=\"grid grid-cols-5 gap-2 md:gap-3 overflow-x-auto pb-2 px-1\">\r\n                  {product.images.map((img, idx) => (\r\n                    <button\r\n                      key={idx}\r\n                      onClick={() => setActiveImage(img)}\r\n                      className={`aspect-square rounded-xl overflow-hidden border-2 transition-all duration-300 relative group/thumb ${activeImage === img\r\n                        ? 'border-blue-600 ring-4 ring-blue-600/10 scale-95 opacity-100'\r\n                        : 'border-transparent opacity-50 hover:opacity-100 hover:scale-105'\r\n                        }`}\r\n                    >\r\n                      <img\r\n                        src={getOptimizedImageUrl(img, 200, 80)}\r\n                        alt={`View ${idx + 1}`}\r\n                        className=\"w-full h-full object-cover\"\r\n                      />\r\n                      {activeImage !== img && (\r\n                        <div className=\"absolute inset-0 bg-black/10 group-hover/thumb:bg-transparent transition-colors\"></div>\r\n                      )}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex flex-col\">\r\n              <div className=\"flex items-center justify-between mb-8\">\r\n                <span className=\"px-4 py-1.5 bg-blue-600 text-white text-[10px] md:text-xs font-bold uppercase tracking-widest rounded-full shadow-lg shadow-blue-500/20\">\r\n                  {product.category}\r\n                </span>\r\n                <div className=\"flex items-center text-gray-400 text-xs md:text-sm font-bold uppercase tracking-widest\">\r\n                  <i className=\"ri-eye-line mr-2 text-blue-600\"></i>\r\n                  {product.views_count || 0} Views\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-start justify-between gap-4 mb-6\">\r\n                <h1 className=\"text-3xl md:text-5xl font-bold text-gray-900 dark:text-white leading-tight tracking-tight\">\r\n                  {product.name}\r\n                </h1>\r\n                <button\r\n                  onClick={() => toggleFavoriteMutation.mutate(product.id)}\r\n                  className={`w-12 h-12 md:w-14 md:h-14 rounded-2xl flex items-center justify-center transition-all shadow-lg active:scale-95 flex-shrink-0 cursor-pointer ${isFavorited\r\n                    ? 'bg-rose-500 text-white shadow-rose-200 dark:shadow-none'\r\n                    : 'bg-white dark:bg-gray-800 text-gray-400 dark:text-gray-500 hover:text-rose-500 border border-gray-100 dark:border-gray-800'\r\n                    }`}\r\n                >\r\n                  <i className={`${isFavorited ? 'ri-heart-fill' : 'ri-heart-line'} text-2xl`}></i>\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"mb-8 p-8 bg-gray-50 dark:bg-gray-800/50 rounded-[2rem] border border-gray-100 dark:border-gray-800\">\r\n                {product.price_type === 'fixed' ? (\r\n                  <div className=\"flex flex-col\">\r\n                    <span className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2\">Listing Price</span>\r\n                    <span className=\"text-3xl md:text-5xl font-bold text-blue-600 tracking-tight\">GHâ‚µ{product.price?.toLocaleString()}</span>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"flex flex-col\">\r\n                    <span className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2\">Pricing Terms</span>\r\n                    <p className=\"text-xl md:text-2xl font-bold text-blue-600 uppercase tracking-widest\">Contact for Quote</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"mb-10\">\r\n                <h3 className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-4 ml-1\">Product Description</h3>\r\n                <div className=\"prose prose-blue max-w-none dark:prose-invert\">\r\n                  <p className=\"text-gray-600 dark:text-gray-300 leading-relaxed text-base font-medium\">\r\n                    {product.description || 'No detailed description provided by the seller.'}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"mb-10 p-6 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border border-gray-100 dark:border-gray-800 flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <div className=\"w-12 h-12 rounded-xl overflow-hidden shadow-sm border-2 border-white dark:border-gray-700 bg-white dark:bg-black\">\r\n                    {/* Prefer Business Logo, fallback to Avatar */}\r\n                    {(seller as any).business_logo || seller?.avatar_url ? (\r\n                      <img\r\n                        src={getOptimizedImageUrl((seller as any).business_logo || seller.avatar_url, 128, 80)}\r\n                        alt={(seller as any).business_name || seller.full_name}\r\n                        className=\"w-full h-full object-cover\"\r\n                      />\r\n                    ) : (\r\n                      <div className=\"w-full h-full bg-gray-900 dark:bg-gray-700 flex items-center justify-center\">\r\n                        <span className=\"text-white font-bold text-lg\">\r\n                          {((seller as any).business_name || seller?.full_name)?.charAt(0).toUpperCase() || 'S'}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-0.5\">Sold By</p>\r\n                    <p className=\"font-bold text-gray-900 dark:text-white text-base tracking-tight\">\r\n                      {(seller as any).business_name || seller?.full_name || 'Campus Seller'}\r\n                    </p>\r\n                    {/* If showing business name, maybe show contact name below? distinct from Department */}\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right hidden sm:block\">\r\n                  <p className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-0.5\">Faculty / Dept</p>\r\n                  <p className=\"text-xs font-bold text-gray-700 dark:text-gray-300\">{seller?.department || 'Verified Member'}</p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"fixed bottom-0 left-0 right-0 p-4 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md border-t border-gray-100 dark:border-gray-800 z-50 lg:static lg:p-0 lg:bg-transparent lg:border-none shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.1)] lg:shadow-none animate-slide-in-up\">\r\n                <div className=\"max-w-6xl mx-auto grid grid-cols-3 gap-2 lg:gap-3\">\r\n                  <button\r\n                    onClick={handleWhatsAppContact}\r\n                    className=\"w-full flex flex-col lg:flex-row items-center justify-center gap-1 lg:gap-2 px-2 lg:px-4 py-3 lg:py-4.5 bg-emerald-600 text-white font-bold rounded-xl lg:rounded-2xl hover:bg-emerald-700 shadow-lg shadow-emerald-500/20 transition-all cursor-pointer active:scale-95 text-[10px] lg:text-xs uppercase tracking-widest\"\r\n                    disabled={!product?.whatsapp_number}\r\n                  >\r\n                    <i className=\"ri-whatsapp-line text-lg lg:text-xl\"></i>\r\n                    <span className=\"hidden leading-none sm:inline\">WhatsApp</span>\r\n                  </button>\r\n\r\n                  <a\r\n                    href={`tel:${seller?.phone}`}\r\n                    className={`w-full flex flex-col lg:flex-row items-center justify-center gap-1 lg:gap-2 px-2 lg:px-4 py-3 lg:py-4.5 bg-blue-600 text-white font-bold rounded-xl lg:rounded-2xl hover:bg-blue-700 shadow-lg shadow-blue-500/20 transition-all cursor-pointer active:scale-95 text-[10px] lg:text-xs uppercase tracking-widest ${!seller?.phone ? 'opacity-50 pointer-events-none' : ''}`}\r\n                  >\r\n                    <i className=\"ri-phone-line text-lg lg:text-xl\"></i>\r\n                    <span className=\"hidden leading-none sm:inline\">Call</span>\r\n                  </a>\r\n\r\n                  <button\r\n                    onClick={handleInAppMessage}\r\n                    className=\"w-full flex flex-col lg:flex-row items-center justify-center gap-1 lg:gap-2 px-2 lg:px-4 py-3 lg:py-4.5 bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold rounded-xl lg:rounded-2xl hover:bg-black dark:hover:bg-gray-100 shadow-lg shadow-gray-900/20 transition-all cursor-pointer active:scale-95 text-[10px] lg:text-xs uppercase tracking-widest\"\r\n                    disabled={createConversationMutation.isPending}\r\n                  >\r\n                    <i className=\"ri-message-3-line text-lg lg:text-xl\"></i>\r\n                    <span className=\"hidden leading-none sm:inline\">{createConversationMutation.isPending ? '...' : 'Chat'}</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["ProductDetail","id","useParams","user","useAuth","navigate","useNavigate","product","loading","useProduct","conversations","useConversations","createConversationMutation","useCreateConversation","favoriteItems","useFavorites","toggleFavoriteMutation","useToggleFavorite","isFavorited","f","activeImage","setActiveImage","useState","useEffect","handleWhatsAppContact","message","whatsappUrl","handleInAppMessage","c","error","handleShare","shareTitle","shareUrl","err","jsxs","jsx","Navbar","Link","seller","Fragment","getOptimizedImageUrl","e","prevIdx","nextIdx","img","idx"],"mappings":"2TASA,SAAwBA,GAAgB,CACtC,KAAM,CAAE,GAAAC,CAAA,EAAOC,EAAA,EACT,CAAE,KAAAC,CAAA,EAASC,EAAA,EACXC,EAAWC,EAAA,EAEX,CAAE,KAAMC,EAAS,UAAWC,CAAA,EAAYC,EAAWR,CAAE,EACrD,CAAE,cAAAS,EAAgB,EAAC,EAAMC,EAAA,EACzBC,EAA6BC,EAAA,EAC7B,CAAE,KAAMC,EAAgB,CAAA,CAAC,EAAMC,EAAA,EAC/BC,EAAyBC,EAAA,EAEzBC,EAAcJ,EAAc,KAAKK,GAAKA,EAAE,aAAelB,CAAE,EAEzD,CAACmB,EAAaC,CAAc,EAAIC,EAAAA,SAAwB,IAAI,EAElEC,EAAAA,UAAU,IAAM,CACVhB,GAAS,QAAUA,EAAQ,OAAO,OAAS,GAC7Cc,EAAed,EAAQ,OAAO,CAAC,CAAC,CAEpC,EAAG,CAACA,CAAO,CAAC,EAEZ,MAAMiB,EAAwB,IAAM,CAClC,GAAI,CAACjB,GAAS,gBAAiB,CAC7B,MAAM,+BAA+B,EACrC,MACF,CAEA,MAAMkB,EAAU,mBACd,uCAAuClB,EAAQ,IAAI,EAAA,EAE/CmB,EAAc,iBAAiBnB,EAAQ,gBAAgB,QAAQ,UAAW,EAAE,CAAC,SAASkB,CAAO,GACnG,OAAO,KAAKC,EAAa,QAAQ,CACnC,EAEMC,EAAqB,SAAY,CACrC,GAAI,CAACxB,EAAM,CACTE,EAAS,QAAQ,EACjB,MACF,CAEA,GAAI,CAACE,EAAS,OAGd,GAAIJ,EAAK,KAAOI,EAAQ,UAAW,CACjC,MAAM,8BAA8B,EACpC,MACF,CASA,GALiBG,GAAe,KAAKkB,GACnCA,EAAE,aAAerB,EAAQ,KACxBqB,EAAE,WAAazB,EAAK,IAAMyB,EAAE,YAAczB,EAAK,GAAA,EAGpC,CACZE,EAAS,WAAW,EACpB,MACF,CAEAO,EAA2B,OAAO,CAChC,YAAaL,EAAQ,UACrB,UAAWA,EAAQ,EAAA,EAClB,CACD,UAAW,IAAM,CACfF,EAAS,WAAW,CACtB,EACA,QAAUwB,GAAe,CACvB,QAAQ,MAAM,+BAAgCA,CAAK,EACnD,MAAM,iCAAiCA,EAAM,SAAW,eAAe,EAAE,CAC3E,CAAA,CACD,CACH,EAEMC,EAAc,IAAM,CACxB,MAAMC,EAAaxB,GAAS,MAAQ,yBAC9ByB,EAAW,OAAO,SAAS,KAEjC,GAAI,UAAU,MACZ,UAAU,MAAM,CACd,MAAOD,EACP,KAAM,aAAaA,CAAU,yBAC7B,IAAKC,CAAA,CACN,EAAE,MAAMC,GAAO,CACVA,EAAI,OAAS,cAAc,QAAQ,MAAM,gBAAiBA,CAAG,CACnE,CAAC,MACI,CACL,MAAMP,EAAc,uBAAuB,mBAAmB,aAAeK,EAAa,uBAAyBC,CAAQ,CAAC,GAC5H,OAAO,KAAKN,EAAa,QAAQ,EACjC,UAAU,UAAU,UAAUM,CAAQ,CACxC,CACF,EAEA,GAAIxB,EACF,OACE0B,EAAAA,KAAC,MAAA,CAAI,UAAU,gFACb,SAAA,CAAAC,EAAAA,IAACC,EAAA,EAAO,EACRF,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gGAAA,CAAiG,EAChHA,EAAAA,IAAC,IAAA,CAAE,UAAU,oDAAoD,SAAA,4BAAA,CAA0B,CAAA,CAAA,CAC7F,CAAA,EACF,EAIJ,GAAI,CAAC5B,EACH,OACE2B,EAAAA,KAAC,MAAA,CAAI,UAAU,gFACb,SAAA,CAAAC,EAAAA,IAACC,EAAA,EAAO,EACRF,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oGACb,eAAC,IAAA,CAAE,UAAU,+DAA+D,CAAA,CAC9E,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,wDAAwD,SAAA,oBAAiB,EACvFA,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,iFAA8E,EACnID,EAAAA,KAACG,EAAA,CAAK,GAAG,eAAe,UAAU,yHAChC,SAAA,CAAAF,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAAA,CAA0B,EAAI,qBAAA,CAAA,CAE7C,CAAA,CAAA,CACF,CAAA,EACF,EAIJ,MAAMG,EAAS/B,EAAQ,OAEvB,OACE2B,EAAAA,KAAC,MAAA,CAAI,UAAU,sFACb,SAAA,CAAAC,EAAAA,IAACC,EAAA,EAAO,EAERF,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAACG,EAAA,CACC,GAAG,eACH,UAAU,0IAEV,SAAA,CAAAF,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAAA,CAA0B,EAAI,qBAAA,CAAA,CAAA,EAG7CA,EAAAA,IAAC,SAAA,CACC,QAASL,EACT,UAAU,+OACV,MAAM,gBAEN,SAAAK,EAAAA,IAAC,IAAA,CAAE,UAAU,+BAAA,CAAgC,CAAA,CAAA,CAC/C,EACF,QAEC,MAAA,CAAI,UAAU,sJACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8DAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,sBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kMACZ,SAAA,CAAAd,EACCc,EAAAA,KAAAK,WAAA,CACE,SAAA,CAAAJ,EAAAA,IAAC,MAAA,CAEC,IAAKK,EAAqBpB,EAAa,IAAM,EAAE,EAC/C,IAAKb,EAAQ,KACb,UAAU,yEACV,QAAQ,QACR,SAAS,OAAA,EALJa,CAAA,EASNb,EAAQ,QAAUA,EAAQ,OAAO,OAAS,GACzC2B,EAAAA,KAAAK,WAAA,CACE,SAAA,CAAAJ,EAAAA,IAAC,SAAA,CACC,QAAUM,GAAM,CACdA,EAAE,gBAAA,EAEF,MAAMC,GADanC,EAAQ,OAAQ,QAAQa,CAAW,EACxB,EAAIb,EAAQ,OAAQ,QAAUA,EAAQ,OAAQ,OAC5Ec,EAAed,EAAQ,OAAQmC,CAAO,CAAC,CACzC,EACA,UAAU,8NAEV,SAAAP,EAAAA,IAAC,IAAA,CAAE,UAAU,+BAAA,CAAgC,CAAA,CAAA,EAE/CA,EAAAA,IAAC,SAAA,CACC,QAAUM,GAAM,CACdA,EAAE,gBAAA,EAEF,MAAME,GADapC,EAAQ,OAAQ,QAAQa,CAAW,EACxB,GAAKb,EAAQ,OAAQ,OACnDc,EAAed,EAAQ,OAAQoC,CAAO,CAAC,CACzC,EACA,UAAU,+NAEV,SAAAR,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAA,CAAiC,CAAA,CAAA,EAIhDD,EAAAA,KAAC,MAAA,CAAI,UAAU,gMACZ,SAAA,CAAA3B,EAAQ,OAAO,QAAQa,CAAW,EAAI,EAAE,MAAIb,EAAQ,OAAO,MAAA,CAAA,CAC9D,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,QAEC,MAAA,CAAI,UAAU,iDACb,SAAA4B,EAAAA,IAAC,IAAA,CAAE,UAAU,yDAAA,CAA0D,CAAA,CACzE,EAED5B,EAAQ,YAAc,IACrB4B,EAAAA,IAAC,MAAA,CAAI,UAAU,iFACb,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,qGAAqG,SAAA,UAAA,CAAQ,CAAA,CAC/H,CAAA,EAEJ,EAGC5B,EAAQ,QAAUA,EAAQ,OAAO,OAAS,GACzC4B,EAAAA,IAAC,MAAA,CAAI,UAAU,4DACZ,SAAA5B,EAAQ,OAAO,IAAI,CAACqC,EAAKC,IACxBX,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMb,EAAeuB,CAAG,EACjC,UAAW,sGAAsGxB,IAAgBwB,EAC7H,+DACA,iEACF,GAEF,SAAA,CAAAT,EAAAA,IAAC,MAAA,CACC,IAAKK,EAAqBI,EAAK,IAAK,EAAE,EACtC,IAAK,QAAQC,EAAM,CAAC,GACpB,UAAU,4BAAA,CAAA,EAEXzB,IAAgBwB,GACfT,EAAAA,IAAC,MAAA,CAAI,UAAU,iFAAA,CAAkF,CAAA,CAAA,EAb9FU,CAAA,CAgBR,CAAA,CACH,CAAA,EAEJ,EAEAX,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,0IACb,SAAA5B,EAAQ,SACX,EACA2B,EAAAA,KAAC,MAAA,CAAI,UAAU,yFACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAA,CAAiC,EAC7C5B,EAAQ,aAAe,EAAE,QAAA,CAAA,CAC5B,CAAA,EACF,EAEA2B,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,4FACX,SAAA5B,EAAQ,KACX,EACA4B,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMnB,EAAuB,OAAOT,EAAQ,EAAE,EACvD,UAAW,gJAAgJW,EACvJ,0DACA,4HACF,GAEF,eAAC,IAAA,CAAE,UAAW,GAAGA,EAAc,gBAAkB,eAAe,WAAA,CAAa,CAAA,CAAA,CAC/E,EACF,EAEAiB,EAAAA,IAAC,MAAA,CAAI,UAAU,qGACZ,SAAA5B,EAAQ,aAAe,QACtB2B,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,qEAAqE,SAAA,gBAAa,EAClGD,EAAAA,KAAC,OAAA,CAAK,UAAU,8DAA8D,SAAA,CAAA,MAAI3B,EAAQ,OAAO,eAAA,CAAe,CAAA,CAAE,CAAA,CAAA,CACpH,EAEA2B,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,qEAAqE,SAAA,gBAAa,EAClGA,EAAAA,IAAC,IAAA,CAAE,UAAU,wEAAwE,SAAA,mBAAA,CAAiB,CAAA,CAAA,CACxG,CAAA,CAEJ,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,QACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,0EAA0E,SAAA,sBAAmB,EAC3GA,EAAAA,IAAC,MAAA,CAAI,UAAU,gDACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,yEACV,SAAA5B,EAAQ,aAAe,iDAAA,CAC1B,CAAA,CACF,CAAA,EACF,EAEA2B,EAAAA,KAAC,MAAA,CAAI,UAAU,qIACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,MAAC,OAAI,UAAU,mHAEX,SAAAG,EAAe,eAAiBA,GAAQ,WACxCH,EAAAA,IAAC,MAAA,CACC,IAAKK,EAAsBF,EAAe,eAAiBA,EAAO,WAAY,IAAK,EAAE,EACrF,IAAMA,EAAe,eAAiBA,EAAO,UAC7C,UAAU,4BAAA,CAAA,QAGX,MAAA,CAAI,UAAU,8EACb,SAAAH,EAAAA,IAAC,OAAA,CAAK,UAAU,+BACX,UAAAG,EAAe,eAAiBA,GAAQ,YAAY,OAAO,CAAC,EAAE,eAAiB,IACpF,EACF,CAAA,CAEJ,SACC,MAAA,CACC,SAAA,CAAAH,EAAAA,IAAC,IAAA,CAAE,UAAU,uEAAuE,SAAA,UAAO,EAC3FA,EAAAA,IAAC,KAAE,UAAU,mEACT,WAAe,eAAiBG,GAAQ,WAAa,eAAA,CACzD,CAAA,CAAA,CAEF,CAAA,EACF,EACAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,uEAAuE,SAAA,iBAAc,QACjG,IAAA,CAAE,UAAU,qDAAsD,SAAAG,GAAQ,YAAc,iBAAA,CAAkB,CAAA,CAAA,CAC7G,CAAA,EACF,QAEC,MAAA,CAAI,UAAU,yQACb,SAAAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAASV,EACT,UAAU,4TACV,SAAU,CAACjB,GAAS,gBAEpB,SAAA,CAAA4B,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAA,CAAsC,EACnDA,EAAAA,IAAC,OAAA,CAAK,UAAU,gCAAgC,SAAA,UAAA,CAAQ,CAAA,CAAA,CAAA,EAG1DD,EAAAA,KAAC,IAAA,CACC,KAAM,OAAOI,GAAQ,KAAK,GAC1B,UAAW,oTAAqTA,GAAQ,MAA2C,GAAnC,gCAAqC,GAErX,SAAA,CAAAH,EAAAA,IAAC,IAAA,CAAE,UAAU,kCAAA,CAAmC,EAChDA,EAAAA,IAAC,OAAA,CAAK,UAAU,gCAAgC,SAAA,MAAA,CAAI,CAAA,CAAA,CAAA,EAGtDD,EAAAA,KAAC,SAAA,CACC,QAASP,EACT,UAAU,wWACV,SAAUf,EAA2B,UAErC,SAAA,CAAAuB,EAAAA,IAAC,IAAA,CAAE,UAAU,sCAAA,CAAuC,QACnD,OAAA,CAAK,UAAU,gCAAiC,SAAAvB,EAA2B,UAAY,MAAQ,MAAA,CAAO,CAAA,CAAA,CAAA,CACzG,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAGF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ"}