import{_ as y}from"./supabase-vendor-C3liu3n-.js";import{a as f}from"./query-vendor-CC_3ftG1.js";import{s as I}from"./index-CcOhh2SE.js";new Date(Date.now()-1e3*60*60*48).toISOString(),new Date().toISOString(),new Date(Date.now()-1e3*60*60*24*5).toISOString(),new Date().toISOString(),new Date(Date.now()-1e3*60*60*24*7).toISOString(),new Date().toISOString(),new Date(Date.now()-1e3*60*60*24*3).toISOString(),new Date().toISOString();function A(a){return f({queryKey:["internships",a],queryFn:async()=>{const s=[];try{let e=I.from("internships").select("*").eq("is_active",!0);if(a?.search){const n=a.search.trim();e=e.or(`title.ilike.%${n}%,company.ilike.%${n}%,description.ilike.%${n}%`)}const{data:t,error:o}=await e.order("posted_at",{ascending:!1});o?console.warn("Fetching Supabase internships failed:",o):t&&t.length>0&&s.push(...t)}catch(e){console.error("Supabase error:",e)}const{fetchLinkedInJobs:l}=await y(async()=>{const{fetchLinkedInJobs:e}=await import("./linkedin-service-C1EmBU37.js");return{fetchLinkedInJobs:e}},[]),p=[a?.search?`${a.search} Internship`:"Internship","Internship Ghana","Remote Internship","Software Engineering Internship","Marketing Internship"],c=[...new Set(p)];console.log("Fetching LinkedIn jobs for queries:",c);const u=c.map(e=>l(e)),d=(await Promise.all(u)).flat().map(e=>{const t=e.job_id||e.id||Math.random().toString(),o=e.job_title||e.title||"Internship",n=e.employer_name||e.organization||"Unknown Company";let i="Remote";e.locations_derived&&e.locations_derived.length>0?i=e.locations_derived[0]:(e.job_city||e.job_country)&&(i=`${e.job_city||""}, ${e.job_country||""}`.replace(/^, /,"").trim());let r="Internship";Array.isArray(e.employment_type)&&e.employment_type.length>0?r=e.employment_type[0]:e.job_employment_type&&(r=e.job_employment_type);const _=e.job_apply_link||e.url||"#",g=e.employer_logo||e.organization_logo||`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=0077b5&color=fff`,h=e.job_posted_at_datetime_utc||e.date_posted||new Date().toISOString();return{id:t,title:o,company:n,location:i,type:r,source:"LinkedIn",description:e.job_description||"",url:_,logo_url:g,posted_at:h,created_at:new Date().toISOString(),is_active:!0}}),m=[...s,...d];return Array.from(new Map(m.map(e=>[e.id,e])).values()).sort((e,t)=>new Date(t.posted_at).getTime()-new Date(e.posted_at).getTime())},staleTime:0})}export{A as u};
//# sourceMappingURL=useInternships-DEz_Ap0e.js.map
